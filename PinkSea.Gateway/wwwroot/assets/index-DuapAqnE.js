(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Oi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const _e={},fn=[],St=()=>{},Bl=()=>!1,Rs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ni=e=>e.startsWith("onUpdate:"),Ue=Object.assign,zi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Vl=Object.prototype.hasOwnProperty,me=(e,t)=>Vl.call(e,t),X=Array.isArray,dn=e=>Zn(e)==="[object Map]",kn=e=>Zn(e)==="[object Set]",gr=e=>Zn(e)==="[object Date]",ae=e=>typeof e=="function",Ne=e=>typeof e=="string",gt=e=>typeof e=="symbol",xe=e=>e!==null&&typeof e=="object",Ea=e=>(xe(e)||ae(e))&&ae(e.then)&&ae(e.catch),Ra=Object.prototype.toString,Zn=e=>Ra.call(e),Hl=e=>Zn(e).slice(8,-1),Da=e=>Zn(e)==="[object Object]",Mi=e=>Ne(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,An=Oi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ds=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},jl=/-(\w)/g,ct=Ds(e=>e.replace(jl,(t,n)=>n?n.toUpperCase():"")),Wl=/\B([A-Z])/g,Wt=Ds(e=>e.replace(Wl,"-$1").toLowerCase()),Is=Ds(e=>e.charAt(0).toUpperCase()+e.slice(1)),ei=Ds(e=>e?`on${Is(e)}`:""),Vt=(e,t)=>!Object.is(e,t),ds=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ia=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},bs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let mr;const Fs=()=>mr||(mr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $i(e){if(X(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Ne(s)?ql(s):$i(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Ne(e)||xe(e))return e}const Kl=/;(?![^(]*\))/g,Gl=/:([^]+)/,Jl=/\/\*[^]*?\*\//g;function ql(e){const t={};return e.replace(Jl,"").split(Kl).forEach(n=>{if(n){const s=n.split(Gl);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ui(e){let t="";if(Ne(e))t=e;else if(X(e))for(let n=0;n<e.length;n++){const s=Ui(e[n]);s&&(t+=s+" ")}else if(xe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Yl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zl=Oi(Yl);function Fa(e){return!!e||e===""}function Xl(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Xn(e[s],t[s]);return n}function Xn(e,t){if(e===t)return!0;let n=gr(e),s=gr(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=gt(e),s=gt(t),n||s)return e===t;if(n=X(e),s=X(t),n||s)return n&&s?Xl(e,t):!1;if(n=xe(e),s=xe(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Xn(e[a],t[a]))return!1}}return String(e)===String(t)}function Bi(e,t){return e.findIndex(n=>Xn(n,t))}const Oa=e=>!!(e&&e.__v_isRef===!0),ie=e=>Ne(e)?e:e==null?"":X(e)||xe(e)&&(e.toString===Ra||!ae(e.toString))?Oa(e)?ie(e.value):JSON.stringify(e,Na,2):String(e),Na=(e,t)=>Oa(t)?Na(e,t.value):dn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[ti(s,r)+" =>"]=i,n),{})}:kn(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ti(n))}:gt(t)?ti(t):xe(t)&&!X(t)&&!Da(t)?String(t):t,ti=(e,t="")=>{var n;return gt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ke;class za{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ke,!t&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ke;try{return Ke=this,t()}finally{Ke=n}}}on(){Ke=this}off(){Ke=this.parent}stop(t){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Ma(e){return new za(e)}function $a(){return Ke}function Ql(e,t=!1){Ke&&Ke.cleanups.push(e)}let Le;const ni=new WeakSet;class Ua{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ke&&Ke.active&&Ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ni.has(this)&&(ni.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Va(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,yr(this),Ha(this);const t=Le,n=pt;Le=this,pt=!0;try{return this.fn()}finally{ja(this),Le=t,pt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ji(t);this.deps=this.depsTail=void 0,yr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ni.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yi(this)&&this.run()}get dirty(){return yi(this)}}let Ba=0,En,Rn;function Va(e,t=!1){if(e.flags|=8,t){e.next=Rn,Rn=e;return}e.next=En,En=e}function Vi(){Ba++}function Hi(){if(--Ba>0)return;if(Rn){let t=Rn;for(Rn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;En;){let t=En;for(En=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Ha(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ja(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),ji(s),ec(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function yi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Mn))return;e.globalVersion=Mn;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!yi(e)){e.flags&=-3;return}const n=Le,s=pt;Le=e,pt=!0;try{Ha(e);const i=e.fn(e._value);(t.version===0||Vt(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Le=n,pt=s,ja(e),e.flags&=-3}}function ji(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)ji(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ec(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let pt=!0;const Ka=[];function Kt(){Ka.push(pt),pt=!1}function Gt(){const e=Ka.pop();pt=e===void 0?!0:e}function yr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Le;Le=void 0;try{t()}finally{Le=n}}}let Mn=0;class tc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Le||!pt||Le===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Le)n=this.activeLink=new tc(Le,this),Le.deps?(n.prevDep=Le.depsTail,Le.depsTail.nextDep=n,Le.depsTail=n):Le.deps=Le.depsTail=n,Ga(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Le.depsTail,n.nextDep=void 0,Le.depsTail.nextDep=n,Le.depsTail=n,Le.deps===n&&(Le.deps=s)}return n}trigger(t){this.version++,Mn++,this.notify(t)}notify(t){Vi();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Hi()}}}function Ga(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Ga(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ks=new WeakMap,Xt=Symbol(""),vi=Symbol(""),$n=Symbol("");function Ve(e,t,n){if(pt&&Le){let s=ks.get(e);s||ks.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Wi),i.map=s,i.key=n),i.track()}}function At(e,t,n,s,i,r){const a=ks.get(e);if(!a){Mn++;return}const o=l=>{l&&l.trigger()};if(Vi(),t==="clear")a.forEach(o);else{const l=X(e),u=l&&Mi(n);if(l&&n==="length"){const f=Number(s);a.forEach((d,h)=>{(h==="length"||h===$n||!gt(h)&&h>=f)&&o(d)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),u&&o(a.get($n)),t){case"add":l?u&&o(a.get("length")):(o(a.get(Xt)),dn(e)&&o(a.get(vi)));break;case"delete":l||(o(a.get(Xt)),dn(e)&&o(a.get(vi)));break;case"set":dn(e)&&o(a.get(Xt));break}}Hi()}function nc(e,t){const n=ks.get(e);return n&&n.get(t)}function rn(e){const t=de(e);return t===e?t:(Ve(t,"iterate",$n),ot(e)?t:t.map(He))}function Os(e){return Ve(e=de(e),"iterate",$n),e}const sc={__proto__:null,[Symbol.iterator](){return si(this,Symbol.iterator,He)},concat(...e){return rn(this).concat(...e.map(t=>X(t)?rn(t):t))},entries(){return si(this,"entries",e=>(e[1]=He(e[1]),e))},every(e,t){return xt(this,"every",e,t,void 0,arguments)},filter(e,t){return xt(this,"filter",e,t,n=>n.map(He),arguments)},find(e,t){return xt(this,"find",e,t,He,arguments)},findIndex(e,t){return xt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return xt(this,"findLast",e,t,He,arguments)},findLastIndex(e,t){return xt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return xt(this,"forEach",e,t,void 0,arguments)},includes(...e){return ii(this,"includes",e)},indexOf(...e){return ii(this,"indexOf",e)},join(e){return rn(this).join(e)},lastIndexOf(...e){return ii(this,"lastIndexOf",e)},map(e,t){return xt(this,"map",e,t,void 0,arguments)},pop(){return Cn(this,"pop")},push(...e){return Cn(this,"push",e)},reduce(e,...t){return vr(this,"reduce",e,t)},reduceRight(e,...t){return vr(this,"reduceRight",e,t)},shift(){return Cn(this,"shift")},some(e,t){return xt(this,"some",e,t,void 0,arguments)},splice(...e){return Cn(this,"splice",e)},toReversed(){return rn(this).toReversed()},toSorted(e){return rn(this).toSorted(e)},toSpliced(...e){return rn(this).toSpliced(...e)},unshift(...e){return Cn(this,"unshift",e)},values(){return si(this,"values",He)}};function si(e,t,n){const s=Os(e),i=s[t]();return s!==e&&!ot(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const ic=Array.prototype;function xt(e,t,n,s,i,r){const a=Os(e),o=a!==e&&!ot(e),l=a[t];if(l!==ic[t]){const d=l.apply(e,r);return o?He(d):d}let u=n;a!==e&&(o?u=function(d,h){return n.call(this,He(d),h,e)}:n.length>2&&(u=function(d,h){return n.call(this,d,h,e)}));const f=l.call(a,u,s);return o&&i?i(f):f}function vr(e,t,n,s){const i=Os(e);let r=n;return i!==e&&(ot(e)?n.length>3&&(r=function(a,o,l){return n.call(this,a,o,l,e)}):r=function(a,o,l){return n.call(this,a,He(o),l,e)}),i[t](r,...s)}function ii(e,t,n){const s=de(e);Ve(s,"iterate",$n);const i=s[t](...n);return(i===-1||i===!1)&&Ji(n[0])?(n[0]=de(n[0]),s[t](...n)):i}function Cn(e,t,n=[]){Kt(),Vi();const s=de(e)[t].apply(e,n);return Hi(),Gt(),s}const rc=Oi("__proto__,__v_isRef,__isVue"),Ja=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(gt));function ac(e){gt(e)||(e=String(e));const t=de(this);return Ve(t,"has",e),t.hasOwnProperty(e)}class qa{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?mc:Qa:r?Xa:Za).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=X(t);if(!i){let l;if(a&&(l=sc[n]))return l;if(n==="hasOwnProperty")return ac}const o=Reflect.get(t,n,Fe(t)?t:s);return(gt(n)?Ja.has(n):rc(n))||(i||Ve(t,"get",n),r)?o:Fe(o)?a&&Mi(n)?o:o.value:xe(o)?i?to(o):Qn(o):o}}class Ya extends qa{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=en(r);if(!ot(s)&&!en(s)&&(r=de(r),s=de(s)),!X(t)&&Fe(r)&&!Fe(s))return l?!1:(r.value=s,!0)}const a=X(t)&&Mi(n)?Number(n)<t.length:me(t,n),o=Reflect.set(t,n,s,Fe(t)?t:i);return t===de(i)&&(a?Vt(s,r)&&At(t,"set",n,s):At(t,"add",n,s)),o}deleteProperty(t,n){const s=me(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&At(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!gt(n)||!Ja.has(n))&&Ve(t,"has",n),s}ownKeys(t){return Ve(t,"iterate",X(t)?"length":Xt),Reflect.ownKeys(t)}}class oc extends qa{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const lc=new Ya,cc=new oc,uc=new Ya(!0);const bi=e=>e,ls=e=>Reflect.getPrototypeOf(e);function fc(e,t,n){return function(...s){const i=this.__v_raw,r=de(i),a=dn(r),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...s),f=n?bi:t?ki:He;return!t&&Ve(r,"iterate",l?vi:Xt),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:o?[f(d[0]),f(d[1])]:f(d),done:h}},[Symbol.iterator](){return this}}}}function cs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function dc(e,t){const n={get(i){const r=this.__v_raw,a=de(r),o=de(i);e||(Vt(i,o)&&Ve(a,"get",i),Ve(a,"get",o));const{has:l}=ls(a),u=t?bi:e?ki:He;if(l.call(a,i))return u(r.get(i));if(l.call(a,o))return u(r.get(o));r!==a&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Ve(de(i),"iterate",Xt),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,a=de(r),o=de(i);return e||(Vt(i,o)&&Ve(a,"has",i),Ve(a,"has",o)),i===o?r.has(i):r.has(i)||r.has(o)},forEach(i,r){const a=this,o=a.__v_raw,l=de(o),u=t?bi:e?ki:He;return!e&&Ve(l,"iterate",Xt),o.forEach((f,d)=>i.call(r,u(f),u(d),a))}};return Ue(n,e?{add:cs("add"),set:cs("set"),delete:cs("delete"),clear:cs("clear")}:{add(i){!t&&!ot(i)&&!en(i)&&(i=de(i));const r=de(this);return ls(r).has.call(r,i)||(r.add(i),At(r,"add",i,i)),this},set(i,r){!t&&!ot(r)&&!en(r)&&(r=de(r));const a=de(this),{has:o,get:l}=ls(a);let u=o.call(a,i);u||(i=de(i),u=o.call(a,i));const f=l.call(a,i);return a.set(i,r),u?Vt(r,f)&&At(a,"set",i,r):At(a,"add",i,r),this},delete(i){const r=de(this),{has:a,get:o}=ls(r);let l=a.call(r,i);l||(i=de(i),l=a.call(r,i)),o&&o.call(r,i);const u=r.delete(i);return l&&At(r,"delete",i,void 0),u},clear(){const i=de(this),r=i.size!==0,a=i.clear();return r&&At(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=fc(i,e,t)}),n}function Ki(e,t){const n=dc(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(me(n,i)&&i in s?n:s,i,r)}const hc={get:Ki(!1,!1)},pc={get:Ki(!1,!0)},gc={get:Ki(!0,!1)};const Za=new WeakMap,Xa=new WeakMap,Qa=new WeakMap,mc=new WeakMap;function yc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vc(e){return e.__v_skip||!Object.isExtensible(e)?0:yc(Hl(e))}function Qn(e){return en(e)?e:Gi(e,!1,lc,hc,Za)}function eo(e){return Gi(e,!1,uc,pc,Xa)}function to(e){return Gi(e,!0,cc,gc,Qa)}function Gi(e,t,n,s,i){if(!xe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=i.get(e);if(r)return r;const a=vc(e);if(a===0)return e;const o=new Proxy(e,a===2?s:n);return i.set(e,o),o}function Ht(e){return en(e)?Ht(e.__v_raw):!!(e&&e.__v_isReactive)}function en(e){return!!(e&&e.__v_isReadonly)}function ot(e){return!!(e&&e.__v_isShallow)}function Ji(e){return e?!!e.__v_raw:!1}function de(e){const t=e&&e.__v_raw;return t?de(t):e}function qi(e){return!me(e,"__v_skip")&&Object.isExtensible(e)&&Ia(e,"__v_skip",!0),e}const He=e=>xe(e)?Qn(e):e,ki=e=>xe(e)?to(e):e;function Fe(e){return e?e.__v_isRef===!0:!1}function De(e){return so(e,!1)}function no(e){return so(e,!0)}function so(e,t){return Fe(e)?e:new bc(e,t)}class bc{constructor(t,n){this.dep=new Wi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:de(t),this._value=n?t:He(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||ot(t)||en(t);t=s?t:de(t),Vt(t,n)&&(this._rawValue=t,this._value=s?t:He(t),this.dep.trigger())}}function he(e){return Fe(e)?e.value:e}const kc={get:(e,t,n)=>t==="__v_raw"?e:he(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Fe(i)&&!Fe(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function io(e){return Ht(e)?e:new Proxy(e,kc)}function wc(e){const t=X(e)?new Array(e.length):{};for(const n in e)t[n]=Sc(e,n);return t}class _c{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return nc(de(this._object),this._key)}}function Sc(e,t,n){const s=e[t];return Fe(s)?s:new _c(e,t,n)}class Cc{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Wi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return Va(this,!0),!0}get value(){const t=this.dep.track();return Wa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Lc(e,t,n=!1){let s,i;return ae(e)?s=e:(s=e.get,i=e.set),new Cc(s,i,n)}const us={},ws=new WeakMap;let Yt;function xc(e,t=!1,n=Yt){if(n){let s=ws.get(n);s||ws.set(n,s=[]),s.push(e)}}function Pc(e,t,n=_e){const{immediate:s,deep:i,once:r,scheduler:a,augmentJob:o,call:l}=n,u=w=>i?w:ot(w)||i===!1||i===0?Et(w,1):Et(w);let f,d,h,p,v=!1,b=!1;if(Fe(e)?(d=()=>e.value,v=ot(e)):Ht(e)?(d=()=>u(e),v=!0):X(e)?(b=!0,v=e.some(w=>Ht(w)||ot(w)),d=()=>e.map(w=>{if(Fe(w))return w.value;if(Ht(w))return u(w);if(ae(w))return l?l(w,2):w()})):ae(e)?t?d=l?()=>l(e,2):e:d=()=>{if(h){Kt();try{h()}finally{Gt()}}const w=Yt;Yt=f;try{return l?l(e,3,[p]):e(p)}finally{Yt=w}}:d=St,t&&i){const w=d,N=i===!0?1/0:i;d=()=>Et(w(),N)}const L=$a(),S=()=>{f.stop(),L&&zi(L.effects,f)};if(r&&t){const w=t;t=(...N)=>{w(...N),S()}}let C=b?new Array(e.length).fill(us):us;const x=w=>{if(!(!(f.flags&1)||!f.dirty&&!w))if(t){const N=f.run();if(i||v||(b?N.some((W,F)=>Vt(W,C[F])):Vt(N,C))){h&&h();const W=Yt;Yt=f;try{const F=[N,C===us?void 0:b&&C[0]===us?[]:C,p];l?l(t,3,F):t(...F),C=N}finally{Yt=W}}}else f.run()};return o&&o(x),f=new Ua(d),f.scheduler=a?()=>a(x,!1):x,p=w=>xc(w,!1,f),h=f.onStop=()=>{const w=ws.get(f);if(w){if(l)l(w,4);else for(const N of w)N();ws.delete(f)}},t?s?x(!0):C=f.run():a?a(x.bind(null,!0),!0):f.run(),S.pause=f.pause.bind(f),S.resume=f.resume.bind(f),S.stop=S,S}function Et(e,t=1/0,n){if(t<=0||!xe(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Fe(e))Et(e.value,t,n);else if(X(e))for(let s=0;s<e.length;s++)Et(e[s],t,n);else if(kn(e)||dn(e))e.forEach(s=>{Et(s,t,n)});else if(Da(e)){for(const s in e)Et(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Et(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function es(e,t,n,s){try{return s?e(...s):e()}catch(i){Ns(i,t,n)}}function Ct(e,t,n,s){if(ae(e)){const i=es(e,t,n,s);return i&&Ea(i)&&i.catch(r=>{Ns(r,t,n)}),i}if(X(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Ct(e[r],t,n,s));return i}}function Ns(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||_e;if(t){let o=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const f=o.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,l,u)===!1)return}o=o.parent}if(r){Kt(),es(r,null,10,[e,l,u]),Gt();return}}Tc(e,n,i,s,a)}function Tc(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Ge=[];let kt=-1;const hn=[];let Mt=null,cn=0;const ro=Promise.resolve();let _s=null;function ts(e){const t=_s||ro;return e?t.then(this?e.bind(this):e):t}function Ac(e){let t=kt+1,n=Ge.length;for(;t<n;){const s=t+n>>>1,i=Ge[s],r=Un(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function Yi(e){if(!(e.flags&1)){const t=Un(e),n=Ge[Ge.length-1];!n||!(e.flags&2)&&t>=Un(n)?Ge.push(e):Ge.splice(Ac(t),0,e),e.flags|=1,ao()}}function ao(){_s||(_s=ro.then(lo))}function Ec(e){X(e)?hn.push(...e):Mt&&e.id===-1?Mt.splice(cn+1,0,e):e.flags&1||(hn.push(e),e.flags|=1),ao()}function br(e,t,n=kt+1){for(;n<Ge.length;n++){const s=Ge[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Ge.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function oo(e){if(hn.length){const t=[...new Set(hn)].sort((n,s)=>Un(n)-Un(s));if(hn.length=0,Mt){Mt.push(...t);return}for(Mt=t,cn=0;cn<Mt.length;cn++){const n=Mt[cn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Mt=null,cn=0}}const Un=e=>e.id==null?e.flags&2?-1:1/0:e.id;function lo(e){try{for(kt=0;kt<Ge.length;kt++){const t=Ge[kt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),es(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;kt<Ge.length;kt++){const t=Ge[kt];t&&(t.flags&=-2)}kt=-1,Ge.length=0,oo(),_s=null,(Ge.length||hn.length)&&lo()}}let ze=null,co=null;function Ss(e){const t=ze;return ze=e,co=e&&e.type.__scopeId||null,t}function ut(e,t=ze,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Tr(-1);const r=Ss(t);let a;try{a=e(...i)}finally{Ss(r),s._d&&Tr(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function ht(e,t){if(ze===null)return e;const n=Bs(ze),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,a,o,l=_e]=t[i];r&&(ae(r)&&(r={mounted:r,updated:r}),r.deep&&Et(a),s.push({dir:r,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function Jt(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];r&&(o.oldValue=r[a].value);let l=o.dir[s];l&&(Kt(),Ct(l,n,8,[e.el,o,e,t]),Gt())}}const Rc=Symbol("_vte"),Dc=e=>e.__isTeleport;function Zi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Zi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Oe(e,t){return ae(e)?Ue({name:e.name},t,{setup:e}):e}function uo(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function wn(e){const t=sr(),n=no(null);if(t){const i=t.refs===_e?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>n.value,set:r=>n.value=r})}return n}function wi(e,t,n,s,i=!1){if(X(e)){e.forEach((v,b)=>wi(v,t&&(X(t)?t[b]:t),n,s,i));return}if(pn(s)&&!i)return;const r=s.shapeFlag&4?Bs(s.component):s.el,a=i?null:r,{i:o,r:l}=e,u=t&&t.r,f=o.refs===_e?o.refs={}:o.refs,d=o.setupState,h=de(d),p=d===_e?()=>!1:v=>me(h,v);if(u!=null&&u!==l&&(Ne(u)?(f[u]=null,p(u)&&(d[u]=null)):Fe(u)&&(u.value=null)),ae(l))es(l,o,12,[a,f]);else{const v=Ne(l),b=Fe(l);if(v||b){const L=()=>{if(e.f){const S=v?p(l)?d[l]:f[l]:l.value;i?X(S)&&zi(S,r):X(S)?S.includes(r)||S.push(r):v?(f[l]=[r],p(l)&&(d[l]=f[l])):(l.value=[r],e.k&&(f[e.k]=l.value))}else v?(f[l]=a,p(l)&&(d[l]=a)):b&&(l.value=a,e.k&&(f[e.k]=a))};a?(L.id=-1,nt(L,n)):L()}}}Fs().requestIdleCallback;Fs().cancelIdleCallback;const pn=e=>!!e.type.__asyncLoader,fo=e=>e.type.__isKeepAlive;function Ic(e,t){ho(e,"a",t)}function Fc(e,t){ho(e,"da",t)}function ho(e,t,n=$e){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(zs(t,s,n),n){let i=n.parent;for(;i&&i.parent;)fo(i.parent.vnode)&&Oc(s,t,n,i),i=i.parent}}function Oc(e,t,n,s){const i=zs(t,e,s,!0);Xi(()=>{zi(s[t],i)},n)}function zs(e,t,n=$e,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Kt();const o=is(n),l=Ct(t,n,e,a);return o(),Gt(),l});return s?i.unshift(r):i.push(r),r}}const Ft=e=>(t,n=$e)=>{(!Hn||e==="sp")&&zs(e,(...s)=>t(...s),n)},tn=Ft("bm"),Ms=Ft("m"),Nc=Ft("bu"),zc=Ft("u"),po=Ft("bum"),Xi=Ft("um"),Mc=Ft("sp"),$c=Ft("rtg"),Uc=Ft("rtc");function Bc(e,t=$e){zs("ec",e,t)}const Vc="components";function ns(e,t){return jc(Vc,e,!0,t)||e}const Hc=Symbol.for("v-ndc");function jc(e,t,n=!0,s=!1){const i=ze||$e;if(i){const r=i.type;{const o=Du(r,!1);if(o&&(o===t||o===ct(t)||o===Is(ct(t))))return r}const a=kr(i[e]||r[e],t)||kr(i.appContext[e],t);return!a&&s?r:a}}function kr(e,t){return e&&(e[t]||e[ct(t)]||e[Is(ct(t))])}function ss(e,t,n,s){let i;const r=n,a=X(e);if(a||Ne(e)){const o=a&&Ht(e);let l=!1;o&&(l=!ot(e),e=Os(e)),i=new Array(e.length);for(let u=0,f=e.length;u<f;u++)i[u]=t(l?He(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,r)}else if(xe(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,r));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const f=o[l];i[l]=t(e[f],f,l,r)}}else i=[];return i}function Wc(e,t,n={},s,i){if(ze.ce||ze.parent&&pn(ze.parent)&&ze.parent.ce)return Z(),je(Me,null,[ye("slot",n,s)],64);let r=e[t];r&&r._c&&(r._d=!1),Z();const a=r&&go(r(n)),o=n.key||a&&a.key,l=je(Me,{key:(o&&!gt(o)?o:`_${t}`)+(!a&&s?"_fb":"")},a||[],a&&e._===1?64:-2);return r&&r._c&&(r._d=!0),l}function go(e){return e.some(t=>Vn(t)?!(t.type===jt||t.type===Me&&!go(t.children)):!0)?e:null}const _i=e=>e?Oo(e)?Bs(e):_i(e.parent):null,Dn=Ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_i(e.parent),$root:e=>_i(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Qi(e),$forceUpdate:e=>e.f||(e.f=()=>{Yi(e.update)}),$nextTick:e=>e.n||(e.n=ts.bind(e.proxy)),$watch:e=>pu.bind(e)}),ri=(e,t)=>e!==_e&&!e.__isScriptSetup&&me(e,t),Kc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:a,type:o,appContext:l}=e;let u;if(t[0]!=="$"){const p=a[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(ri(s,t))return a[t]=1,s[t];if(i!==_e&&me(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&me(u,t))return a[t]=3,r[t];if(n!==_e&&me(n,t))return a[t]=4,n[t];Si&&(a[t]=0)}}const f=Dn[t];let d,h;if(f)return t==="$attrs"&&Ve(e.attrs,"get",""),f(e);if((d=o.__cssModules)&&(d=d[t]))return d;if(n!==_e&&me(n,t))return a[t]=4,n[t];if(h=l.config.globalProperties,me(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return ri(i,t)?(i[t]=n,!0):s!==_e&&me(s,t)?(s[t]=n,!0):me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},a){let o;return!!n[a]||e!==_e&&me(e,a)||ri(t,a)||(o=r[0])&&me(o,a)||me(s,a)||me(Dn,a)||me(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:me(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function wr(e){return X(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Si=!0;function Gc(e){const t=Qi(e),n=e.proxy,s=e.ctx;Si=!1,t.beforeCreate&&_r(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:a,watch:o,provide:l,inject:u,created:f,beforeMount:d,mounted:h,beforeUpdate:p,updated:v,activated:b,deactivated:L,beforeDestroy:S,beforeUnmount:C,destroyed:x,unmounted:w,render:N,renderTracked:W,renderTriggered:F,errorCaptured:R,serverPrefetch:$,expose:K,inheritAttrs:re,components:Q,directives:le,filters:fe}=t;if(u&&Jc(u,s,null),a)for(const q in a){const Y=a[q];ae(Y)&&(s[q]=Y.bind(n))}if(i){const q=i.call(n,n);xe(q)&&(e.data=Qn(q))}if(Si=!0,r)for(const q in r){const Y=r[q],Ie=ae(Y)?Y.bind(n,n):ae(Y.get)?Y.get.bind(n,n):St,Ee=!ae(Y)&&ae(Y.set)?Y.set.bind(n):St,Re=Pe({get:Ie,set:Ee});Object.defineProperty(s,q,{enumerable:!0,configurable:!0,get:()=>Re.value,set:Je=>Re.value=Je})}if(o)for(const q in o)mo(o[q],s,n,q);if(l){const q=ae(l)?l.call(n):l;Reflect.ownKeys(q).forEach(Y=>{hs(Y,q[Y])})}f&&_r(f,e,"c");function oe(q,Y){X(Y)?Y.forEach(Ie=>q(Ie.bind(n))):Y&&q(Y.bind(n))}if(oe(tn,d),oe(Ms,h),oe(Nc,p),oe(zc,v),oe(Ic,b),oe(Fc,L),oe(Bc,R),oe(Uc,W),oe($c,F),oe(po,C),oe(Xi,w),oe(Mc,$),X(K))if(K.length){const q=e.exposed||(e.exposed={});K.forEach(Y=>{Object.defineProperty(q,Y,{get:()=>n[Y],set:Ie=>n[Y]=Ie})})}else e.exposed||(e.exposed={});N&&e.render===St&&(e.render=N),re!=null&&(e.inheritAttrs=re),Q&&(e.components=Q),le&&(e.directives=le),$&&uo(e)}function Jc(e,t,n=St){X(e)&&(e=Ci(e));for(const s in e){const i=e[s];let r;xe(i)?"default"in i?r=lt(i.from||s,i.default,!0):r=lt(i.from||s):r=lt(i),Fe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[s]=r}}function _r(e,t,n){Ct(X(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function mo(e,t,n,s){let i=s.includes(".")?Ao(n,s):()=>n[s];if(Ne(e)){const r=t[e];ae(r)&&Rt(i,r)}else if(ae(e))Rt(i,e.bind(n));else if(xe(e))if(X(e))e.forEach(r=>mo(r,t,n,s));else{const r=ae(e.handler)?e.handler.bind(n):t[e.handler];ae(r)&&Rt(i,r,e)}}function Qi(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,o=r.get(t);let l;return o?l=o:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(u=>Cs(l,u,a,!0)),Cs(l,t,a)),xe(t)&&r.set(t,l),l}function Cs(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Cs(e,r,n,!0),i&&i.forEach(a=>Cs(e,a,n,!0));for(const a in t)if(!(s&&a==="expose")){const o=qc[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const qc={data:Sr,props:Cr,emits:Cr,methods:Tn,computed:Tn,beforeCreate:We,created:We,beforeMount:We,mounted:We,beforeUpdate:We,updated:We,beforeDestroy:We,beforeUnmount:We,destroyed:We,unmounted:We,activated:We,deactivated:We,errorCaptured:We,serverPrefetch:We,components:Tn,directives:Tn,watch:Zc,provide:Sr,inject:Yc};function Sr(e,t){return t?e?function(){return Ue(ae(e)?e.call(this,this):e,ae(t)?t.call(this,this):t)}:t:e}function Yc(e,t){return Tn(Ci(e),Ci(t))}function Ci(e){if(X(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function We(e,t){return e?[...new Set([].concat(e,t))]:t}function Tn(e,t){return e?Ue(Object.create(null),e,t):t}function Cr(e,t){return e?X(e)&&X(t)?[...new Set([...e,...t])]:Ue(Object.create(null),wr(e),wr(t??{})):t}function Zc(e,t){if(!e)return t;if(!t)return e;const n=Ue(Object.create(null),e);for(const s in t)n[s]=We(e[s],t[s]);return n}function yo(){return{app:null,config:{isNativeTag:Bl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xc=0;function Qc(e,t){return function(s,i=null){ae(s)||(s=Ue({},s)),i!=null&&!xe(i)&&(i=null);const r=yo(),a=new WeakSet,o=[];let l=!1;const u=r.app={_uid:Xc++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:Fu,get config(){return r.config},set config(f){},use(f,...d){return a.has(f)||(f&&ae(f.install)?(a.add(f),f.install(u,...d)):ae(f)&&(a.add(f),f(u,...d))),u},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),u},component(f,d){return d?(r.components[f]=d,u):r.components[f]},directive(f,d){return d?(r.directives[f]=d,u):r.directives[f]},mount(f,d,h){if(!l){const p=u._ceVNode||ye(s,i);return p.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),d&&t?t(p,f):e(p,f,h),l=!0,u._container=f,f.__vue_app__=u,Bs(p.component)}},onUnmount(f){o.push(f)},unmount(){l&&(Ct(o,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,d){return r.provides[f]=d,u},runWithContext(f){const d=Qt;Qt=u;try{return f()}finally{Qt=d}}};return u}}let Qt=null;function hs(e,t){if($e){let n=$e.provides;const s=$e.parent&&$e.parent.provides;s===n&&(n=$e.provides=Object.create(s)),n[e]=t}}function lt(e,t,n=!1){const s=$e||ze;if(s||Qt){const i=Qt?Qt._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ae(t)?t.call(s&&s.proxy):t}}function eu(){return!!($e||ze||Qt)}const vo={},bo=()=>Object.create(vo),ko=e=>Object.getPrototypeOf(e)===vo;function tu(e,t,n,s=!1){const i={},r=bo();e.propsDefaults=Object.create(null),wo(e,t,i,r);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=s?i:eo(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function nu(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:a}}=e,o=de(i),[l]=e.propsOptions;let u=!1;if((s||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let h=f[d];if($s(e.emitsOptions,h))continue;const p=t[h];if(l)if(me(r,h))p!==r[h]&&(r[h]=p,u=!0);else{const v=ct(h);i[v]=Li(l,o,v,p,e,!1)}else p!==r[h]&&(r[h]=p,u=!0)}}}else{wo(e,t,i,r)&&(u=!0);let f;for(const d in o)(!t||!me(t,d)&&((f=Wt(d))===d||!me(t,f)))&&(l?n&&(n[d]!==void 0||n[f]!==void 0)&&(i[d]=Li(l,o,d,void 0,e,!0)):delete i[d]);if(r!==o)for(const d in r)(!t||!me(t,d))&&(delete r[d],u=!0)}u&&At(e.attrs,"set","")}function wo(e,t,n,s){const[i,r]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(An(l))continue;const u=t[l];let f;i&&me(i,f=ct(l))?!r||!r.includes(f)?n[f]=u:(o||(o={}))[f]=u:$s(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,a=!0)}if(r){const l=de(n),u=o||_e;for(let f=0;f<r.length;f++){const d=r[f];n[d]=Li(i,l,d,u[d],e,!me(u,d))}}return a}function Li(e,t,n,s,i,r){const a=e[n];if(a!=null){const o=me(a,"default");if(o&&s===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ae(l)){const{propsDefaults:u}=i;if(n in u)s=u[n];else{const f=is(i);s=u[n]=l.call(null,t),f()}}else s=l;i.ce&&i.ce._setProp(n,s)}a[0]&&(r&&!o?s=!1:a[1]&&(s===""||s===Wt(n))&&(s=!0))}return s}const su=new WeakMap;function _o(e,t,n=!1){const s=n?su:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,a={},o=[];let l=!1;if(!ae(e)){const f=d=>{l=!0;const[h,p]=_o(d,t,!0);Ue(a,h),p&&o.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!l)return xe(e)&&s.set(e,fn),fn;if(X(r))for(let f=0;f<r.length;f++){const d=ct(r[f]);Lr(d)&&(a[d]=_e)}else if(r)for(const f in r){const d=ct(f);if(Lr(d)){const h=r[f],p=a[d]=X(h)||ae(h)?{type:h}:Ue({},h),v=p.type;let b=!1,L=!0;if(X(v))for(let S=0;S<v.length;++S){const C=v[S],x=ae(C)&&C.name;if(x==="Boolean"){b=!0;break}else x==="String"&&(L=!1)}else b=ae(v)&&v.name==="Boolean";p[0]=b,p[1]=L,(b||me(p,"default"))&&o.push(d)}}const u=[a,o];return xe(e)&&s.set(e,u),u}function Lr(e){return e[0]!=="$"&&!An(e)}const So=e=>e[0]==="_"||e==="$stable",er=e=>X(e)?e.map(wt):[wt(e)],iu=(e,t,n)=>{if(t._n)return t;const s=ut((...i)=>er(t(...i)),n);return s._c=!1,s},Co=(e,t,n)=>{const s=e._ctx;for(const i in e){if(So(i))continue;const r=e[i];if(ae(r))t[i]=iu(i,r,s);else if(r!=null){const a=er(r);t[i]=()=>a}}},Lo=(e,t)=>{const n=er(t);e.slots.default=()=>n},xo=(e,t,n)=>{for(const s in t)(n||s!=="_")&&(e[s]=t[s])},ru=(e,t,n)=>{const s=e.slots=bo();if(e.vnode.shapeFlag&32){const i=t._;i?(xo(s,t,n),n&&Ia(s,"_",i,!0)):Co(t,s)}else t&&Lo(e,t)},au=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,a=_e;if(s.shapeFlag&32){const o=t._;o?n&&o===1?r=!1:xo(i,t,n):(r=!t.$stable,Co(t,i)),a=t}else t&&(Lo(e,t),a={default:1});if(r)for(const o in i)!So(o)&&a[o]==null&&delete i[o]},nt=wu;function ou(e){return lu(e)}function lu(e,t){const n=Fs();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:a,createText:o,createComment:l,setText:u,setElementText:f,parentNode:d,nextSibling:h,setScopeId:p=St,insertStaticContent:v}=e,b=(m,y,k,E=null,P=null,D=null,U=void 0,M=null,z=!!y.dynamicChildren)=>{if(m===y)return;m&&!Ln(m,y)&&(E=T(m),Je(m,P,D,!0),m=null),y.patchFlag===-2&&(z=!1,y.dynamicChildren=null);const{type:I,ref:ee,shapeFlag:H}=y;switch(I){case Us:L(m,y,k,E);break;case jt:S(m,y,k,E);break;case ps:m==null&&C(y,k,E,U);break;case Me:Q(m,y,k,E,P,D,U,M,z);break;default:H&1?N(m,y,k,E,P,D,U,M,z):H&6?le(m,y,k,E,P,D,U,M,z):(H&64||H&128)&&I.process(m,y,k,E,P,D,U,M,z,G)}ee!=null&&P&&wi(ee,m&&m.ref,D,y||m,!y)},L=(m,y,k,E)=>{if(m==null)s(y.el=o(y.children),k,E);else{const P=y.el=m.el;y.children!==m.children&&u(P,y.children)}},S=(m,y,k,E)=>{m==null?s(y.el=l(y.children||""),k,E):y.el=m.el},C=(m,y,k,E)=>{[m.el,m.anchor]=v(m.children,y,k,E,m.el,m.anchor)},x=({el:m,anchor:y},k,E)=>{let P;for(;m&&m!==y;)P=h(m),s(m,k,E),m=P;s(y,k,E)},w=({el:m,anchor:y})=>{let k;for(;m&&m!==y;)k=h(m),i(m),m=k;i(y)},N=(m,y,k,E,P,D,U,M,z)=>{y.type==="svg"?U="svg":y.type==="math"&&(U="mathml"),m==null?W(y,k,E,P,D,U,M,z):$(m,y,P,D,U,M,z)},W=(m,y,k,E,P,D,U,M)=>{let z,I;const{props:ee,shapeFlag:H,transition:J,dirs:ne}=m;if(z=m.el=a(m.type,D,ee&&ee.is,ee),H&8?f(z,m.children):H&16&&R(m.children,z,null,E,P,ai(m,D),U,M),ne&&Jt(m,null,E,"created"),F(z,m,m.scopeId,U,E),ee){for(const Ce in ee)Ce!=="value"&&!An(Ce)&&r(z,Ce,null,ee[Ce],D,E);"value"in ee&&r(z,"value",null,ee.value,D),(I=ee.onVnodeBeforeMount)&&bt(I,E,m)}ne&&Jt(m,null,E,"beforeMount");const ue=cu(P,J);ue&&J.beforeEnter(z),s(z,y,k),((I=ee&&ee.onVnodeMounted)||ue||ne)&&nt(()=>{I&&bt(I,E,m),ue&&J.enter(z),ne&&Jt(m,null,E,"mounted")},P)},F=(m,y,k,E,P)=>{if(k&&p(m,k),E)for(let D=0;D<E.length;D++)p(m,E[D]);if(P){let D=P.subTree;if(y===D||Ro(D.type)&&(D.ssContent===y||D.ssFallback===y)){const U=P.vnode;F(m,U,U.scopeId,U.slotScopeIds,P.parent)}}},R=(m,y,k,E,P,D,U,M,z=0)=>{for(let I=z;I<m.length;I++){const ee=m[I]=M?$t(m[I]):wt(m[I]);b(null,ee,y,k,E,P,D,U,M)}},$=(m,y,k,E,P,D,U)=>{const M=y.el=m.el;let{patchFlag:z,dynamicChildren:I,dirs:ee}=y;z|=m.patchFlag&16;const H=m.props||_e,J=y.props||_e;let ne;if(k&&qt(k,!1),(ne=J.onVnodeBeforeUpdate)&&bt(ne,k,y,m),ee&&Jt(y,m,k,"beforeUpdate"),k&&qt(k,!0),(H.innerHTML&&J.innerHTML==null||H.textContent&&J.textContent==null)&&f(M,""),I?K(m.dynamicChildren,I,M,k,E,ai(y,P),D):U||Y(m,y,M,null,k,E,ai(y,P),D,!1),z>0){if(z&16)re(M,H,J,k,P);else if(z&2&&H.class!==J.class&&r(M,"class",null,J.class,P),z&4&&r(M,"style",H.style,J.style,P),z&8){const ue=y.dynamicProps;for(let Ce=0;Ce<ue.length;Ce++){const be=ue[Ce],Qe=H[be],Be=J[be];(Be!==Qe||be==="value")&&r(M,be,Qe,Be,P,k)}}z&1&&m.children!==y.children&&f(M,y.children)}else!U&&I==null&&re(M,H,J,k,P);((ne=J.onVnodeUpdated)||ee)&&nt(()=>{ne&&bt(ne,k,y,m),ee&&Jt(y,m,k,"updated")},E)},K=(m,y,k,E,P,D,U)=>{for(let M=0;M<y.length;M++){const z=m[M],I=y[M],ee=z.el&&(z.type===Me||!Ln(z,I)||z.shapeFlag&70)?d(z.el):k;b(z,I,ee,null,E,P,D,U,!0)}},re=(m,y,k,E,P)=>{if(y!==k){if(y!==_e)for(const D in y)!An(D)&&!(D in k)&&r(m,D,y[D],null,P,E);for(const D in k){if(An(D))continue;const U=k[D],M=y[D];U!==M&&D!=="value"&&r(m,D,M,U,P,E)}"value"in k&&r(m,"value",y.value,k.value,P)}},Q=(m,y,k,E,P,D,U,M,z)=>{const I=y.el=m?m.el:o(""),ee=y.anchor=m?m.anchor:o("");let{patchFlag:H,dynamicChildren:J,slotScopeIds:ne}=y;ne&&(M=M?M.concat(ne):ne),m==null?(s(I,k,E),s(ee,k,E),R(y.children||[],k,ee,P,D,U,M,z)):H>0&&H&64&&J&&m.dynamicChildren?(K(m.dynamicChildren,J,k,P,D,U,M),(y.key!=null||P&&y===P.subTree)&&Po(m,y,!0)):Y(m,y,k,ee,P,D,U,M,z)},le=(m,y,k,E,P,D,U,M,z)=>{y.slotScopeIds=M,m==null?y.shapeFlag&512?P.ctx.activate(y,k,E,U,z):fe(y,k,E,P,D,U,z):Se(m,y,z)},fe=(m,y,k,E,P,D,U)=>{const M=m.component=Pu(m,E,P);if(fo(m)&&(M.ctx.renderer=G),Tu(M,!1,U),M.asyncDep){if(P&&P.registerDep(M,oe,U),!m.el){const z=M.subTree=ye(jt);S(null,z,y,k)}}else oe(M,m,y,k,P,D,U)},Se=(m,y,k)=>{const E=y.component=m.component;if(bu(m,y,k))if(E.asyncDep&&!E.asyncResolved){q(E,y,k);return}else E.next=y,E.update();else y.el=m.el,E.vnode=y},oe=(m,y,k,E,P,D,U)=>{const M=()=>{if(m.isMounted){let{next:H,bu:J,u:ne,parent:ue,vnode:Ce}=m;{const et=To(m);if(et){H&&(H.el=Ce.el,q(m,H,U)),et.asyncDep.then(()=>{m.isUnmounted||M()});return}}let be=H,Qe;qt(m,!1),H?(H.el=Ce.el,q(m,H,U)):H=Ce,J&&ds(J),(Qe=H.props&&H.props.onVnodeBeforeUpdate)&&bt(Qe,ue,H,Ce),qt(m,!0);const Be=oi(m),ft=m.subTree;m.subTree=Be,b(ft,Be,d(ft.el),T(ft),m,P,D),H.el=Be.el,be===null&&ku(m,Be.el),ne&&nt(ne,P),(Qe=H.props&&H.props.onVnodeUpdated)&&nt(()=>bt(Qe,ue,H,Ce),P)}else{let H;const{el:J,props:ne}=y,{bm:ue,m:Ce,parent:be,root:Qe,type:Be}=m,ft=pn(y);if(qt(m,!1),ue&&ds(ue),!ft&&(H=ne&&ne.onVnodeBeforeMount)&&bt(H,be,y),qt(m,!0),J&&Ae){const et=()=>{m.subTree=oi(m),Ae(J,m.subTree,m,P,null)};ft&&Be.__asyncHydrate?Be.__asyncHydrate(J,m,et):et()}else{Qe.ce&&Qe.ce._injectChildStyle(Be);const et=m.subTree=oi(m);b(null,et,k,E,m,P,D),y.el=et.el}if(Ce&&nt(Ce,P),!ft&&(H=ne&&ne.onVnodeMounted)){const et=y;nt(()=>bt(H,be,et),P)}(y.shapeFlag&256||be&&pn(be.vnode)&&be.vnode.shapeFlag&256)&&m.a&&nt(m.a,P),m.isMounted=!0,y=k=E=null}};m.scope.on();const z=m.effect=new Ua(M);m.scope.off();const I=m.update=z.run.bind(z),ee=m.job=z.runIfDirty.bind(z);ee.i=m,ee.id=m.uid,z.scheduler=()=>Yi(ee),qt(m,!0),I()},q=(m,y,k)=>{y.component=m;const E=m.vnode.props;m.vnode=y,m.next=null,nu(m,y.props,E,k),au(m,y.children,k),Kt(),br(m),Gt()},Y=(m,y,k,E,P,D,U,M,z=!1)=>{const I=m&&m.children,ee=m?m.shapeFlag:0,H=y.children,{patchFlag:J,shapeFlag:ne}=y;if(J>0){if(J&128){Ee(I,H,k,E,P,D,U,M,z);return}else if(J&256){Ie(I,H,k,E,P,D,U,M,z);return}}ne&8?(ee&16&&rt(I,P,D),H!==I&&f(k,H)):ee&16?ne&16?Ee(I,H,k,E,P,D,U,M,z):rt(I,P,D,!0):(ee&8&&f(k,""),ne&16&&R(H,k,E,P,D,U,M,z))},Ie=(m,y,k,E,P,D,U,M,z)=>{m=m||fn,y=y||fn;const I=m.length,ee=y.length,H=Math.min(I,ee);let J;for(J=0;J<H;J++){const ne=y[J]=z?$t(y[J]):wt(y[J]);b(m[J],ne,k,null,P,D,U,M,z)}I>ee?rt(m,P,D,!0,!1,H):R(y,k,E,P,D,U,M,z,H)},Ee=(m,y,k,E,P,D,U,M,z)=>{let I=0;const ee=y.length;let H=m.length-1,J=ee-1;for(;I<=H&&I<=J;){const ne=m[I],ue=y[I]=z?$t(y[I]):wt(y[I]);if(Ln(ne,ue))b(ne,ue,k,null,P,D,U,M,z);else break;I++}for(;I<=H&&I<=J;){const ne=m[H],ue=y[J]=z?$t(y[J]):wt(y[J]);if(Ln(ne,ue))b(ne,ue,k,null,P,D,U,M,z);else break;H--,J--}if(I>H){if(I<=J){const ne=J+1,ue=ne<ee?y[ne].el:E;for(;I<=J;)b(null,y[I]=z?$t(y[I]):wt(y[I]),k,ue,P,D,U,M,z),I++}}else if(I>J)for(;I<=H;)Je(m[I],P,D,!0),I++;else{const ne=I,ue=I,Ce=new Map;for(I=ue;I<=J;I++){const tt=y[I]=z?$t(y[I]):wt(y[I]);tt.key!=null&&Ce.set(tt.key,I)}let be,Qe=0;const Be=J-ue+1;let ft=!1,et=0;const Sn=new Array(Be);for(I=0;I<Be;I++)Sn[I]=0;for(I=ne;I<=H;I++){const tt=m[I];if(Qe>=Be){Je(tt,P,D,!0);continue}let vt;if(tt.key!=null)vt=Ce.get(tt.key);else for(be=ue;be<=J;be++)if(Sn[be-ue]===0&&Ln(tt,y[be])){vt=be;break}vt===void 0?Je(tt,P,D,!0):(Sn[vt-ue]=I+1,vt>=et?et=vt:ft=!0,b(tt,y[vt],k,null,P,D,U,M,z),Qe++)}const hr=ft?uu(Sn):fn;for(be=hr.length-1,I=Be-1;I>=0;I--){const tt=ue+I,vt=y[tt],pr=tt+1<ee?y[tt+1].el:E;Sn[I]===0?b(null,vt,k,pr,P,D,U,M,z):ft&&(be<0||I!==hr[be]?Re(vt,k,pr,2):be--)}}},Re=(m,y,k,E,P=null)=>{const{el:D,type:U,transition:M,children:z,shapeFlag:I}=m;if(I&6){Re(m.component.subTree,y,k,E);return}if(I&128){m.suspense.move(y,k,E);return}if(I&64){U.move(m,y,k,G);return}if(U===Me){s(D,y,k);for(let H=0;H<z.length;H++)Re(z[H],y,k,E);s(m.anchor,y,k);return}if(U===ps){x(m,y,k);return}if(E!==2&&I&1&&M)if(E===0)M.beforeEnter(D),s(D,y,k),nt(()=>M.enter(D),P);else{const{leave:H,delayLeave:J,afterLeave:ne}=M,ue=()=>s(D,y,k),Ce=()=>{H(D,()=>{ue(),ne&&ne()})};J?J(D,ue,Ce):Ce()}else s(D,y,k)},Je=(m,y,k,E=!1,P=!1)=>{const{type:D,props:U,ref:M,children:z,dynamicChildren:I,shapeFlag:ee,patchFlag:H,dirs:J,cacheIndex:ne}=m;if(H===-2&&(P=!1),M!=null&&wi(M,null,k,m,!0),ne!=null&&(y.renderCache[ne]=void 0),ee&256){y.ctx.deactivate(m);return}const ue=ee&1&&J,Ce=!pn(m);let be;if(Ce&&(be=U&&U.onVnodeBeforeUnmount)&&bt(be,y,m),ee&6)os(m.component,k,E);else{if(ee&128){m.suspense.unmount(k,E);return}ue&&Jt(m,null,y,"beforeUnmount"),ee&64?m.type.remove(m,y,k,G,E):I&&!I.hasOnce&&(D!==Me||H>0&&H&64)?rt(I,y,k,!1,!0):(D===Me&&H&384||!P&&ee&16)&&rt(z,y,k),E&&nn(m)}(Ce&&(be=U&&U.onVnodeUnmounted)||ue)&&nt(()=>{be&&bt(be,y,m),ue&&Jt(m,null,y,"unmounted")},k)},nn=m=>{const{type:y,el:k,anchor:E,transition:P}=m;if(y===Me){sn(k,E);return}if(y===ps){w(m);return}const D=()=>{i(k),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(m.shapeFlag&1&&P&&!P.persisted){const{leave:U,delayLeave:M}=P,z=()=>U(k,D);M?M(m.el,D,z):z()}else D()},sn=(m,y)=>{let k;for(;m!==y;)k=h(m),i(m),m=k;i(y)},os=(m,y,k)=>{const{bum:E,scope:P,job:D,subTree:U,um:M,m:z,a:I}=m;xr(z),xr(I),E&&ds(E),P.stop(),D&&(D.flags|=8,Je(U,m,y,k)),M&&nt(M,y),nt(()=>{m.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},rt=(m,y,k,E=!1,P=!1,D=0)=>{for(let U=D;U<m.length;U++)Je(m[U],y,k,E,P)},T=m=>{if(m.shapeFlag&6)return T(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const y=h(m.anchor||m.el),k=y&&y[Rc];return k?h(k):y};let j=!1;const V=(m,y,k)=>{m==null?y._vnode&&Je(y._vnode,null,null,!0):b(y._vnode||null,m,y,null,null,null,k),y._vnode=m,j||(j=!0,br(),oo(),j=!1)},G={p:b,um:Je,m:Re,r:nn,mt:fe,mc:R,pc:Y,pbc:K,n:T,o:e};let ve,Ae;return{render:V,hydrate:ve,createApp:Qc(V,ve)}}function ai({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function qt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function cu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Po(e,t,n=!1){const s=e.children,i=t.children;if(X(s)&&X(i))for(let r=0;r<s.length;r++){const a=s[r];let o=i[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[r]=$t(i[r]),o.el=a.el),!n&&o.patchFlag!==-2&&Po(a,o)),o.type===Us&&(o.el=a.el)}}function uu(e){const t=e.slice(),n=[0];let s,i,r,a,o;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(i=n[n.length-1],e[i]<u){t[s]=i,n.push(s);continue}for(r=0,a=n.length-1;r<a;)o=r+a>>1,e[n[o]]<u?r=o+1:a=o;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}function To(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:To(t)}function xr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const fu=Symbol.for("v-scx"),du=()=>lt(fu);function hu(e,t){return tr(e,null,{flush:"post"})}function Rt(e,t,n){return tr(e,t,n)}function tr(e,t,n=_e){const{immediate:s,deep:i,flush:r,once:a}=n,o=Ue({},n),l=t&&s||!t&&r!=="post";let u;if(Hn){if(r==="sync"){const p=du();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=St,p.resume=St,p.pause=St,p}}const f=$e;o.call=(p,v,b)=>Ct(p,f,v,b);let d=!1;r==="post"?o.scheduler=p=>{nt(p,f&&f.suspense)}:r!=="sync"&&(d=!0,o.scheduler=(p,v)=>{v?p():Yi(p)}),o.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,f&&(p.id=f.uid,p.i=f))};const h=Pc(e,t,o);return Hn&&(u?u.push(h):l&&h()),h}function pu(e,t,n){const s=this.proxy,i=Ne(e)?e.includes(".")?Ao(s,e):()=>s[e]:e.bind(s,s);let r;ae(t)?r=t:(r=t.handler,n=t);const a=is(this),o=tr(i,r.bind(s),n);return a(),o}function Ao(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const gu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ct(t)}Modifiers`]||e[`${Wt(t)}Modifiers`];function mu(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||_e;let i=n;const r=t.startsWith("update:"),a=r&&gu(s,t.slice(7));a&&(a.trim&&(i=n.map(f=>Ne(f)?f.trim():f)),a.number&&(i=n.map(bs)));let o,l=s[o=ei(t)]||s[o=ei(ct(t))];!l&&r&&(l=s[o=ei(Wt(t))]),l&&Ct(l,e,6,i);const u=s[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Ct(u,e,6,i)}}function Eo(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let a={},o=!1;if(!ae(e)){const l=u=>{const f=Eo(u,t,!0);f&&(o=!0,Ue(a,f))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!o?(xe(e)&&s.set(e,null),null):(X(r)?r.forEach(l=>a[l]=null):Ue(a,r),xe(e)&&s.set(e,a),a)}function $s(e,t){return!e||!Rs(t)?!1:(t=t.slice(2).replace(/Once$/,""),me(e,t[0].toLowerCase()+t.slice(1))||me(e,Wt(t))||me(e,t))}function oi(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:a,attrs:o,emit:l,render:u,renderCache:f,props:d,data:h,setupState:p,ctx:v,inheritAttrs:b}=e,L=Ss(e);let S,C;try{if(n.shapeFlag&4){const w=i||s,N=w;S=wt(u.call(N,w,f,d,p,h,v)),C=o}else{const w=t;S=wt(w.length>1?w(d,{attrs:o,slots:a,emit:l}):w(d,null)),C=t.props?o:yu(o)}}catch(w){In.length=0,Ns(w,e,1),S=ye(jt)}let x=S;if(C&&b!==!1){const w=Object.keys(C),{shapeFlag:N}=x;w.length&&N&7&&(r&&w.some(Ni)&&(C=vu(C,r)),x=mn(x,C,!1,!0))}return n.dirs&&(x=mn(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&Zi(x,n.transition),S=x,Ss(L),S}const yu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Rs(n))&&((t||(t={}))[n]=e[n]);return t},vu=(e,t)=>{const n={};for(const s in e)(!Ni(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function bu(e,t,n){const{props:s,children:i,component:r}=e,{props:a,children:o,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Pr(s,a,u):!!a;if(l&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const h=f[d];if(a[h]!==s[h]&&!$s(u,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:s===a?!1:s?a?Pr(s,a,u):!0:!!a;return!1}function Pr(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!$s(n,r))return!0}return!1}function ku({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ro=e=>e.__isSuspense;function wu(e,t){t&&t.pendingBranch?X(e)?t.effects.push(...e):t.effects.push(e):Ec(e)}const Me=Symbol.for("v-fgt"),Us=Symbol.for("v-txt"),jt=Symbol.for("v-cmt"),ps=Symbol.for("v-stc"),In=[];let st=null;function Z(e=!1){In.push(st=e?null:[])}function _u(){In.pop(),st=In[In.length-1]||null}let Bn=1;function Tr(e){Bn+=e,e<0&&st&&(st.hasOnce=!0)}function Do(e){return e.dynamicChildren=Bn>0?st||fn:null,_u(),Bn>0&&st&&st.push(e),e}function ce(e,t,n,s,i,r){return Do(O(e,t,n,s,i,r,!0))}function je(e,t,n,s,i){return Do(ye(e,t,n,s,i,!0))}function Vn(e){return e?e.__v_isVNode===!0:!1}function Ln(e,t){return e.type===t.type&&e.key===t.key}const Io=({key:e})=>e??null,gs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ne(e)||Fe(e)||ae(e)?{i:ze,r:e,k:t,f:!!n}:e:null);function O(e,t=null,n=null,s=0,i=null,r=e===Me?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Io(t),ref:t&&gs(t),scopeId:co,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ze};return o?(nr(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Ne(n)?8:16),Bn>0&&!a&&st&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&st.push(l),l}const ye=Su;function Su(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Hc)&&(e=jt),Vn(e)){const o=mn(e,t,!0);return n&&nr(o,n),Bn>0&&!r&&st&&(o.shapeFlag&6?st[st.indexOf(e)]=o:st.push(o)),o.patchFlag=-2,o}if(Iu(e)&&(e=e.__vccOpts),t){t=Cu(t);let{class:o,style:l}=t;o&&!Ne(o)&&(t.class=Ui(o)),xe(l)&&(Ji(l)&&!X(l)&&(l=Ue({},l)),t.style=$i(l))}const a=Ne(e)?1:Ro(e)?128:Dc(e)?64:xe(e)?4:ae(e)?2:0;return O(e,t,n,s,i,a,r,!0)}function Cu(e){return e?Ji(e)||ko(e)?Ue({},e):e:null}function mn(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:a,children:o,transition:l}=e,u=t?Fo(i||{},t):i,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Io(u),ref:t&&t.ref?n&&r?X(r)?r.concat(gs(t)):[r,gs(t)]:gs(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Me?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mn(e.ssContent),ssFallback:e.ssFallback&&mn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&Zi(f,l.clone(f)),f}function Ze(e=" ",t=0){return ye(Us,null,e,t)}function Dt(e="",t=!1){return t?(Z(),je(jt,null,e)):ye(jt,null,e)}function wt(e){return e==null||typeof e=="boolean"?ye(jt):X(e)?ye(Me,null,e.slice()):Vn(e)?$t(e):ye(Us,null,String(e))}function $t(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:mn(e)}function nr(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(X(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),nr(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!ko(t)?t._ctx=ze:i===3&&ze&&(ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ae(t)?(t={default:t,_ctx:ze},n=32):(t=String(t),s&64?(n=16,t=[Ze(t)]):n=8);e.children=t,e.shapeFlag|=n}function Fo(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Ui([t.class,s.class]));else if(i==="style")t.style=$i([t.style,s.style]);else if(Rs(i)){const r=t[i],a=s[i];a&&r!==a&&!(X(r)&&r.includes(a))&&(t[i]=r?[].concat(r,a):a)}else i!==""&&(t[i]=s[i])}return t}function bt(e,t,n,s=null){Ct(e,t,7,[n,s])}const Lu=yo();let xu=0;function Pu(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||Lu,r={uid:xu++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new za(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_o(s,i),emitsOptions:Eo(s,i),emit:null,emitted:null,propsDefaults:_e,inheritAttrs:s.inheritAttrs,ctx:_e,data:_e,props:_e,attrs:_e,slots:_e,refs:_e,setupState:_e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=mu.bind(null,r),e.ce&&e.ce(r),r}let $e=null;const sr=()=>$e||ze;let Ls,xi;{const e=Fs(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(a=>a(r)):i[0](r)}};Ls=t("__VUE_INSTANCE_SETTERS__",n=>$e=n),xi=t("__VUE_SSR_SETTERS__",n=>Hn=n)}const is=e=>{const t=$e;return Ls(e),e.scope.on(),()=>{e.scope.off(),Ls(t)}},Ar=()=>{$e&&$e.scope.off(),Ls(null)};function Oo(e){return e.vnode.shapeFlag&4}let Hn=!1;function Tu(e,t=!1,n=!1){t&&xi(t);const{props:s,children:i}=e.vnode,r=Oo(e);tu(e,s,r,t),ru(e,i,n);const a=r?Au(e,t):void 0;return t&&xi(!1),a}function Au(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Kc);const{setup:s}=n;if(s){Kt();const i=e.setupContext=s.length>1?Ru(e):null,r=is(e),a=es(s,e,0,[e.props,i]),o=Ea(a);if(Gt(),r(),(o||e.sp)&&!pn(e)&&uo(e),o){if(a.then(Ar,Ar),t)return a.then(l=>{Er(e,l,t)}).catch(l=>{Ns(l,e,0)});e.asyncDep=a}else Er(e,a,t)}else No(e,t)}function Er(e,t,n){ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:xe(t)&&(e.setupState=io(t)),No(e,n)}let Rr;function No(e,t,n){const s=e.type;if(!e.render){if(!t&&Rr&&!s.render){const i=s.template||Qi(e).template;if(i){const{isCustomElement:r,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=s,u=Ue(Ue({isCustomElement:r,delimiters:o},a),l);s.render=Rr(i,u)}}e.render=s.render||St}{const i=is(e);Kt();try{Gc(e)}finally{Gt(),i()}}}const Eu={get(e,t){return Ve(e,"get",""),e[t]}};function Ru(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Eu),slots:e.slots,emit:e.emit,expose:t}}function Bs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(io(qi(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Dn)return Dn[n](e)},has(t,n){return n in t||n in Dn}})):e.proxy}function Du(e,t=!0){return ae(e)?e.displayName||e.name:e.name||t&&e.__name}function Iu(e){return ae(e)&&"__vccOpts"in e}const Pe=(e,t)=>Lc(e,t,Hn);function zo(e,t,n){const s=arguments.length;return s===2?xe(t)&&!X(t)?Vn(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Vn(n)&&(n=[n]),ye(e,t,n))}const Fu="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pi;const Dr=typeof window<"u"&&window.trustedTypes;if(Dr)try{Pi=Dr.createPolicy("vue",{createHTML:e=>e})}catch{}const Mo=Pi?e=>Pi.createHTML(e):e=>e,Ou="http://www.w3.org/2000/svg",Nu="http://www.w3.org/1998/Math/MathML",Tt=typeof document<"u"?document:null,Ir=Tt&&Tt.createElement("template"),zu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Tt.createElementNS(Ou,e):t==="mathml"?Tt.createElementNS(Nu,e):n?Tt.createElement(e,{is:n}):Tt.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Tt.createTextNode(e),createComment:e=>Tt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Tt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const a=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Ir.innerHTML=Mo(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const o=Ir.content;if(s==="svg"||s==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Mu=Symbol("_vtc");function $u(e,t,n){const s=e[Mu];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Fr=Symbol("_vod"),Uu=Symbol("_vsh"),$o=Symbol("");function Uo(e){const t=sr();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(r=>xs(r,i))},s=()=>{const i=e(t.proxy);t.ce?xs(t.ce,i):Ti(t.subTree,i),n(i)};tn(()=>{hu(s)}),Ms(()=>{const i=new MutationObserver(s);i.observe(t.subTree.el.parentNode,{childList:!0}),Xi(()=>i.disconnect())})}function Ti(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Ti(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)xs(e.el,t);else if(e.type===Me)e.children.forEach(n=>Ti(n,t));else if(e.type===ps){let{el:n,anchor:s}=e;for(;n&&(xs(n,t),n!==s);)n=n.nextSibling}}function xs(e,t){if(e.nodeType===1){const n=e.style;let s="";for(const i in t)n.setProperty(`--${i}`,t[i]),s+=`--${i}: ${t[i]};`;n[$o]=s}}const Bu=/(^|;)\s*display\s*:/;function Vu(e,t,n){const s=e.style,i=Ne(n);let r=!1;if(n&&!i){if(t)if(Ne(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&ms(s,o,"")}else for(const a in t)n[a]==null&&ms(s,a,"");for(const a in n)a==="display"&&(r=!0),ms(s,a,n[a])}else if(i){if(t!==n){const a=s[$o];a&&(n+=";"+a),s.cssText=n,r=Bu.test(n)}}else t&&e.removeAttribute("style");Fr in e&&(e[Fr]=r?s.display:"",e[Uu]&&(s.display="none"))}const Or=/\s*!important$/;function ms(e,t,n){if(X(n))n.forEach(s=>ms(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Hu(e,t);Or.test(n)?e.setProperty(Wt(s),n.replace(Or,""),"important"):e[s]=n}}const Nr=["Webkit","Moz","ms"],li={};function Hu(e,t){const n=li[t];if(n)return n;let s=ct(t);if(s!=="filter"&&s in e)return li[t]=s;s=Is(s);for(let i=0;i<Nr.length;i++){const r=Nr[i]+s;if(r in e)return li[t]=r}return t}const zr="http://www.w3.org/1999/xlink";function Mr(e,t,n,s,i,r=Zl(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(zr,t.slice(6,t.length)):e.setAttributeNS(zr,t,n):n==null||r&&!Fa(n)?e.removeAttribute(t):e.setAttribute(t,r?"":gt(n)?String(n):n)}function $r(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Mo(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const o=typeof e[t];o==="boolean"?n=Fa(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(i||t)}function Bt(e,t,n,s){e.addEventListener(t,n,s)}function ju(e,t,n,s){e.removeEventListener(t,n,s)}const Ur=Symbol("_vei");function Wu(e,t,n,s,i=null){const r=e[Ur]||(e[Ur]={}),a=r[t];if(s&&a)a.value=s;else{const[o,l]=Ku(t);if(s){const u=r[t]=qu(s,i);Bt(e,o,u,l)}else a&&(ju(e,o,a,l),r[t]=void 0)}}const Br=/(?:Once|Passive|Capture)$/;function Ku(e){let t;if(Br.test(e)){t={};let s;for(;s=e.match(Br);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Wt(e.slice(2)),t]}let ci=0;const Gu=Promise.resolve(),Ju=()=>ci||(Gu.then(()=>ci=0),ci=Date.now());function qu(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ct(Yu(s,n.value),t,5,[s])};return n.value=e,n.attached=Ju(),n}function Yu(e,t){if(X(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Vr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Zu=(e,t,n,s,i,r)=>{const a=i==="svg";t==="class"?$u(e,s,a):t==="style"?Vu(e,n,s):Rs(t)?Ni(t)||Wu(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xu(e,t,s,a))?($r(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Mr(e,t,s,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ne(s))?$r(e,ct(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Mr(e,t,s,a))};function Xu(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Vr(t)&&ae(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Vr(t)&&Ne(n)?!1:t in e}const yn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return X(t)?n=>ds(t,n):t};function Qu(e){e.target.composing=!0}function Hr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const It=Symbol("_assign"),jn={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[It]=yn(i);const r=s||i.props&&i.props.type==="number";Bt(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),r&&(o=bs(o)),e[It](o)}),n&&Bt(e,"change",()=>{e.value=e.value.trim()}),t||(Bt(e,"compositionstart",Qu),Bt(e,"compositionend",Hr),Bt(e,"change",Hr))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},a){if(e[It]=yn(a),e.composing)return;const o=(r||e.type==="number")&&!/^0\d/.test(e.value)?bs(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Wn={deep:!0,created(e,t,n){e[It]=yn(n),Bt(e,"change",()=>{const s=e._modelValue,i=Kn(e),r=e.checked,a=e[It];if(X(s)){const o=Bi(s,i),l=o!==-1;if(r&&!l)a(s.concat(i));else if(!r&&l){const u=[...s];u.splice(o,1),a(u)}}else if(kn(s)){const o=new Set(s);r?o.add(i):o.delete(i),a(o)}else a(Bo(e,r))})},mounted:jr,beforeUpdate(e,t,n){e[It]=yn(n),jr(e,t,n)}};function jr(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(X(t))i=Bi(t,s.props.value)>-1;else if(kn(t))i=t.has(s.props.value);else{if(t===n)return;i=Xn(t,Bo(e,!0))}e.checked!==i&&(e.checked=i)}const ef={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=kn(t);Bt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?bs(Kn(a)):Kn(a));e[It](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,ts(()=>{e._assigning=!1})}),e[It]=yn(s)},mounted(e,{value:t}){Wr(e,t)},beforeUpdate(e,t,n){e[It]=yn(n)},updated(e,{value:t}){e._assigning||Wr(e,t)}};function Wr(e,t){const n=e.multiple,s=X(t);if(!(n&&!s&&!kn(t))){for(let i=0,r=e.options.length;i<r;i++){const a=e.options[i],o=Kn(a);if(n)if(s){const l=typeof o;l==="string"||l==="number"?a.selected=t.some(u=>String(u)===String(o)):a.selected=Bi(t,o)>-1}else a.selected=t.has(o);else if(Xn(Kn(a),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Kn(e){return"_value"in e?e._value:e.value}function Bo(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const tf=["ctrl","shift","alt","meta"],nf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>tf.some(n=>e[`${n}Key`]&&!t.includes(n))},Ye=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let a=0;a<t.length;a++){const o=nf[t[a]];if(o&&o(i,t))return}return e(i,...r)})},sf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ui=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=Wt(i.key);if(t.some(a=>a===r||sf[a]===r))return e(i)})},rf=Ue({patchProp:Zu},zu);let Kr;function af(){return Kr||(Kr=ou(rf))}const of=(...e)=>{const t=af().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=cf(s);if(!i)return;const r=t._component;!ae(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,lf(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function lf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function cf(e){return Ne(e)?document.querySelector(e):e}const Xe=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},uf={};function ff(e,t){const n=ns("RouterView");return Z(),je(n)}const df=Xe(uf,[["render",ff]]);/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const un=typeof document<"u";function Vo(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function hf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Vo(e.default)}const ke=Object.assign;function fi(e,t){const n={};for(const s in t){const i=t[s];n[s]=mt(i)?i.map(e):e(i)}return n}const Fn=()=>{},mt=Array.isArray,Ho=/#/g,pf=/&/g,gf=/\//g,mf=/=/g,yf=/\?/g,jo=/\+/g,vf=/%5B/g,bf=/%5D/g,Wo=/%5E/g,kf=/%60/g,Ko=/%7B/g,wf=/%7C/g,Go=/%7D/g,_f=/%20/g;function ir(e){return encodeURI(""+e).replace(wf,"|").replace(vf,"[").replace(bf,"]")}function Sf(e){return ir(e).replace(Ko,"{").replace(Go,"}").replace(Wo,"^")}function Ai(e){return ir(e).replace(jo,"%2B").replace(_f,"+").replace(Ho,"%23").replace(pf,"%26").replace(kf,"`").replace(Ko,"{").replace(Go,"}").replace(Wo,"^")}function Cf(e){return Ai(e).replace(mf,"%3D")}function Lf(e){return ir(e).replace(Ho,"%23").replace(yf,"%3F")}function xf(e){return e==null?"":Lf(e).replace(gf,"%2F")}function Gn(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Pf=/\/$/,Tf=e=>e.replace(Pf,"");function di(e,t,n="/"){let s,i={},r="",a="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,o>-1?o:t.length),i=e(r)),o>-1&&(s=s||t.slice(0,o),a=t.slice(o,t.length)),s=Df(s??t,n),{fullPath:s+(r&&"?")+r+a,path:s,query:i,hash:Gn(a)}}function Af(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Gr(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ef(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&vn(t.matched[s],n.matched[i])&&Jo(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function vn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Jo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Rf(e[n],t[n]))return!1;return!0}function Rf(e,t){return mt(e)?Jr(e,t):mt(t)?Jr(t,e):e===t}function Jr(e,t){return mt(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Df(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,a,o;for(a=0;a<s.length;a++)if(o=s[a],o!==".")if(o==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(a).join("/")}const Nt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Jn;(function(e){e.pop="pop",e.push="push"})(Jn||(Jn={}));var On;(function(e){e.back="back",e.forward="forward",e.unknown=""})(On||(On={}));function If(e){if(!e)if(un){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Tf(e)}const Ff=/^[^#]+#/;function Of(e,t){return e.replace(Ff,"#")+t}function Nf(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Vs=()=>({left:window.scrollX,top:window.scrollY});function zf(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Nf(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function qr(e,t){return(history.state?history.state.position-t:-1)+e}const Ei=new Map;function Mf(e,t){Ei.set(e,t)}function $f(e){const t=Ei.get(e);return Ei.delete(e),t}let Uf=()=>location.protocol+"//"+location.host;function qo(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let o=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),Gr(l,"")}return Gr(n,e)+s+i}function Bf(e,t,n,s){let i=[],r=[],a=null;const o=({state:h})=>{const p=qo(e,location),v=n.value,b=t.value;let L=0;if(h){if(n.value=p,t.value=h,a&&a===v){a=null;return}L=b?h.position-b.position:0}else s(p);i.forEach(S=>{S(n.value,v,{delta:L,type:Jn.pop,direction:L?L>0?On.forward:On.back:On.unknown})})};function l(){a=n.value}function u(h){i.push(h);const p=()=>{const v=i.indexOf(h);v>-1&&i.splice(v,1)};return r.push(p),p}function f(){const{history:h}=window;h.state&&h.replaceState(ke({},h.state,{scroll:Vs()}),"")}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function Yr(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Vs():null}}function Vf(e){const{history:t,location:n}=window,s={value:qo(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,f){const d=e.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:Uf()+e+l;try{t[f?"replaceState":"pushState"](u,"",h),i.value=u}catch(p){console.error(p),n[f?"replace":"assign"](h)}}function a(l,u){const f=ke({},t.state,Yr(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});r(l,f,!0),s.value=l}function o(l,u){const f=ke({},i.value,t.state,{forward:l,scroll:Vs()});r(f.current,f,!0);const d=ke({},Yr(s.value,l,null),{position:f.position+1},u);r(l,d,!1),s.value=l}return{location:s,state:i,push:o,replace:a}}function Hf(e){e=If(e);const t=Vf(e),n=Bf(e,t.state,t.location,t.replace);function s(r,a=!0){a||n.pauseListeners(),history.go(r)}const i=ke({location:"",base:e,go:s,createHref:Of.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function jf(e){return typeof e=="string"||e&&typeof e=="object"}function Yo(e){return typeof e=="string"||typeof e=="symbol"}const Zo=Symbol("");var Zr;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Zr||(Zr={}));function bn(e,t){return ke(new Error,{type:e,[Zo]:!0},t)}function Pt(e,t){return e instanceof Error&&Zo in e&&(t==null||!!(e.type&t))}const Xr="[^/]+?",Wf={sensitive:!1,strict:!1,start:!0,end:!0},Kf=/[.+*?^${}()[\]/\\]/g;function Gf(e,t){const n=ke({},Wf,t),s=[];let i=n.start?"^":"";const r=[];for(const u of e){const f=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const h=u[d];let p=40+(n.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(Kf,"\\$&"),p+=40;else if(h.type===1){const{value:v,repeatable:b,optional:L,regexp:S}=h;r.push({name:v,repeatable:b,optional:L});const C=S||Xr;if(C!==Xr){p+=10;try{new RegExp(`(${C})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${v}" (${C}): `+w.message)}}let x=b?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;d||(x=L&&u.length<2?`(?:/${x})`:"/"+x),L&&(x+="?"),i+=x,p+=20,L&&(p+=-8),b&&(p+=-20),C===".*"&&(p+=-50)}f.push(p)}s.push(f)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function o(u){const f=u.match(a),d={};if(!f)return null;for(let h=1;h<f.length;h++){const p=f[h]||"",v=r[h-1];d[v.name]=p&&v.repeatable?p.split("/"):p}return d}function l(u){let f="",d=!1;for(const h of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const p of h)if(p.type===0)f+=p.value;else if(p.type===1){const{value:v,repeatable:b,optional:L}=p,S=v in u?u[v]:"";if(mt(S)&&!b)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const C=mt(S)?S.join("/"):S;if(!C)if(L)h.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);f+=C}}return f||"/"}return{re:a,score:s,keys:r,parse:o,stringify:l}}function Jf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Xo(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=Jf(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Qr(s))return 1;if(Qr(i))return-1}return i.length-s.length}function Qr(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const qf={type:0,value:""},Yf=/[a-zA-Z0-9_]/;function Zf(e){if(!e)return[[]];if(e==="/")return[[qf]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${u}": ${p}`)}let n=0,s=n;const i=[];let r;function a(){r&&i.push(r),r=[]}let o=0,l,u="",f="";function d(){u&&(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;o<e.length;){if(l=e[o++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),a()):l===":"?(d(),n=1):h();break;case 4:h(),n=s;break;case 1:l==="("?n=2:Yf.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=3:f+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,f="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),a(),i}function Xf(e,t,n){const s=Gf(Zf(e.path),n),i=ke(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Qf(e,t){const n=[],s=new Map;t=sa({strict:!1,end:!0,sensitive:!1},t);function i(d){return s.get(d)}function r(d,h,p){const v=!p,b=ta(d);b.aliasOf=p&&p.record;const L=sa(t,d),S=[b];if("alias"in d){const w=typeof d.alias=="string"?[d.alias]:d.alias;for(const N of w)S.push(ta(ke({},b,{components:p?p.record.components:b.components,path:N,aliasOf:p?p.record:b})))}let C,x;for(const w of S){const{path:N}=w;if(h&&N[0]!=="/"){const W=h.record.path,F=W[W.length-1]==="/"?"":"/";w.path=h.record.path+(N&&F+N)}if(C=Xf(w,h,L),p?p.alias.push(C):(x=x||C,x!==C&&x.alias.push(C),v&&d.name&&!na(C)&&a(d.name)),Qo(C)&&l(C),b.children){const W=b.children;for(let F=0;F<W.length;F++)r(W[F],C,p&&p.children[F])}p=p||C}return x?()=>{a(x)}:Fn}function a(d){if(Yo(d)){const h=s.get(d);h&&(s.delete(d),n.splice(n.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=n.indexOf(d);h>-1&&(n.splice(h,1),d.record.name&&s.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return n}function l(d){const h=nd(d,n);n.splice(h,0,d),d.record.name&&!na(d)&&s.set(d.record.name,d)}function u(d,h){let p,v={},b,L;if("name"in d&&d.name){if(p=s.get(d.name),!p)throw bn(1,{location:d});L=p.record.name,v=ke(ea(h.params,p.keys.filter(x=>!x.optional).concat(p.parent?p.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),d.params&&ea(d.params,p.keys.map(x=>x.name))),b=p.stringify(v)}else if(d.path!=null)b=d.path,p=n.find(x=>x.re.test(b)),p&&(v=p.parse(b),L=p.record.name);else{if(p=h.name?s.get(h.name):n.find(x=>x.re.test(h.path)),!p)throw bn(1,{location:d,currentLocation:h});L=p.record.name,v=ke({},h.params,d.params),b=p.stringify(v)}const S=[];let C=p;for(;C;)S.unshift(C.record),C=C.parent;return{name:L,path:b,params:v,matched:S,meta:td(S)}}e.forEach(d=>r(d));function f(){n.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:f,getRoutes:o,getRecordMatcher:i}}function ea(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ta(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ed(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ed(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function na(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function td(e){return e.reduce((t,n)=>ke(t,n.meta),{})}function sa(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function nd(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Xo(e,t[r])<0?s=r:n=r+1}const i=sd(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function sd(e){let t=e;for(;t=t.parent;)if(Qo(t)&&Xo(e,t)===0)return t}function Qo({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function id(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(jo," "),a=r.indexOf("="),o=Gn(a<0?r:r.slice(0,a)),l=a<0?null:Gn(r.slice(a+1));if(o in t){let u=t[o];mt(u)||(u=t[o]=[u]),u.push(l)}else t[o]=l}return t}function ia(e){let t="";for(let n in e){const s=e[n];if(n=Cf(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(mt(s)?s.map(r=>r&&Ai(r)):[s&&Ai(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function rd(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=mt(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const ad=Symbol(""),ra=Symbol(""),Hs=Symbol(""),rr=Symbol(""),Ri=Symbol("");function xn(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ut(e,t,n,s,i,r=a=>a()){const a=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((o,l)=>{const u=h=>{h===!1?l(bn(4,{from:n,to:t})):h instanceof Error?l(h):jf(h)?l(bn(2,{from:t,to:h})):(a&&s.enterCallbacks[i]===a&&typeof h=="function"&&a.push(h),o())},f=r(()=>e.call(s&&s.instances[i],t,n,u));let d=Promise.resolve(f);e.length<3&&(d=d.then(u)),d.catch(h=>l(h))})}function hi(e,t,n,s,i=r=>r()){const r=[];for(const a of e)for(const o in a.components){let l=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(Vo(l)){const f=(l.__vccOpts||l)[t];f&&r.push(Ut(f,n,s,a,o,i))}else{let u=l();r.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=hf(f)?f.default:f;a.mods[o]=f,a.components[o]=d;const p=(d.__vccOpts||d)[t];return p&&Ut(p,n,s,a,o,i)()}))}}return r}function aa(e){const t=lt(Hs),n=lt(rr),s=Pe(()=>{const l=he(e.to);return t.resolve(l)}),i=Pe(()=>{const{matched:l}=s.value,{length:u}=l,f=l[u-1],d=n.matched;if(!f||!d.length)return-1;const h=d.findIndex(vn.bind(null,f));if(h>-1)return h;const p=oa(l[u-2]);return u>1&&oa(f)===p&&d[d.length-1].path!==p?d.findIndex(vn.bind(null,l[u-2])):h}),r=Pe(()=>i.value>-1&&ud(n.params,s.value.params)),a=Pe(()=>i.value>-1&&i.value===n.matched.length-1&&Jo(n.params,s.value.params));function o(l={}){return cd(l)?t[he(e.replace)?"replace":"push"](he(e.to)).catch(Fn):Promise.resolve()}return{route:s,href:Pe(()=>s.value.href),isActive:r,isExactActive:a,navigate:o}}const od=Oe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:aa,setup(e,{slots:t}){const n=Qn(aa(e)),{options:s}=lt(Hs),i=Pe(()=>({[la(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[la(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:zo("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),ld=od;function cd(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ud(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!mt(i)||i.length!==s.length||s.some((r,a)=>r!==i[a]))return!1}return!0}function oa(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const la=(e,t,n)=>e??t??n,fd=Oe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=lt(Ri),i=Pe(()=>e.route||s.value),r=lt(ra,0),a=Pe(()=>{let u=he(r);const{matched:f}=i.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),o=Pe(()=>i.value.matched[a.value]);hs(ra,Pe(()=>a.value+1)),hs(ad,o),hs(Ri,i);const l=De();return Rt(()=>[l.value,o.value,e.name],([u,f,d],[h,p,v])=>{f&&(f.instances[d]=u,p&&p!==f&&u&&u===h&&(f.leaveGuards.size||(f.leaveGuards=p.leaveGuards),f.updateGuards.size||(f.updateGuards=p.updateGuards))),u&&f&&(!p||!vn(f,p)||!h)&&(f.enterCallbacks[d]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=i.value,f=e.name,d=o.value,h=d&&d.components[f];if(!h)return ca(n.default,{Component:h,route:u});const p=d.props[f],v=p?p===!0?u.params:typeof p=="function"?p(u):p:null,L=zo(h,ke({},v,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[f]=null)},ref:l}));return ca(n.default,{Component:L,route:u})||L}}});function ca(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const dd=fd;function hd(e){const t=Qf(e.routes,e),n=e.parseQuery||id,s=e.stringifyQuery||ia,i=e.history,r=xn(),a=xn(),o=xn(),l=no(Nt);let u=Nt;un&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=fi.bind(null,T=>""+T),d=fi.bind(null,xf),h=fi.bind(null,Gn);function p(T,j){let V,G;return Yo(T)?(V=t.getRecordMatcher(T),G=j):G=T,t.addRoute(G,V)}function v(T){const j=t.getRecordMatcher(T);j&&t.removeRoute(j)}function b(){return t.getRoutes().map(T=>T.record)}function L(T){return!!t.getRecordMatcher(T)}function S(T,j){if(j=ke({},j||l.value),typeof T=="string"){const y=di(n,T,j.path),k=t.resolve({path:y.path},j),E=i.createHref(y.fullPath);return ke(y,k,{params:h(k.params),hash:Gn(y.hash),redirectedFrom:void 0,href:E})}let V;if(T.path!=null)V=ke({},T,{path:di(n,T.path,j.path).path});else{const y=ke({},T.params);for(const k in y)y[k]==null&&delete y[k];V=ke({},T,{params:d(y)}),j.params=d(j.params)}const G=t.resolve(V,j),ve=T.hash||"";G.params=f(h(G.params));const Ae=Af(s,ke({},T,{hash:Sf(ve),path:G.path})),m=i.createHref(Ae);return ke({fullPath:Ae,hash:ve,query:s===ia?rd(T.query):T.query||{}},G,{redirectedFrom:void 0,href:m})}function C(T){return typeof T=="string"?di(n,T,l.value.path):ke({},T)}function x(T,j){if(u!==T)return bn(8,{from:j,to:T})}function w(T){return F(T)}function N(T){return w(ke(C(T),{replace:!0}))}function W(T){const j=T.matched[T.matched.length-1];if(j&&j.redirect){const{redirect:V}=j;let G=typeof V=="function"?V(T):V;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=C(G):{path:G},G.params={}),ke({query:T.query,hash:T.hash,params:G.path!=null?{}:T.params},G)}}function F(T,j){const V=u=S(T),G=l.value,ve=T.state,Ae=T.force,m=T.replace===!0,y=W(V);if(y)return F(ke(C(y),{state:typeof y=="object"?ke({},ve,y.state):ve,force:Ae,replace:m}),j||V);const k=V;k.redirectedFrom=j;let E;return!Ae&&Ef(s,G,V)&&(E=bn(16,{to:k,from:G}),Re(G,G,!0,!1)),(E?Promise.resolve(E):K(k,G)).catch(P=>Pt(P)?Pt(P,2)?P:Ee(P):Y(P,k,G)).then(P=>{if(P){if(Pt(P,2))return F(ke({replace:m},C(P.to),{state:typeof P.to=="object"?ke({},ve,P.to.state):ve,force:Ae}),j||k)}else P=Q(k,G,!0,m,ve);return re(k,G,P),P})}function R(T,j){const V=x(T,j);return V?Promise.reject(V):Promise.resolve()}function $(T){const j=sn.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(T):T()}function K(T,j){let V;const[G,ve,Ae]=pd(T,j);V=hi(G.reverse(),"beforeRouteLeave",T,j);for(const y of G)y.leaveGuards.forEach(k=>{V.push(Ut(k,T,j))});const m=R.bind(null,T,j);return V.push(m),rt(V).then(()=>{V=[];for(const y of r.list())V.push(Ut(y,T,j));return V.push(m),rt(V)}).then(()=>{V=hi(ve,"beforeRouteUpdate",T,j);for(const y of ve)y.updateGuards.forEach(k=>{V.push(Ut(k,T,j))});return V.push(m),rt(V)}).then(()=>{V=[];for(const y of Ae)if(y.beforeEnter)if(mt(y.beforeEnter))for(const k of y.beforeEnter)V.push(Ut(k,T,j));else V.push(Ut(y.beforeEnter,T,j));return V.push(m),rt(V)}).then(()=>(T.matched.forEach(y=>y.enterCallbacks={}),V=hi(Ae,"beforeRouteEnter",T,j,$),V.push(m),rt(V))).then(()=>{V=[];for(const y of a.list())V.push(Ut(y,T,j));return V.push(m),rt(V)}).catch(y=>Pt(y,8)?y:Promise.reject(y))}function re(T,j,V){o.list().forEach(G=>$(()=>G(T,j,V)))}function Q(T,j,V,G,ve){const Ae=x(T,j);if(Ae)return Ae;const m=j===Nt,y=un?history.state:{};V&&(G||m?i.replace(T.fullPath,ke({scroll:m&&y&&y.scroll},ve)):i.push(T.fullPath,ve)),l.value=T,Re(T,j,V,m),Ee()}let le;function fe(){le||(le=i.listen((T,j,V)=>{if(!os.listening)return;const G=S(T),ve=W(G);if(ve){F(ke(ve,{replace:!0}),G).catch(Fn);return}u=G;const Ae=l.value;un&&Mf(qr(Ae.fullPath,V.delta),Vs()),K(G,Ae).catch(m=>Pt(m,12)?m:Pt(m,2)?(F(m.to,G).then(y=>{Pt(y,20)&&!V.delta&&V.type===Jn.pop&&i.go(-1,!1)}).catch(Fn),Promise.reject()):(V.delta&&i.go(-V.delta,!1),Y(m,G,Ae))).then(m=>{m=m||Q(G,Ae,!1),m&&(V.delta&&!Pt(m,8)?i.go(-V.delta,!1):V.type===Jn.pop&&Pt(m,20)&&i.go(-1,!1)),re(G,Ae,m)}).catch(Fn)}))}let Se=xn(),oe=xn(),q;function Y(T,j,V){Ee(T);const G=oe.list();return G.length?G.forEach(ve=>ve(T,j,V)):console.error(T),Promise.reject(T)}function Ie(){return q&&l.value!==Nt?Promise.resolve():new Promise((T,j)=>{Se.add([T,j])})}function Ee(T){return q||(q=!T,fe(),Se.list().forEach(([j,V])=>T?V(T):j()),Se.reset()),T}function Re(T,j,V,G){const{scrollBehavior:ve}=e;if(!un||!ve)return Promise.resolve();const Ae=!V&&$f(qr(T.fullPath,0))||(G||!V)&&history.state&&history.state.scroll||null;return ts().then(()=>ve(T,j,Ae)).then(m=>m&&zf(m)).catch(m=>Y(m,T,j))}const Je=T=>i.go(T);let nn;const sn=new Set,os={currentRoute:l,listening:!0,addRoute:p,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:L,getRoutes:b,resolve:S,options:e,push:w,replace:N,go:Je,back:()=>Je(-1),forward:()=>Je(1),beforeEach:r.add,beforeResolve:a.add,afterEach:o.add,onError:oe.add,isReady:Ie,install(T){const j=this;T.component("RouterLink",ld),T.component("RouterView",dd),T.config.globalProperties.$router=j,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>he(l)}),un&&!nn&&l.value===Nt&&(nn=!0,w(i.location).catch(ve=>{}));const V={};for(const ve in Nt)Object.defineProperty(V,ve,{get:()=>l.value[ve],enumerable:!0});T.provide(Hs,j),T.provide(rr,eo(V)),T.provide(Ri,l);const G=T.unmount;sn.add(T),T.unmount=function(){sn.delete(T),sn.size<1&&(u=Nt,le&&le(),le=null,l.value=Nt,nn=!1,q=!1),G()}}};function rt(T){return T.reduce((j,V)=>j.then(()=>$(V)),Promise.resolve())}return os}function pd(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const o=t.matched[a];o&&(e.matched.find(u=>vn(u,o))?s.push(o):n.push(o));const l=e.matched[a];l&&(t.matched.find(u=>vn(u,l))||i.push(l))}return[n,s,i]}function rs(){return lt(Hs)}function el(e){return lt(rr)}const gd={class:"oekaki-tag-container"},md=["onClick"],yd=Oe({__name:"TagContainer",props:{tags:{},disableNavigation:{type:Boolean}},setup(e){const t=e,n=rs(),s=async i=>{t.disableNavigation||await n.push(`/tag/${i}`)};return(i,r)=>(Z(),ce("div",gd,[(Z(!0),ce(Me,null,ss(t.tags,a=>(Z(),ce("span",{class:"oekaki-tag",key:a,onClick:Ye(o=>s(a),["prevent"])},"#"+ie(a),9,md))),128))]))}}),ar=Xe(yd,[["__scopeId","data-v-6645d36b"]]);var vd=!1;/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let tl;const js=e=>tl=e,nl=Symbol();function Di(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Nn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Nn||(Nn={}));function bd(){const e=Ma(!0),t=e.run(()=>De({}));let n=[],s=[];const i=qi({install(r){js(i),i._a=r,r.provide(nl,i),r.config.globalProperties.$pinia=i,s.forEach(a=>n.push(a)),s=[]},use(r){return!this._a&&!vd?s.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const sl=()=>{};function ua(e,t,n,s=sl){e.push(t);const i=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),s())};return!n&&$a()&&Ql(i),i}function an(e,...t){e.slice().forEach(n=>{n(...t)})}const kd=e=>e(),fa=Symbol(),pi=Symbol();function Ii(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];Di(i)&&Di(s)&&e.hasOwnProperty(n)&&!Fe(s)&&!Ht(s)?e[n]=Ii(i,s):e[n]=s}return e}const wd=Symbol();function _d(e){return!Di(e)||!e.hasOwnProperty(wd)}const{assign:zt}=Object;function Sd(e){return!!(Fe(e)&&e.effect)}function Cd(e,t,n,s){const{state:i,actions:r,getters:a}=t,o=n.state.value[e];let l;function u(){o||(n.state.value[e]=i?i():{});const f=wc(n.state.value[e]);return zt(f,r,Object.keys(a||{}).reduce((d,h)=>(d[h]=qi(Pe(()=>{js(n);const p=n._s.get(e);return a[h].call(p,p)})),d),{}))}return l=il(e,u,t,n,s,!0),l}function il(e,t,n={},s,i,r){let a;const o=zt({actions:{}},n),l={deep:!0};let u,f,d=[],h=[],p;const v=s.state.value[e];!r&&!v&&(s.state.value[e]={}),De({});let b;function L(R){let $;u=f=!1,typeof R=="function"?(R(s.state.value[e]),$={type:Nn.patchFunction,storeId:e,events:p}):(Ii(s.state.value[e],R),$={type:Nn.patchObject,payload:R,storeId:e,events:p});const K=b=Symbol();ts().then(()=>{b===K&&(u=!0)}),f=!0,an(d,$,s.state.value[e])}const S=r?function(){const{state:$}=n,K=$?$():{};this.$patch(re=>{zt(re,K)})}:sl;function C(){a.stop(),d=[],h=[],s._s.delete(e)}const x=(R,$="")=>{if(fa in R)return R[pi]=$,R;const K=function(){js(s);const re=Array.from(arguments),Q=[],le=[];function fe(q){Q.push(q)}function Se(q){le.push(q)}an(h,{args:re,name:K[pi],store:N,after:fe,onError:Se});let oe;try{oe=R.apply(this&&this.$id===e?this:N,re)}catch(q){throw an(le,q),q}return oe instanceof Promise?oe.then(q=>(an(Q,q),q)).catch(q=>(an(le,q),Promise.reject(q))):(an(Q,oe),oe)};return K[fa]=!0,K[pi]=$,K},w={_p:s,$id:e,$onAction:ua.bind(null,h),$patch:L,$reset:S,$subscribe(R,$={}){const K=ua(d,R,$.detached,()=>re()),re=a.run(()=>Rt(()=>s.state.value[e],Q=>{($.flush==="sync"?f:u)&&R({storeId:e,type:Nn.direct,events:p},Q)},zt({},l,$)));return K},$dispose:C},N=Qn(w);s._s.set(e,N);const F=(s._a&&s._a.runWithContext||kd)(()=>s._e.run(()=>(a=Ma()).run(()=>t({action:x}))));for(const R in F){const $=F[R];if(Fe($)&&!Sd($)||Ht($))r||(v&&_d($)&&(Fe($)?$.value=v[R]:Ii($,v[R])),s.state.value[e][R]=$);else if(typeof $=="function"){const K=x($,R);F[R]=K,o.actions[R]=$}}return zt(N,F),zt(de(N),F),Object.defineProperty(N,"$state",{get:()=>s.state.value[e],set:R=>{L($=>{zt($,R)})}}),s._p.forEach(R=>{zt(N,a.run(()=>R({store:N,app:s._a,pinia:s,options:o})))}),v&&r&&n.hydrate&&n.hydrate(N.$state,v),u=!0,f=!0,N}/*! #__NO_SIDE_EFFECTS__ */function Ws(e,t,n){let s,i;const r=typeof t=="function";typeof e=="string"?(s=e,i=r?n:t):(i=e,s=e.id);function a(o,l){const u=eu();return o=o||(u?lt(nl,null):null),o&&js(o),o=tl,o._s.has(s)||(r?il(s,t,i,o):Cd(s,i,o)),o._s.get(s)}return a.$id=s,a}const Lt=Ws("persistedStore",{state:()=>({token:null,blurNsfw:!0,hideNsfw:!1,lang:"en"}),persist:!0}),or=Ws("identityStore",{state:()=>({did:null,handle:null})}),lr=Ws("imageStore",{state:()=>({lastDoneImage:null,restartPainting:!1,lastUploadErrored:!1,lastDoneReply:null,lastReplyErrored:!1,lastReplyId:""}),persist:!0}),Ld={key:0,class:"oekaki-card"},xd=["title"],Pd={key:0,class:"oekaki-nsfw-blur"},Td={class:"oekaki-meta"},Ad={class:"oekaki-author"},Ed={key:1,class:"oekaki-tag-container-substitute"},Rd=Oe({__name:"TimeLineOekakiCard",props:{oekaki:{}},setup(e){Uo(d=>({c396ea9e:r.value}));const t=rs(),n=Lt(),s=e,i={year:"numeric",month:"long",day:"numeric"},r=Pe(()=>`url(${s.oekaki.imageLink})`),a=Pe(()=>`/${s.oekaki.authorDid}`),o=Pe(()=>new Date(s.oekaki.creationTime).toLocaleTimeString(n.lang,i)),l=Pe(()=>s.oekaki.alt??""),u=()=>{t.push(`/${s.oekaki.authorDid}/oekaki/${s.oekaki.oekakiRecordKey}`)},f=()=>{window.open(`/${s.oekaki.authorDid}/oekaki/${s.oekaki.oekakiRecordKey}`,"_blank")};return(d,h)=>{const p=ns("RouterLink");return!s.oekaki.nsfw||s.oekaki.nsfw&&!he(n).hideNsfw?(Z(),ce("div",Ld,[O("div",{class:"oekaki-image",onClick:Ye(u,["prevent"]),onMousedown:Ye(f,["middle","stop","prevent"]),title:l.value},[s.oekaki.nsfw&&he(n).blurNsfw?(Z(),ce("div",Pd,"NSFW")):Dt("",!0)],40,xd),O("div",Td,[O("span",null,[Ze(ie(d.$t("timeline.by_before_handle")),1),O("b",Ad,[ye(p,{to:a.value},{default:ut(()=>[Ze("@"+ie(s.oekaki.authorHandle),1)]),_:1},8,["to"])]),Ze(ie(d.$t("timeline.by_after_handle")),1)]),h[0]||(h[0]=O("br",null,null,-1)),O("span",null,ie(o.value),1),h[1]||(h[1]=O("br",null,null,-1)),s.oekaki.tags!==void 0&&s.oekaki.tags.length>0?(Z(),je(ar,{key:0,tags:s.oekaki.tags},null,8,["tags"])):(Z(),ce("div",Ed,"."))])])):Dt("",!0)}}}),Dd=Xe(Rd,[["__scopeId","data-v-9e14bbed"]]),Id=e=>typeof e=="object"?e.handle.bind(e):e,Fd=({service:e,fetch:t=fetch})=>async(n,s)=>{const i=new URL(n,e);return t(i,s)},Od=(e,t)=>{let n;for(const s in t){const i=t[s];i!==null&&(n??=new Headers(e),n.has(s)||n.set(s,i))}return n??e};class gn extends Error{constructor(t,{kind:n,description:s,headers:i,cause:r}={}){super(`${n||"UnspecifiedKind"} > ${s||"Unspecified error description"}`,{cause:r}),this.name="XRPCError",this.status=t,this.kind=n,this.description=s,this.headers=i||{}}}class rl{constructor({handler:t,proxy:n}){this.handle=Id(t),this.proxy=n}get(t,n){return this.request({type:"get",nsid:t,...n})}call(t,n){return this.request({type:"post",nsid:t,...n})}async request(t){const n=t.data,s=`/xrpc/${t.nsid}`+zd(t.params),i=Md(n),r=await this.handle(s,{method:t.type,signal:t.signal,body:i?JSON.stringify(n):n,headers:Od(t.headers,{"content-type":i?"application/json":null,"atproto-proxy":Nd(this.proxy)})}),a=r.status,o=Object.fromEntries(r.headers),l=o["content-type"];let u,f;l&&(l.startsWith("application/json")?u=r.json():l.startsWith("text/")&&(u=r.text()));try{f=await(u||r.arrayBuffer().then(d=>new Uint8Array(d)))}catch(d){throw new gn(2,{cause:d,kind:"InvalidResponse",description:"Failed to parse response body",headers:o})}if(a===200)return{data:f,headers:o};throw $d(f)?new gn(a,{kind:f.error,description:f.message,headers:o}):new gn(a,{headers:o})}}const Nd=e=>e?`${e.service}#${e.type}`:null,zd=e=>{let t;for(const n in e){const s=e[n];if(s!==void 0)if(t??=new URLSearchParams,Array.isArray(s))for(let i=0,r=s.length;i<r;i++){const a=s[i];t.append(n,""+a)}else t.set(n,""+s)}return t?"?"+t.toString():""},Md=e=>{if(typeof e!="object"||e===null)return!1;if("toJSON"in e)return!0;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype},$d=e=>{if(typeof e!="object"||e===null)return!1;const t=typeof e.error,n=typeof e.message;return(t==="undefined"||t==="string")&&(n==="undefined"||n==="string")},Ud=e=>Bd(e,"#atproto_pds","AtprotoPersonalDataServer"),Bd=(e,t,n)=>{const i=e.id+t,r=e.service?.find(a=>a.id===t||a.id===i);if(!(!r||r.type!==n||typeof r.serviceEndpoint!="string"))return Vd(r.serviceEndpoint)},Vd=e=>{let t;try{t=new URL(e)}catch{return}const n=t.protocol;if(t.hostname&&(n==="http:"||n==="https:"))return e},da=e=>{const n=e.split(".")[1];let s;if(typeof n!="string")throw new Error("invalid token: missing part 2");try{s=Hd(n)}catch(i){throw new Error("invalid token: invalid b64 for part 2 ("+i.message+")")}try{return JSON.parse(s)}catch(i){throw new Error("invalid token: invalid json for part 2 ("+i.message+")")}},Hd=e=>{let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return jd(t)}catch{return atob(t)}},jd=e=>decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}));class Wd{#e;#t;#s;#i;#r;constructor({service:t,onExpired:n,onRefresh:s,onSessionUpdate:i,fetch:r=fetch}){this.serviceUrl=t,this.fetch=r,this.#e=new rl({handler:Fd({service:t,fetch:r})}),this.#i=s,this.#s=n,this.#r=i}get dispatchUrl(){return this.session?.pdsUri??this.serviceUrl}async handle(t,n){await this.#t;const s=new URL(t,this.dispatchUrl),i=new Headers(n.headers);if(!this.session||i.has("authorization"))return(0,this.fetch)(s,n);i.set("authorization",`Bearer ${this.session.accessJwt}`);const r=await(0,this.fetch)(s,{...n,headers:i});if(!await Kd(r))return r;try{await this.#a()}catch{return r}return!this.session||n.body instanceof ReadableStream?r:(i.set("authorization",`Bearer ${this.session.accessJwt}`),await(0,this.fetch)(s,{...n,headers:i}))}#a(){return this.#t||=this.#o().finally(()=>this.#t=void 0)}async#o(){const t=this.session;if(t)try{const{data:n}=await this.#e.call("com.atproto.server.refreshSession",{headers:{authorization:`Bearer ${t.refreshJwt}`}});this.#n({...t,...n}),this.#i?.(this.session)}catch(n){if(n instanceof gn){const s=n.kind;(s==="ExpiredToken"||s==="InvalidToken")&&(this.session=void 0,this.#s?.(t))}}}#n(t){const n=t.didDoc;let s;n&&(s=Ud(n));const i={accessJwt:t.accessJwt,refreshJwt:t.refreshJwt,handle:t.handle,did:t.did,pdsUri:s,email:t.email,emailConfirmed:t.emailConfirmed,emailAuthFactor:t.emailConfirmed,active:t.active??!0,inactiveStatus:t.status};return this.session=i,this.#r?.(i),i}async resume(t){const n=Date.now()/1e3+300,s=da(t.refreshJwt);if(n>=s.exp)throw new gn(401,{kind:"InvalidToken"});const i=da(t.accessJwt);if(this.session=t,n>=i.exp?await this.#a():this.#e.get("com.atproto.server.getSession",{headers:{authorization:`Bearer ${t.accessJwt}`}}).then(a=>{const o=this.session,l=a.data;o&&this.#n({...o,...l})}),!this.session)throw new gn(401,{kind:"InvalidToken"});return this.session}async login(t){this.session=void 0;const n=await this.#e.call("com.atproto.server.createSession",{data:{identifier:t.identifier,password:t.password,authFactorToken:t.code}});return this.#n(n.data)}}const Kd=async e=>{if(e.status!==400||Gd(e.headers)!=="application/json"||Jd(e.headers)>54*1.5)return!1;try{const{error:t,message:n}=await e.clone().json();return t==="ExpiredToken"&&(typeof n=="string"||n===void 0)}catch{}return!1},Gd=e=>e.get("content-type")?.split(";")[0]?.trim(),Jd=e=>Number(e.get("content-length")??";"),qd="https://api.pinksea.art",Yd=new Wd({service:qd}),it=new rl({handler:Yd}),Zd={};function Xd(e,t){return Z(),ce("div",null," loading... ")}const al=Xe(Zd,[["render",Xd],["__scopeId","data-v-4eae3b8b"]]),Qd={ref:"intersector-ref"},eh=Oe({__name:"Intersector",emits:["intersected"],setup(e,{emit:t}){const n=t,s=wn("intersector-ref"),i=a=>{a.isIntersecting&&n("intersected")};let r;return Ms(()=>{r=new IntersectionObserver(a=>{i(a[0])}),r.observe(s.value)}),po(()=>{r.disconnect()}),(a,o)=>(Z(),ce("span",Qd,null,512))}}),th={key:1,class:"timeline-container"},nh=Oe({__name:"TimeLine",props:{endpoint:{},xrpcParams:{}},setup(e){const t=e,n=De(!0),s=De(null);Rt(()=>t.xrpcParams,async()=>{const r=t.xrpcParams!==void 0?{params:{...t.xrpcParams}}:{},{data:a}=await it.get(t.endpoint,r);s.value=a.oekaki},{immediate:!0});const i=async()=>{if(s.value===null||s.value.length<1||!n.value)return;const r=s.value[s.value.length-1].creationTime,a=t.xrpcParams!==void 0?{params:{since:r,...t.xrpcParams}}:{params:{since:r}},{data:o}=await it.get(t.endpoint,a),l=o.oekaki;if(l.length<1){n.value=!1;return}s.value=s.value.concat(l)};return(r,a)=>s.value==null?(Z(),je(al,{key:0})):(Z(),ce("div",th,[(Z(!0),ce(Me,null,ss(s.value,o=>(Z(),je(Dd,Fo({key:o.atProtoLink,ref_for:!0},o,{oekaki:o}),null,16,["oekaki"]))),128)),ye(eh,{onIntersected:i})]))}}),cr=Xe(nh,[["__scopeId","data-v-96e73464"]]),ur=Ws("breadcrumbBarStore",{state:()=>({crumbs:[],pop:!1,push:!1})}),se=e=>typeof e=="string",Pn=()=>{let e,t;const n=new Promise((s,i)=>{e=s,t=i});return n.resolve=e,n.reject=t,n},ha=e=>e==null?"":""+e,sh=(e,t,n)=>{e.forEach(s=>{t[s]&&(n[s]=t[s])})},ih=/###/g,pa=e=>e&&e.indexOf("###")>-1?e.replace(ih,"."):e,ga=e=>!e||se(e),zn=(e,t,n)=>{const s=se(t)?t.split("."):t;let i=0;for(;i<s.length-1;){if(ga(e))return{};const r=pa(s[i]);!e[r]&&n&&(e[r]=new n),Object.prototype.hasOwnProperty.call(e,r)?e=e[r]:e={},++i}return ga(e)?{}:{obj:e,k:pa(s[i])}},ma=(e,t,n)=>{const{obj:s,k:i}=zn(e,t,Object);if(s!==void 0||t.length===1){s[i]=n;return}let r=t[t.length-1],a=t.slice(0,t.length-1),o=zn(e,a,Object);for(;o.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),o=zn(e,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${r}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=n},rh=(e,t,n,s)=>{const{obj:i,k:r}=zn(e,t,Object);i[r]=i[r]||[],i[r].push(n)},Ps=(e,t)=>{const{obj:n,k:s}=zn(e,t);if(n)return n[s]},ah=(e,t,n)=>{const s=Ps(e,n);return s!==void 0?s:Ps(t,n)},ol=(e,t,n)=>{for(const s in t)s!=="__proto__"&&s!=="constructor"&&(s in e?se(e[s])||e[s]instanceof String||se(t[s])||t[s]instanceof String?n&&(e[s]=t[s]):ol(e[s],t[s],n):e[s]=t[s]);return e},on=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var oh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const lh=e=>se(e)?e.replace(/[&<>"'\/]/g,t=>oh[t]):e;class ch{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}}const uh=[" ",",","?","!",";"],fh=new ch(20),dh=(e,t,n)=>{t=t||"",n=n||"";const s=uh.filter(a=>t.indexOf(a)<0&&n.indexOf(a)<0);if(s.length===0)return!0;const i=fh.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!i.test(e);if(!r){const a=e.indexOf(n);a>0&&!i.test(e.substring(0,a))&&(r=!0)}return r},Fi=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const s=t.split(n);let i=e;for(let r=0;r<s.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=r;l<s.length;++l)if(l!==r&&(o+=n),o+=s[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<s.length-1)continue;r+=l-r+1;break}i=a}return i},Ts=e=>e&&e.replace("_","-"),hh={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class As{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||hh,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,s,i){return i&&!this.debug?null:(se(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new As(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new As(this.logger,t)}}var _t=new As;class Ks{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(n)||0;this.observers[s].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[t,...s])})}}class ya extends Ks{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,n],s&&(Array.isArray(s)?o.push(...s):se(s)&&r?o.push(...s.split(r)):o.push(s)));const l=Ps(this.data,o);return!l&&!n&&!s&&t.indexOf(".")>-1&&(t=o[0],n=o[1],s=o.slice(2).join(".")),l||!a||!se(s)?l:Fi(this.data&&this.data[t]&&this.data[t][n],s,r)}addResource(t,n,s,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=[t,n];s&&(o=o.concat(a?s.split(a):s)),t.indexOf(".")>-1&&(o=t.split("."),i=n,n=o[1]),this.addNamespaces(n),ma(this.data,o,i),r.silent||this.emit("added",t,n,s,i)}addResources(t,n,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in s)(se(s[r])||Array.isArray(s[r]))&&this.addResource(t,n,r,s[r],{silent:!0});i.silent||this.emit("added",t,n,s)}addResourceBundle(t,n,s,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[t,n];t.indexOf(".")>-1&&(o=t.split("."),i=s,s=n,n=o[1]),this.addNamespaces(n);let l=Ps(this.data,o)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?ol(l,s,r):l={...l,...s},ma(this.data,o,l),a.silent||this.emit("added",t,n,s)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var ll={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,i){return e.forEach(r=>{this.processors[r]&&(t=this.processors[r].process(t,n,s,i))}),t}};const va={};class Es extends Ks{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),sh(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=_t.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const s=this.resolve(t,n);return s&&s.res!==void 0}extractFromKey(t,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let r=n.ns||this.options.defaultNS||[];const a=s&&t.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!dh(t,s,i);if(a&&!o){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:se(r)?[r]:r};const u=t.split(s);(s!==i||s===i&&this.options.ns.indexOf(u[0])>-1)&&(r=u.shift()),t=u.join(i)}return{key:t,namespaces:se(r)?[r]:r}}translate(t,n,s){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(t[t.length-1],n),l=o[o.length-1],u=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(f){const w=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${w}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:a}const d=this.resolve(t,n);let h=d&&d.res;const p=d&&d.usedKey||a,v=d&&d.exactUsedKey||a,b=Object.prototype.toString.apply(h),L=["[object Number]","[object Function]","[object RegExp]"],S=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!se(h)&&typeof h!="boolean"&&typeof h!="number";if(C&&h&&x&&L.indexOf(b)<0&&!(se(S)&&Array.isArray(h))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,h,{...n,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(d.res=w,d.usedParams=this.getUsedParamsDetails(n),d):w}if(r){const w=Array.isArray(h),N=w?[]:{},W=w?v:p;for(const F in h)if(Object.prototype.hasOwnProperty.call(h,F)){const R=`${W}${r}${F}`;N[F]=this.translate(R,{...n,joinArrays:!1,ns:o}),N[F]===R&&(N[F]=h[F])}h=N}}else if(C&&se(S)&&Array.isArray(h))h=h.join(S),h&&(h=this.extendTranslation(h,t,n,s));else{let w=!1,N=!1;const W=n.count!==void 0&&!se(n.count),F=Es.hasDefaultValue(n),R=W?this.pluralResolver.getSuffix(u,n.count,n):"",$=n.ordinal&&W?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",K=W&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),re=K&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${R}`]||n[`defaultValue${$}`]||n.defaultValue;!this.isValidLookup(h)&&F&&(w=!0,h=re),this.isValidLookup(h)||(N=!0,h=a);const le=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:h,fe=F&&re!==h&&this.options.updateMissing;if(N||w||fe){if(this.logger.log(fe?"updateKey":"missingKey",u,l,a,fe?re:h),r){const Y=this.resolve(a,{...n,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Se=[];const oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&oe&&oe[0])for(let Y=0;Y<oe.length;Y++)Se.push(oe[Y]);else this.options.saveMissingTo==="all"?Se=this.languageUtils.toResolveHierarchy(n.lng||this.language):Se.push(n.lng||this.language);const q=(Y,Ie,Ee)=>{const Re=F&&Ee!==h?Ee:le;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,l,Ie,Re,fe,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Y,l,Ie,Re,fe,n),this.emit("missingKey",Y,l,Ie,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&W?Se.forEach(Y=>{const Ie=this.pluralResolver.getSuffixes(Y,n);K&&n[`defaultValue${this.options.pluralSeparator}zero`]&&Ie.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ie.push(`${this.options.pluralSeparator}zero`),Ie.forEach(Ee=>{q([Y],a+Ee,n[`defaultValue${Ee}`]||re)})}):q(Se,a,re))}h=this.extendTranslation(h,t,n,d,s),N&&h===a&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${a}`),(N||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,w?h:void 0):h=this.options.parseMissingKeyHandler(h))}return i?(d.res=h,d.usedParams=this.getUsedParamsDetails(n),d):h}extendTranslation(t,n,s,i,r){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const u=se(t)&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(u){const h=t.match(this.interpolator.nestingRegexp);f=h&&h.length}let d=s.replace&&!se(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),t=this.interpolator.interpolate(t,d,s.lng||this.language||i.usedLng,s),u){const h=t.match(this.interpolator.nestingRegexp),p=h&&h.length;f<p&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var h=arguments.length,p=new Array(h),v=0;v<h;v++)p[v]=arguments[v];return r&&r[0]===p[0]&&!s.context?(a.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):a.translate(...p,n)},s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,l=se(o)?[o]:o;return t!=null&&l&&l.length&&s.applyPostProcessor!==!1&&(t=ll.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,i,r,a,o;return se(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(s))return;const u=this.extractFromKey(l,n),f=u.key;i=f;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=n.count!==void 0&&!se(n.count),p=h&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),v=n.context!==void 0&&(se(n.context)||typeof n.context=="number")&&n.context!=="",b=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(L=>{this.isValidLookup(s)||(o=L,!va[`${b[0]}-${L}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(va[`${b[0]}-${L}`]=!0,this.logger.warn(`key "${i}" for languages "${b.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(S=>{if(this.isValidLookup(s))return;a=S;const C=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(C,f,S,L,n);else{let w;h&&(w=this.pluralResolver.getSuffix(S,n.count,n));const N=`${this.options.pluralSeparator}zero`,W=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(C.push(f+w),n.ordinal&&w.indexOf(W)===0&&C.push(f+w.replace(W,this.options.pluralSeparator)),p&&C.push(f+N)),v){const F=`${f}${this.options.contextSeparator}${n.context}`;C.push(F),h&&(C.push(F+w),n.ordinal&&w.indexOf(W)===0&&C.push(F+w.replace(W,this.options.pluralSeparator)),p&&C.push(F+N))}}let x;for(;x=C.pop();)this.isValidLookup(s)||(r=x,s=this.getResource(S,L,x,n))}))})}),{res:s,usedKey:i,exactUsedKey:r,usedLng:a,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,s,i):this.resourceStore.getResource(t,n,s,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!se(t.replace);let i=s?t.replace:t;if(s&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const r of n)delete i[r]}return i}static hasDefaultValue(t){const n="defaultValue";for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&n===s.substring(0,n.length)&&t[s]!==void 0)return!0;return!1}}const gi=e=>e.charAt(0).toUpperCase()+e.slice(1);class ba{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=_t.create("languageUtils")}getScriptPartFromCode(t){if(t=Ts(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Ts(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(se(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(t)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let s=t.split("-");return this.options.lowerCaseLng?s=s.map(i=>i.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),n.indexOf(s[1].toLowerCase())>-1&&(s[1]=gi(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),n.indexOf(s[1].toLowerCase())>-1&&(s[1]=gi(s[1].toLowerCase())),n.indexOf(s[2].toLowerCase())>-1&&(s[2]=gi(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(s=>{if(n)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(s=>{if(n)return;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(r=>{if(r===i)return r;if(!(r.indexOf("-")<0&&i.indexOf("-")<0)&&(r.indexOf("-")>0&&i.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===i||r.indexOf(i)===0&&i.length>1))return r})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),se(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let s=t[n];return s||(s=t[this.getScriptPartFromCode(n)]),s||(s=t[this.formatLanguageCode(n)]),s||(s=t[this.getLanguagePartFromCode(n)]),s||(s=t.default),s||[]}toResolveHierarchy(t,n){const s=this.getFallbackCodes(n||this.options.fallbackLng||[],t),i=[],r=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return se(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(t))):se(t)&&r(this.formatLanguageCode(t)),s.forEach(a=>{i.indexOf(a)<0&&r(this.formatLanguageCode(a))}),i}}let ph=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],gh={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const mh=["v1","v2","v3"],yh=["v4"],ka={zero:0,one:1,two:2,few:3,many:4,other:5},vh=()=>{const e={};return ph.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:gh[t.fc]}})}),e};class bh{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=_t.create("pluralResolver"),(!this.options.compatibilityJSON||yh.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=vh(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const s=Ts(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:s,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];const a=new Intl.PluralRules(s,{type:i});return this.pluralRulesCache[r]=a,a}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(t,n);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,s).map(i=>`${n}${i}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(t,n);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((i,r)=>ka[i]-ka[r]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):s.numbers.map(i=>this.getSuffix(t,i,n)):[]}getSuffix(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,s);return i?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const s=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let i=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:r():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?r():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!mh.includes(this.options.compatibilityJSON)}}const wa=function(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=ah(e,t,n);return!r&&i&&se(n)&&(r=Fi(e,n,s),r===void 0&&(r=Fi(t,n,s))),r},mi=e=>e.replace(/\$/g,"$$$$");class kh{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=_t.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:i,prefix:r,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:f,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:p,nestingSuffix:v,nestingSuffixEscaped:b,nestingOptionsSeparator:L,maxReplaces:S,alwaysFormat:C}=t.interpolation;this.escape=n!==void 0?n:lh,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?on(r):a||"{{",this.suffix=o?on(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=f?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=h?on(h):p||on("$t("),this.nestingSuffix=v?on(v):b||on(")"),this.nestingOptionsSeparator=L||",",this.maxReplaces=S||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,s)=>n&&n.source===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,s,i){let r,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const S=wa(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,s,{...i,...n,interpolationkey:p}):S}const v=p.split(this.formatSeparator),b=v.shift().trim(),L=v.join(this.formatSeparator).trim();return this.format(wa(n,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),L,s,{...i,...n,interpolationkey:b})};this.resetRegExp();const f=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>mi(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?mi(this.escape(p)):mi(p)}].forEach(p=>{for(o=0;r=p.regex.exec(t);){const v=r[1].trim();if(a=u(v),a===void 0)if(typeof f=="function"){const L=f(t,r,i);a=se(L)?L:""}else if(i&&Object.prototype.hasOwnProperty.call(i,v))a="";else if(d){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${t}`),a="";else!se(a)&&!this.useRawValueToEscape&&(a=ha(a));const b=p.safeValue(a);if(t=t.replace(r[0],b),d?(p.regex.lastIndex+=a.length,p.regex.lastIndex-=r[0].length):p.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,r,a;const o=(l,u)=>{const f=this.nestingOptionsSeparator;if(l.indexOf(f)<0)return l;const d=l.split(new RegExp(`${f}[ ]*{`));let h=`{${d[1]}`;l=d[0],h=this.interpolate(h,a);const p=h.match(/'/g),v=h.match(/"/g);(p&&p.length%2===0&&!v||v.length%2!==0)&&(h=h.replace(/'/g,'"'));try{a=JSON.parse(h),u&&(a={...u,...a})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,b),`${l}${f}${h}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];a={...s},a=a.replace&&!se(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const f=i[1].split(this.formatSeparator).map(d=>d.trim());i[1]=f.shift(),l=f,u=!0}if(r=n(o.call(this,i[1].trim(),a),a),r&&i[0]===t&&!se(r))return r;se(r)||(r=ha(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),r=""),u&&(r=l.reduce((f,d)=>this.format(f,d,s.lng,{...s,interpolationkey:i[1].trim()}),r.trim())),t=t.replace(i[0],r),this.regexp.lastIndex=0}return t}}const wh=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),f=o.trim();n[f]||(n[f]=u),u==="false"&&(n[f]=!1),u==="true"&&(n[f]=!0),isNaN(u)||(n[f]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},ln=e=>{const t={};return(n,s,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const a=s+JSON.stringify(r);let o=t[a];return o||(o=e(Ts(s),i),t[a]=o),o(n)}};class _h{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=_t.create("formatter"),this.options=t,this.formats={number:ln((n,s)=>{const i=new Intl.NumberFormat(n,{...s});return r=>i.format(r)}),currency:ln((n,s)=>{const i=new Intl.NumberFormat(n,{...s,style:"currency"});return r=>i.format(r)}),datetime:ln((n,s)=>{const i=new Intl.DateTimeFormat(n,{...s});return r=>i.format(r)}),relativetime:ln((n,s)=>{const i=new Intl.RelativeTimeFormat(n,{...s});return r=>i.format(r,s.range||"day")}),list:ln((n,s)=>{const i=new Intl.ListFormat(n,{...s});return r=>i.format(r)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=ln(n)}format(t,n,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=n.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(o=>o.indexOf(")")>-1)){const o=r.findIndex(l=>l.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,o)].join(this.formatSeparator)}return r.reduce((o,l)=>{const{formatName:u,formatOptions:f}=wh(l);if(this.formats[u]){let d=o;try{const h=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},p=h.locale||h.lng||i.locale||i.lng||s;d=this.formats[u](o,p,{...f,...i,...h})}catch(h){this.logger.warn(h)}return d}else this.logger.warn(`there was no format function for ${u}`);return o},t)}}const Sh=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Ch extends Ks{constructor(t,n,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=_t.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,i.backend,i)}queueLoad(t,n,s,i){const r={},a={},o={},l={};return t.forEach(u=>{let f=!0;n.forEach(d=>{const h=`${u}|${d}`;!s.reload&&this.store.hasResourceBundle(u,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?a[h]===void 0&&(a[h]=!0):(this.state[h]=1,f=!1,a[h]===void 0&&(a[h]=!0),r[h]===void 0&&(r[h]=!0),l[d]===void 0&&(l[d]=!0)))}),f||(o[u]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(t,n,s){const i=t.split("|"),r=i[0],a=i[1];n&&this.emit("failedLoading",r,a,n),!n&&s&&this.store.addResourceBundle(r,a,s,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&s&&(this.state[t]=0);const o={};this.queue.forEach(l=>{rh(l.loaded,[r],a),Sh(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const f=l.loaded[u];f.length&&f.forEach(d=>{o[u][d]===void 0&&(o[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(t,n,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:s,tried:i,wait:r,callback:a});return}this.readingCalls++;const o=(u,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,s,i+1,r*2,a)},r);return}a(u,f)},l=this.backend[s].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(f=>o(null,f)).catch(o):o(null,u)}catch(u){o(u)}return}return l(t,n,o)}prepareLoading(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();se(t)&&(t=this.languageUtils.toResolveHierarchy(t)),se(n)&&(n=[n]);const r=this.queueLoad(t,n,s,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(t,n,s){this.prepareLoading(t,n,{},s)}reload(t,n,s){this.prepareLoading(t,n,{reload:!0},s)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=t.split("|"),i=s[0],r=s[1];this.read(i,r,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${n}loading namespace ${r} for language ${i} failed`,a),!a&&o&&this.logger.log(`${n}loaded namespace ${r} for language ${i}`,o),this.loaded(t,a,o)})}saveMissing(t,n,s,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:r},u=this.backend.create.bind(this.backend);if(u.length<6)try{let f;u.length===5?f=u(t,n,s,i,l):f=u(t,n,s,i),f&&typeof f.then=="function"?f.then(d=>o(null,d)).catch(o):o(null,f)}catch(f){o(f)}else u(t,n,s,i,o,l)}!t||!t[0]||this.store.addResource(t[0],n,s,i)}}}const _a=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),se(e[1])&&(t.defaultValue=e[1]),se(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(s=>{t[s]=n[s]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Sa=e=>(se(e.ns)&&(e.ns=[e.ns]),se(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),se(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),fs=()=>{},Lh=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class qn extends Ks{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Sa(t),this.services={},this.logger=_t,this.modules={external:[]},Lh(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(s=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(se(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=_a();this.options={...i,...this.options,...Sa(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const r=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?_t.init(r(this.modules.logger),this.options):_t.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=_h);const d=new ba(this.options);this.store=new ya(this.options.resources,this.options);const h=this.services;h.logger=_t,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new bh(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(h.formatter=r(f),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new kh(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Ch(r(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(p){for(var v=arguments.length,b=new Array(v>1?v-1:0),L=1;L<v;L++)b[L-1]=arguments[L];t.emit(p,...b)}),this.modules.languageDetector&&(h.languageDetector=r(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=r(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Es(this.services,this.options),this.translator.on("*",function(p){for(var v=arguments.length,b=new Array(v>1?v-1:0),L=1;L<v;L++)b[L-1]=arguments[L];t.emit(p,...b)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,s||(s=fs),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return t.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return t.store[f](...arguments),t}});const l=Pn(),u=()=>{const f=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),s(d,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fs;const i=se(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const r=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&r.indexOf(u)<0&&r.push(u)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(r,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(o)})}else s(null)}reloadResources(t,n,s){const i=Pn();return typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),s||(s=fs),this.services.backendConnector.reload(t,n,r=>{i.resolve(),s(r)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&ll.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(t,n){var s=this;this.isLanguageChangingTo=t;const i=Pn();this.emit("languageChanging",t);const r=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(r(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return s.t(...arguments)}),n&&n(l,function(){return s.t(...arguments)})},o=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=se(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||r(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,f=>{a(f,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),i}getFixedT(t,n,s){var i=this;const r=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,f=new Array(u>2?u-2:0),d=2;d<u;d++)f[d-2]=arguments[d];l=i.options.overloadTranslationOptionHandler([a,o].concat(f))}else l={...o};l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||s||r.keyPrefix);const h=i.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(a)?p=a.map(v=>`${l.keyPrefix}${h}${v}`):p=l.keyPrefix?`${l.keyPrefix}${h}${a}`:a,i.t(p,l)};return se(t)?r.lng=t:r.lngs=t,r.ns=n,r.keyPrefix=s,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const o=n.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,t)&&(!i||a(r,t)))}loadNamespaces(t,n){const s=Pn();return this.options.ns?(se(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),n&&n(i)}),s):(n&&n(),Promise.resolve())}loadLanguages(t,n){const s=Pn();se(t)&&(t=[t]);const i=this.options.preload||[],r=t.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=i.concat(r),this.loadResources(a=>{s.resolve(),n&&n(a)}),s):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new ba(_a());return n.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new qn(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fs;const s=t.forkResourceStore;s&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},r=new qn(i);return(t.debug!==void 0||t.prefix!==void 0)&&(r.logger=r.logger.clone(t)),["store","services","language"].forEach(o=>{r[o]=this[o]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},s&&(r.store=new ya(this.store.data,i),r.services.resourceStore=r.store),r.translator=new Es(r.services,i),r.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];r.emit(o,...u)}),r.init(i,n),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ge=qn.createInstance();ge.createInstance=qn.createInstance;ge.createInstance;ge.dir;ge.init;ge.loadResources;ge.reloadResources;ge.use;ge.changeLanguage;ge.getFixedT;ge.t;ge.exists;ge.setDefaultNamespace;ge.hasLoadedNamespace;ge.loadNamespaces;ge.loadLanguages;window.addEventListener("popstate",()=>{const e=ur();e.pop=!0});const ys=e=>ge.t(e.i18n.name,e.i18n.params),xh=e=>{e.beforeEach(async(t,n,s)=>{const i=ur();if(i.pop){i.crumbs.pop(),i.pop=!1,document.title=`${ys(i.crumbs[i.crumbs.length-1])} / PinkSea`,s();return}const r=i.crumbs.findIndex(o=>o.path===t.path);if(r>-1){i.crumbs.splice(r+1),document.title=`${ys(i.crumbs[r])} / PinkSea`,s();return}if(t.meta.resolveBreadcrumb===null||t.meta.resolveBreadcrumb===void 0){s();return}const a={path:t.path,i18n:await t.meta.resolveBreadcrumb(t.params)};document.title=`${ys(a)} / PinkSea`,i.crumbs.push(a),s()})},Ph={class:"bar"},Th=Oe({__name:"BreadCrumbBar",setup(e){const t=De(0),n=ur();return tn(()=>{ge.on("languageChanged",()=>{t.value+=1})}),(s,i)=>{const r=ns("RouterLink");return Z(),ce("div",Ph,[ye(r,{to:"/",class:"bar-current link"},{default:ut(()=>i[0]||(i[0]=[Ze("PinkSea")])),_:1}),(Z(),ce("span",{key:t.value},[(Z(!0),ce(Me,null,ss(he(n).crumbs,a=>(Z(),ce("span",{key:a.path},[i[1]||(i[1]=O("span",null," > ",-1)),ye(r,{to:a.path,class:"link"},{default:ut(()=>[Ze(ie(he(ys)(a)),1)]),_:2},1032,["to"])]))),128))]))])}}}),Ah=Xe(Th,[["__scopeId","data-v-e3e67a37"]]),Eh=["placeholder"],Rh=["placeholder","title"],Dh=Oe({__name:"LoginBar",setup(e){const t=De(""),n=De(""),s=wn("login-button"),i=async()=>{s.value.disabled=!0;const{data:r}=await it.call("com.shinolabs.pinksea.beginLoginFlow",{data:{handle:t.value,redirectUrl:`${location.origin}/callback`,password:n.value.length>0?n.value:null}});r.redirect!==null&&r.redirect!==void 0?document.location=r.redirect:(alert(`Failed to log in: ${r.failureReason}`),s.value.disabled=!1)};return(r,a)=>(Z(),ce("div",null,[ht(O("input",{type:"text",placeholder:he(ge).t("menu.input_placeholder"),"onUpdate:modelValue":a[0]||(a[0]=o=>t.value=o)},null,8,Eh),[[jn,t.value]]),ht(O("input",{type:"password",placeholder:he(ge).t("menu.password"),title:he(ge).t("menu.oauth2_info"),"onUpdate:modelValue":a[1]||(a[1]=o=>n.value=o)},null,8,Rh),[[jn,n.value]]),a[2]||(a[2]=O("br",null,null,-1)),O("button",{onClick:Ye(i,["prevent"]),ref:"login-button"},ie(r.$t("menu.atp_login")),513)]))}}),Ih={class:"container"},Fh={ref:"menu-ref"},Oh={class:"title"},Nh={class:"aside-box"},zh={key:0},Mh={class:"prompt"},$h={key:1,class:"prompt"},Uh={class:"aside-menu"},Bh={class:"aside-box bottom"},Vh=Oe({__name:"PanelLayout",setup(e){const t=or(),n=Lt(),s=lr(),i=rs(),r=wn("menu-ref"),a=Pe(()=>`/${t.did}`);tn(async()=>{if(n.token!=null&&t.handle==null)try{const{data:d}=await it.get("com.shinolabs.pinksea.getIdentity",{params:{},headers:{Authorization:`Bearer ${n.token}`}});t.did=d.did,t.handle=d.handle}catch{n.token=null}await ge.changeLanguage(n.lang)});const o=async()=>{s.restartPainting=!0,await l("/paint")},l=async d=>{await i.push(d)},u=async()=>{try{await it.call("com.shinolabs.pinksea.invalidateSession",{data:{},headers:{Authorization:`Bearer ${n.token}`}})}finally{n.token=null}},f=()=>{r.value.classList.toggle("in-view")};return(d,h)=>(Z(),ce("div",Ih,[O("main",null,[O("section",null,[ye(Ah,{class:"crumb"}),Wc(d.$slots,"default",{},void 0),O("button",{class:"menu-button",onClick:Ye(f,["prevent"])},"")])]),O("aside",Fh,[O("div",Oh,[O("h1",null,ie(d.$t("sidebar.title")),1),O("h2",null,ie(d.$t("sidebar.tag")),1)]),O("div",Nh,[he(n).token===null?(Z(),ce("div",zh,[O("div",Mh,ie(d.$t("menu.invitation")),1),ye(Dh)])):(Z(),ce("div",$h,ie(d.$t("menu.greeting",{name:he(t).handle})),1)),O("ul",Uh,[he(n).token!==null?(Z(),ce("li",{key:0,onClick:h[0]||(h[0]=Ye(p=>l(a.value),["prevent"]))},ie(d.$t("menu.my_oekaki")),1)):Dt("",!0),O("li",{onClick:h[1]||(h[1]=Ye(p=>l("/"),["prevent"]))},ie(d.$t("menu.recent")),1),O("li",{onClick:h[2]||(h[2]=Ye(p=>l("/settings"),["prevent"]))},ie(d.$t("menu.settings")),1),he(n).token!==null?(Z(),ce("li",{key:1,onClick:Ye(u,["prevent"])},ie(d.$t("menu.logout")),1)):Dt("",!0)]),he(n).token!==null?(Z(),ce("button",{key:2,onClick:Ye(o,["prevent"])},ie(d.$t("menu.create_something")),1)):Dt("",!0)]),O("div",Bh,ie(d.$t("sidebar.shinolabs")),1)],512)]))}}),_n=Xe(Vh,[["__scopeId","data-v-6f8d1145"]]),Hh=Oe({__name:"HomeView",setup(e){return(t,n)=>(Z(),je(_n,null,{default:ut(()=>[ye(cr,{endpoint:"com.shinolabs.pinksea.getRecent"})]),_:1}))}}),jh=Oe({__name:"CallbackView",setup(e){const t=rs(),n=De(),s=Lt();return tn(async()=>{try{const i=new URLSearchParams(window.location.search);s.token=i.get("code")}catch{s.token=null}finally{await t.replace("/")}}),(i,r)=>(Z(),ce("div",null,"Your code: "+ie(n.value),1))}}),Wh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"a shinonome laboratories project"},menu:{greeting:"Hi @{{name}}!",invitation:"Login to start creating!",input_placeholder:"@alice.bsky.social",password:"Password (Optional)",atp_login:"@ Login",my_oekaki:"My oekaki",recent:"Recent",settings:"Settings",logout:"Logout",create_something:"Create something",oauth2_info:"If you leave the password field blank, PinkSea will use OAuth2 to log into your PDS. It is generally more secure than password login."},breadcrumb:{recent:"recent",painter:"painter",settings:"your settings",user_profile:"{{handle}}'s profile",user_post:"{{handle}}'s post",tagged:"posts tagged #{{tag}}"},timeline:{by_before_handle:"By ",by_after_handle:""},post:{response_from_before_handle:"Response from ",response_from_after_handle:"",response_from_at_date:" at "},response_box:{login_to_respond:"Login to respond!",click_to_respond:"Click to open the drawing panel",open_painter:"Open painter",reply:"Reply!",cancel:"Cancel"},settings:{category_general:"general",general_language:"Language",category_sensitive:"sensitive media",sensitive_blur_nsfw:"Blur NSFW posts",sensitive_hide_nsfw:"Don't display NSFW posts"},painter:{do_you_want_to_restore:"The last upload has errored out and your image has been saved. Do you want to restore it?",could_not_send_post:"There was an issue uploading the post. Please try again later. Your post has been saved in your browser.",add_a_description:"Add a description!",tag:"Tag",crosspost_to_bluesky:"Cross-post to BlueSky",upload:"Upload!"},profile:{bluesky_profile:"Bluesky profile",domain:"Website"},tegakijs:{badDimensions:"Invalid dimensions.",promptWidth:"Canvas width in pixels",promptHeight:"Canvas height in pixels",confirmDelLayers:"Delete selected layers?",confirmMergeLayers:"Merge selected layers?",tooManyLayers:"Layer limit reached.",errorLoadImage:"Could not load the image.",noActiveLayer:"No active layer.",hiddenActiveLayer:"The active layer is not visible.",confirmCancel:"Are you sure? Your work will be lost.",confirmChangeCanvas:"Are you sure? Changing the canvas will clear all layers and history and disable replay recording.",color:"Color",size:"Size",alpha:"Opacity",flow:"Flow",zoom:"Zoom",layers:"Layers",switchPalette:"Switch color palette",paletteSlotReplace:"Right click to replace with the current color",layer:"Layer",addLayer:"Add layer",delLayers:"Delete layers",mergeLayers:"Merge layers",moveLayerUp:"Move up",moveLayerDown:"Move down",toggleVisibility:"Toggle visibility",newCanvas:"New",open:"Open",save:"Save",saveAs:"Save As",export:"Export",undo:"Undo",redo:"Redo",close:"Close",finish:"Finish",tip:"Tip",pressure:"Pressure",preserveAlpha:"Preserve Alpha",pen:"Pen",pencil:"Pencil",airbrush:"Airbrush",pipette:"Pipette",blur:"Blur",eraser:"Eraser",bucket:"Bucket",tone:"Tone",gapless:"Gapless",play:"Play",pause:"Pause",rewind:"Rewind",slower:"Slower",faster:"Faster",recordingEnabled:"Recording replay",errorLoadReplay:"Could not load the replay: ",loadingReplay:"Loading replay"}},Kh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"proyek shinonome laboratories"},menu:{greeting:"Hai @{{name}}!",invitation:"Masuk untuk mulai menggambar!",input_placeholder:"@handle.keren.mu",atp_login:"@ Masuk",my_oekaki:"Oekaki-ku",recent:"Terkini",settings:"Pengaturan",logout:"Keluar",create_something:"Mulai Menggambar"},breadcrumb:{recent:"terkini",painter:"media gambar",settings:"pengaturanmu",user_profile:"profil {{handle}}",user_post:"postingan {{handle}}",tagged:"postingan dengan tag #{{tag}}"},timeline:{by_before_handle:"Oleh ",by_after_handle:""},post:{response_from_before_handle:"Balasan dari ",response_from_after_handle:"",response_from_at_date:" pada "},response_box:{login_to_respond:"Masuk untuk membalas!",click_to_respond:"Klik untuk membuka panel media gambar",open_painter:"Buka media gambar",reply:"Balas!"},settings:{category_general:"Umum",general_language:"Bahasa",category_sensitive:"Media Sensitif",sensitive_blur_nsfw:"Kaburkan postingan NSFW",sensitive_hide_nsfw:"Jangan tunjukkan postingan NSFW"},painter:{do_you_want_to_restore:"Unggahan terakhir mengalami eror namun gambar terakhir sudah pernah tersimpan. Apakah kamu ingin mengembalikannya?",could_not_send_post:"Terjadi kesalahan saat mengunggah postingan. Silahkan coba lagi setelah menunggu sejenak. Untuk sementara postingan disimpan di browser.",add_a_description:"Tambahkan deskripsi!",tag:"Tag",upload:"Unggah!",crosspost_to_bluesky:"Post-silang ke BlueSky"},profile:{bluesky_profile:"Profil Bluesky",domain:"Situs web"}},Gh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"produkcja shinonome laboratories"},menu:{greeting:"Cze @{{name}}!",invitation:"Zaloguj si aby tworzy!",input_placeholder:"@alicja.bsky.social",atp_login:"@ Zaloguj",my_oekaki:"Moje oekaki",recent:"Ostatnie",settings:"Ustawienia",logout:"Wyloguj",create_something:"Stwrz nowe",password:"Haso (opcjonalne)",oauth2_info:"Jeeli zostawisz to pole puste, PinkSea uyje OAuth2 aby zalogowa si do twojego PDSa. Jest to bezpieczniejsze."},breadcrumb:{recent:"ostatnie",painter:"rysowanie",settings:"twoje ustawienia",user_profile:"profil {{handle}}",user_post:"post {{handle}}",tagged:"posty otagowane #{{tag}}"},timeline:{by_before_handle:"Post ",by_after_handle:""},post:{response_from_before_handle:"Odpowied ",response_from_after_handle:"",response_from_at_date:" dnia "},response_box:{login_to_respond:"Zaloguj si aby odpowiedzie!",click_to_respond:"Kliknij przycisk aby otworzy narzdzie do rysowania",open_painter:"Otwrz rysownik",reply:"Odpowiedz!",cancel:"Anuluj"},settings:{category_general:"oglne",general_language:"Jzyk",category_sensitive:"media",sensitive_blur_nsfw:"Zamazuj posty NSFW",sensitive_hide_nsfw:"Ukrywaj posty NSFW"},painter:{do_you_want_to_restore:"Ostatnia prba wysania posta zakoczya si niepowodzeniem i zapisano Twoj ostatni prb. Czy j otworzy?",could_not_send_post:"Wystpi bd podczas wysyania posta. Prosimy sprbowa pniej. Twj post zosta zapisany w przegldarce.",add_a_description:"Dodaj opis!",tag:"Tag",crosspost_to_bluesky:"Wylij dodatkowo na BlueSky",upload:"Wylij!"},profile:{bluesky_profile:"Profil Bluesky",domain:"Strona internetowa"},tegakijs:{badDimensions:"Niepoprawny rozmiar.",promptWidth:"Szeroko obrazu w pikselach",promptHeight:"Wysoko obrazu w pikselach",confirmDelLayers:"Usun wybrane warstwy?",confirmMergeLayers:"Zczy wybrane warstwy?",tooManyLayers:"Osignito limit warstw.",errorLoadImage:"Napotkano bd podczas adowania zdjcia.",noActiveLayer:"Brak aktywnej warstwy.",hiddenActiveLayer:"Aktywna warstwa jest ukrytwa.",confirmCancel:"Czy zamkn edytor? Zamknicie edytora kasuje wszystkie zmiany.",confirmChangeCanvas:"Czy zmieni obraz? Zmiana obrazu wyczyci wszystkie warstwy, histori oraz wyczy odtwarzanie nagra.",color:"Kolor",size:"Rozmiar",alpha:"Przezroczysto",flow:"Pynno",zoom:"Powikszenie",layers:"Warstwy",switchPalette:"Zmie palet kolorw",paletteSlotReplace:"Kliknij prawym przyciskiem myszy aby zamieni z aktywnym kolorem",layer:"Warstwa",addLayer:"Dodaj warstw",delLayers:"Usu warstwy",mergeLayers:"Zcz warstwy",moveLayerUp:"Przesu w gr",moveLayerDown:"Przesu w d",toggleVisibility:"Zmie widoczno",newCanvas:"Nowy",open:"Otwrz",save:"Zapisz",saveAs:"Zapisz jako",export:"Eksportuj",undo:"Cofnij",redo:"Powtrz",close:"Zamknij",finish:"Zatwierd",tip:"Kocwka",pressure:"Nacisk",preserveAlpha:"Zachowaj kana alfa",pen:"Pdzel",pencil:"Owek",airbrush:"Aerograf",pipette:"Probwka",blur:"Rozmycie",eraser:"Gumka",bucket:"Wiadro z farb",tone:"Ton",gapless:"Bez przerw",play:"Odtwrz",pause:"Pauza",rewind:"Przewi",slower:"Wolniej",faster:"Szybciej",recordingEnabled:"Nagrywanie odtwarzania",errorLoadReplay:"Nie mona odtworzy nagrania: ",loadingReplay:"adowanie nagrania"}},Jh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:" shinonome laboratories"},menu:{greeting:"@{{name}} ",invitation:"",input_placeholder:"@ID.bsky.social",atp_login:"",my_oekaki:"",recent:"",settings:"",logout:"",create_something:"",password:""},breadcrumb:{recent:"",painter:"",settings:"PinkSea",user_profile:"{{handle}} ",user_post:"{{handle}} ",tagged:"#{{tag}} "},timeline:{by_before_handle:" ",by_after_handle:""},post:{response_from_before_handle:" ",response_from_after_handle:"",response_from_at_date:"  "},response_box:{login_to_respond:"",click_to_respond:"",open_painter:"",reply:"",cancel:""},settings:{category_general:"",general_language:"",category_sensitive:"",sensitive_blur_nsfw:"NSFW",sensitive_hide_nsfw:"NSFW"},painter:{do_you_want_to_restore:"",could_not_send_post:"",add_a_description:"",tag:"",upload:"",crosspost_to_bluesky:"BlueSky"},profile:{bluesky_profile:"Bluesky"},tegakijs:{badDimensions:"",promptWidth:"px",promptHeight:"px",confirmDelLayers:"",confirmMergeLayers:"",tooManyLayers:"",errorLoadImage:"",noActiveLayer:"",hiddenActiveLayer:"",confirmCancel:"",confirmChangeCanvas:"",color:"",size:"",alpha:"",flow:"",zoom:"",layers:"",switchPalette:"",paletteSlotReplace:"",layer:"",addLayer:"",delLayers:"",mergeLayers:"",moveLayerUp:"",moveLayerDown:"",toggleVisibility:"",newCanvas:"",open:"",save:"",saveAs:"",export:"",undo:"",redo:"",close:"",finish:"",tip:"",pressure:"",preserveAlpha:"",pen:"",pencil:"",airbrush:"",pipette:"",blur:"",eraser:"",bucket:"",tone:"",gapless:"",play:"",pause:"",rewind:"",slower:"",faster:"",recordingEnabled:"",errorLoadReplay:": ",loadingReplay:""}},qh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"ein Shinonome Laboratories Projekt"},menu:{greeting:"Hi @{{name}}!",invitation:"Einloggen zum Zeichnen!",input_placeholder:"@deine.coole.tld",atp_login:"@ Login",my_oekaki:"Meine Oekaki",recent:"Neuste",settings:"Einstellungen",logout:"Ausloggen",create_something:"Zeichne etwas"},breadcrumb:{recent:"Neuste",painter:"Zeichner",settings:"Deine Einstellungen",user_profile:"{{handle}}'s Profil",user_post:"{{handle}}'s Post",tagged:"Posts getagged mit #{{tag}}"},timeline:{by_before_handle:"Von ",by_after_handle:""},post:{response_from_before_handle:"Antwort von ",response_from_after_handle:"",response_from_at_date:" am "},response_box:{login_to_respond:"Einloggen zum Antworten!",click_to_respond:"Klicke, um das Zeichenpanel zu ffnen",open_painter:"Zeichner ffnen",reply:"Antworten!"},settings:{category_general:"Allgemein",general_language:"Sprache",category_sensitive:"sensible Medien",sensitive_blur_nsfw:"NSFW Posts unscharf machen",sensitive_hide_nsfw:"NSFW Posts ausblenden"}},Yh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"Un projet des laboratoires Shinonome"},menu:{greeting:"Salut @{{name}}!",invitation:"Connecte toi pour dessiner!",input_placeholder:"@your.cool.tld",atp_login:"@ Connexion",my_oekaki:"Mon oekaki",recent:"Rcent",settings:"Paramtres",logout:"Dconnexion",create_something:"Crer quelque chose"},breadcrumb:{recent:"rcent",painter:"dessinateur",settings:"vos paramtres",user_profile:"profil de {{handle}}",user_post:"publications de {{handle}}",tagged:"publications tagues #{{tag}}"},timeline:{by_before_handle:"Par ",by_after_handle:""},post:{response_from_before_handle:"Rponse de ",response_from_after_handle:"",response_from_at_date:"  "},response_box:{login_to_respond:"Connecte toi pour rpondre!",click_to_respond:"Cliquez pour ouvrir le dessinateur",open_painter:"Ouvrir le dessinateur",reply:"Rpondre!"},settings:{category_general:"gnral",general_language:"Langage",category_sensitive:"Mdias sensibles",sensitive_blur_nsfw:"Flouter les publications NSFW",sensitive_hide_nsfw:"Ne pas afficher les publications NSFW"},painter:{do_you_want_to_restore:"La dernire tentative d'envoi de la publication a chou et votre image a t sauvegarde. Voulez-vous la restaurer?",could_not_send_post:"Il y a eu un problme lors de l'envoi de la publication. Veuillez ressayer plus tard. Votre publication a t sauvegard dans votre navigateur."},profile:{bluesky_profile:"Profil Bluesky"}},Zh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"Una produzione Shinonome Laboratories"},menu:{greeting:"Salve @{{name}}!",invitation:"Accedi per iniziare a creare!",input_placeholder:"@il-tuo-handle.bsky.social",atp_login:"@ Accedi",my_oekaki:"Il Mio Oekaki",recent:"Recente",settings:"Impostazioni",logout:"Disconnetti",create_something:"Crea Qualcosa"},breadcrumb:{recent:"recente",painter:"bozzetto",settings:"le tue impostazioni",user_profile:"profilo di {{handle}}",user_post:"pubblicazione di {{handle}}",tagged:"pubblicazioni taggate #{{tag}}"},timeline:{by_before_handle:"Fatto Da ",by_after_handle:""},post:{response_from_before_handle:"Risposta Fatta Da ",response_from_after_handle:"",response_from_at_date:" alle "},response_box:{login_to_respond:"Accedi per rispondere!",click_to_respond:"Clicca per aprire il pannello da disegno",open_painter:"Apri Bozzetto",reply:"Rispondi!"},settings:{category_general:"generale",general_language:"Lingua",category_sensitive:"materiale sensibile",sensitive_blur_nsfw:"Sfoca pubblicazioni NSFW",sensitive_hide_nsfw:"Non mostrare pubblicazioni NSFW"},painter:{do_you_want_to_restore:"L'ultimo caricamento ha avuto un' errore e la tua immagine  stata salvata. Vuoi ripristinarlo?",could_not_send_post:"C' stato un problema con il caricamento della tua pubblicazione. Riprova dopo, perfavore. La tua pubblicazione  stata salvata nel tuo browser."},profile:{bluesky_profile:"Profilo Bluesky"}},Xh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"ett shinonome laboratories project"},menu:{greeting:"Hej @{{name}}!",invitation:"Logga in och brja skapa",input_placeholder:"@alice.bsky.social",atp_login:"@ Login",my_oekaki:"Min oekaki",recent:"Senaste",settings:"Instllningar",logout:"Logga ut",create_something:"Skapa ngot"},breadcrumb:{recent:"senaste",painter:"tecknare",settings:"dina instllningar",user_profile:"{{handle}}'s profil",user_post:"{{handle}}'s inlgg",tagged:"inlgg mrkta #{{tag}}"},timeline:{by_before_handle:"Av ",by_after_handle:""},post:{response_from_before_handle:"Svar frn ",response_from_after_handle:"",response_from_at_date:" vid "},response_box:{login_to_respond:"Logga in fr att svara!",click_to_respond:"Klicka fr att ppna ritpanelen",open_painter:"ppna tecknare",reply:"Svara!",cancel:"Avbryt"},settings:{category_general:"allmnt",general_language:"Sprk",category_sensitive:"sensitive media",sensitive_blur_nsfw:"Gr NSFW inlgg suddiga",sensitive_hide_nsfw:"Visa inte NSFW inlgg"},painter:{do_you_want_to_restore:"Den senaste uppladdningen har gett ett felmeddelande och din bild har sparats. Vill du terstlla det?",could_not_send_post:"Det uppstod problem vid publiceringen av inlgget. Frsk igen senare. Ditt inlgg har sparats i din webblsare.",add_a_description:"Lgg till beskrivning!",tag:"Tagg",crosspost_to_bluesky:"Kors-publicera till BlueSky",upload:"Ladda up!"},profile:{bluesky_profile:"Bluesky profil",domain:"Hemsida"}},Qh={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"un proyecto de laboratorios shinonome"},menu:{greeting:"Hola @{{name}}!",invitation:"Inicia sesin para empezar a crear!",input_placeholder:"@alice.bsky.social",atp_login:"@ Acceso",my_oekaki:"Mi oekaki",recent:"Recientes",settings:"Configuracin",logout:"Cerrar sesin",create_something:"Crea algo"},breadcrumb:{recent:"recientes",painter:"pintor",settings:"tus configuraciones",user_profile:"perfl de {{handle}}",user_post:"posteos de {{handle}}",tagged:"posteos con el tag #{{tag}}"},timeline:{by_before_handle:"Por ",by_after_handle:""},post:{response_from_before_handle:"Respuesta de ",response_from_after_handle:"",response_from_at_date:" el da "},response_box:{login_to_respond:"Inicia sesin para responder!",click_to_respond:"Presiona para abrir el panel de dibujo",open_painter:"Abrir pintor",reply:"Responde!",cancel:"Cancelar"},settings:{category_general:"general",general_language:"Lenguaje",category_sensitive:"contenido sensible",sensitive_blur_nsfw:"Nublar posteos NSFW",sensitive_hide_nsfw:"No mostrar posteos NSFW"},painter:{do_you_want_to_restore:"La carga fall debido a un error, pero tu imagen ha sido guardada. Deseas recuperarla?",could_not_send_post:"La subida de tu posteo ha tenido un problema. Por favor intentalo nuevamente en un rato. El posteo ha sido guardado en tu explorador.",add_a_description:"Incluye una descripcin!",tag:"Tag",crosspost_to_bluesky:"Postear tambin en BlueSky",upload:"Subirlo!"},profile:{bluesky_profile:"Perfil en Bluesky",domain:"Sitio web"}},ep={sidebar:{title:"PinkSea",tag:"oekaki BBS",shinolabs:"  shinonome laboratories"},menu:{greeting:" @{{name}}!",invitation:",     !",input_placeholder:"@alice.bsky.social",atp_login:"@ ",my_oekaki:" ",recent:"",settings:"",logout:"",create_something:" "},breadcrumb:{recent:"",painter:"",settings:" ",user_profile:"  {{handle}}",user_post:"  {{handle}}",tagged:"   #{{tag}}"},timeline:{by_before_handle:" ",by_after_handle:""},post:{response_from_before_handle:"  ",response_from_after_handle:"",response_from_at_date:"  "},response_box:{login_to_respond:",   !",click_to_respond:",      ",open_painter:"",reply:"!",cancel:""},settings:{category_general:"",general_language:"",category_sensitive:"",sensitive_blur_nsfw:"   ",sensitive_hide_nsfw:"     "},painter:{do_you_want_to_restore:"        .     ?",could_not_send_post:"     . ,   -.       .",add_a_description:"  !",tag:"",crosspost_to_bluesky:"  ",upload:"!"},profile:{bluesky_profile:"  ",domain:""}},tp={sidebar:{title:"PinkSea",tag:"",shinolabs:" shinonome laboratories "},menu:{greeting:" @{{name}}",invitation:"",input_placeholder:"@alice.bsky.social",password:"",atp_login:"",my_oekaki:"",recent:"",settings:"",logout:"",create_something:"",oauth2_info:"PinkSea  OAuth2  PDS"},breadcrumb:{recent:"",painter:"",settings:"Pinksea ",user_profile:"{{handle}} ",user_post:"{{handle}} ",tagged:" #{{tag}} "},timeline:{by_before_handle:" ",by_after_handle:""},post:{response_from_before_handle:"",response_from_after_handle:"  ",response_from_at_date:""},response_box:{login_to_respond:"",click_to_respond:"",open_painter:"",reply:"",cancel:""},settings:{category_general:"",general_language:"",category_sensitive:"",sensitive_blur_nsfw:" NSFW ",sensitive_hide_nsfw:" NSFW "},painter:{do_you_want_to_restore:"",could_not_send_post:"",add_a_description:"",tag:"",crosspost_to_bluesky:" Bluesky",upload:""},profile:{bluesky_profile:"Bluesky ",domain:""},tegakijs:{badDimensions:"",promptWidth:"",promptHeight:"",confirmDelLayers:"",confirmMergeLayers:"",tooManyLayers:"",errorLoadImage:"",noActiveLayer:"",hiddenActiveLayer:"",confirmCancel:"",confirmChangeCanvas:"",color:"",size:"",alpha:"",flow:"",zoom:"/",layers:"",switchPalette:"",paletteSlotReplace:"",layer:"",addLayer:"",delLayers:"",mergeLayers:"",moveLayerUp:"",moveLayerDown:"",toggleVisibility:"",newCanvas:"",open:"",save:"",saveAs:"",export:"",undo:"",redo:"",close:"",finish:"",tip:"",pressure:"",preserveAlpha:" Alpha ",pen:"",pencil:"",airbrush:"",pipette:"",blur:"",eraser:"",bucket:"",tone:"",gapless:"",play:"",pause:"",rewind:"",slower:"",faster:"",recordingEnabled:"",errorLoadReplay:"",loadingReplay:""}},Zt={en:{name:"English",translation:Wh},id:{name:"Bahasa Indonesia",translation:Kh},pl:{name:"Polski",translation:Gh},ja:{name:"",translation:Jh},de:{name:"Deutsch",translation:qh},fr:{name:"Franais",translation:Yh},it:{name:"Italiano",translation:Zh},sv:{name:"Svenska",translation:Xh},es:{name:"Espaol",translation:Qh},bg:{name:"",translation:ep},"zh-CN":{name:"",translation:tp}};function te(){let e=Lt().lang,t;try{Zt[e].translation.tegakijs!==null&&Zt[e].translation.tegakijs!==void 0?t=Zt[e].translation.tegakijs:t=Zt.en.translation.tegakijs}catch{t=Zt.en.translation.tegakijs}return t}class fr{constructor(){this.id=0,this.name=null,this.keybind=null,this.useFlow=!1,this.useSizeDynamics=!1,this.useAlphaDynamics=!1,this.useFlowDynamics=!1,this.usePreserveAlpha=!1,this.step=0,this.size=1,this.alpha=1,this.flow=1,this.useSize=!0,this.useAlpha=!0,this.useFlow=!0,this.noCursor=!1,this.color="#000000",this.rgb=[0,0,0],this.brushSize=0,this.brushAlpha=0,this.brushFlow=0,this.stepSize=0,this.center=0,this.sizeDynamicsEnabled=!1,this.alphaDynamicsEnabled=!1,this.flowDynamicsEnabled=!1,this.preserveAlphaEnabled=!1,this.tip=-1,this.tipList=null,this.stepAcc=0,this.shapeCache=null,this.kernel=null}brushFn(t,n,s,i){}start(t,n){}commit(){}draw(t,n){}usesDynamics(){return this.useSizeDynamics||this.useAlphaDynamics||this.useFlowDynamics}enabledDynamics(){return this.sizeDynamicsEnabled||this.alphaDynamicsEnabled||this.flowDynamicsEnabled}setSize(t){this.size=t}setAlpha(t){this.alpha=t,this.brushAlpha=t}setFlow(t){this.flow=t,this.brushFlow=this.easeFlow(t)}easeFlow(t){return t}setColor(t){this.rgb=g.hexToRgb(t)}setSizeDynamics(t){this.useSizeDynamics&&(t||this.setSize(this.size),this.sizeDynamicsEnabled=t)}setAlphaDynamics(t){this.useAlphaDynamics&&(t||this.setAlpha(this.alpha),this.alphaDynamicsEnabled=t)}setFlowDynamics(t){this.useFlowDynamics&&(t||this.setFlow(this.flow),this.flowDynamicsEnabled=t)}setPreserveAlpha(t){this.preserveAlphaEnabled=t}set(){this.setAlpha(this.alpha),this.setFlow(this.flow),this.setSize(this.size),this.setColor(c.toolColor),c.onToolChanged(this)}}class as extends fr{constructor(){super()}generateShape(t){}brushFn(t,n,s,i){var r,a,o,l,u,f,d,h,p,v,b,L,S,C,x,w,N,W,F,R,$,K,re,Q,le,fe,Se,oe,q;for(q=this.preserveAlphaEnabled,f=this.kernel,Se=this.brushAlpha,oe=this.brushFlow,fe=this.brushSize,r=c.activeLayer.imageData.data,a=c.ghostBuffer.data,o=c.blendBuffer.data,l=c.baseWidth,u=c.baseHeight,x=this.rgb[0],w=this.rgb[1],N=this.rgb[2],h=0;h<fe;++h)if(v=n+h+i,!(v<0||v>=u))for(d=0;d<fe;++d)p=t+d+s,!(p<0||p>=l)&&(L=f[(h*fe+d)*4+3]/255,!(L<=0)&&(Q=(v*l+p)*4,C=o[Q+3]/255,C=C+L*oe*(Se-C),le=Math.ceil(C*255),le>o[Q+3]&&(o[Q]===0&&(a[Q]=r[Q],a[Q+1]=r[Q+1],a[Q+2]=r[Q+2],a[Q+3]=r[Q+3]),o[Q]=1,o[Q+3]=le,$=a[Q],K=a[Q+1],re=a[Q+2],b=a[Q+3]/255,S=b+C-b*C,W=(x*C+$*b*(1-C))/S,F=(w*C+K*b*(1-C))/S,R=(N*C+re*b*(1-C))/S,r[Q]=x>$?Math.ceil(W):Math.floor(W),r[Q+1]=w>K?Math.ceil(F):Math.floor(F),r[Q+2]=N>re?Math.ceil(R):Math.floor(R),q||(r[Q+3]=Math.ceil(S*255)))))}generateShapeCache(t){var n,s;if(this.shapeCache||(this.shapeCache=new Array(c.maxSize)),!(this.shapeCache[0]&&!t))for(n=0;n<c.maxSize;++n)s=this.generateShape(n+1),this.shapeCache[n]=s,this.setShape(s)}updateDynamics(t){var n,s,i;if(n=dt.lerp(t),this.sizeDynamicsEnabled){if(i=Math.ceil(n*this.size),i===0)return!1;s=this.shapeCache[i-1],this.setShape(s)}if(this.alphaDynamicsEnabled){if(i=this.alpha*n,i<=0)return!1;this.brushAlpha=i}if(this.flowDynamicsEnabled){if(i=this.flow*n,i<=0)return!1;this.brushFlow=this.easeFlow(i)}return!0}start(t,n){var s,i;this.stepAcc=0,this.posX=t,this.posY=n,!(this.enabledDynamics()&&!this.updateDynamics(1))&&(s=t-this.center,i=n-this.center,this.readImageData(s,i,this.brushSize,this.brushSize),this.brushFn(0,0,s,i),this.writeImageData(s,i,this.brushSize,this.brushSize))}commit(){c.clearBuffers()}draw(t,n){var s,i,r,a,o,l,u,f,d,h,p,v,b,L,S,C,x,w,N,W,F;for(p=this.stepAcc,r=this.posX,a=this.posY,r<t?(u=t-r,o=r,s=1):(u=r-t,o=t,s=-1),a<n?(f=n-a,l=a,i=1):(f=a-n,l=n,i=-1),this.enabledDynamics()&&(L=Math.sqrt((t-r)*(t-r)+(n-a)*(n-a))),this.sizeDynamicsEnabled?(S=this.shapeCache[this.size-1],C=S.center,x=S.brushSize):(C=this.center,x=this.brushSize),o-=C,l-=C,W=u+x,F=f+x,this.readImageData(o,l,W,F),d=(u>f?u:f!==0?-f:0)/2,u!==0&&(u=-u),N=!1,v=r,b=a;p+=Math.max(Math.abs(v-r),Math.abs(b-a)),v=r,b=a,p>=this.stepSize&&(this.enabledDynamics()?(L>0?w=1-Math.sqrt((t-r)*(t-r)+(n-a)*(n-a))/L:w=0,this.updateDynamics(w)&&(this.brushFn(r-this.center-o,a-this.center-l,o,l),N=!0)):(this.brushFn(r-this.center-o,a-this.center-l,o,l),N=!0),p=0),!(r===t&&a===n);)h=d,h>u&&(d-=f,r+=s),h<f&&(d-=u,a+=i);this.stepAcc=p,this.posX=t,this.posY=n,N&&this.writeImageData(o,l,W,F)}writeImageData(t,n,s,i){c.activeLayer.ctx.putImageData(c.activeLayer.imageData,0,0,t,n,s,i)}readImageData(t,n,s,i){}setShape(t){this.center=t.center,this.stepSize=t.stepSize,this.brushSize=t.brushSize,this.kernel=t.kernel}setSize(t){this.size=t,this.sizeDynamicsEnabled?this.generateShapeCache():this.setShape(this.generateShape(t))}setSizeDynamics(t){this.useSizeDynamics&&this.sizeDynamicsEnabled!==t&&(t?this.generateShapeCache():this.setShape(this.generateShape(this.size)),this.sizeDynamicsEnabled=t)}setTip(t){this.tipId=t,this.sizeDynamicsEnabled?this.generateShapeCache(!0):this.setShape(this.generateShape(this.size))}}class Gs extends as{constructor(){super(),this.id=1,this.name="pencil",this.keybind="b",this.step=.01,this.useFlow=!1,this.size=1,this.alpha=1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.usePreserveAlpha=!0}generateShape(t){var n,s,i,r,a,o,l,u,f;for(u=0|t/2,f=0|(t+1)%2,r=new ImageData(t,t),a=new Uint32Array(r.data.buffer),l=4278190080,s=u,i=0,n=1-u,o=u;s>=i;)a[o+s-f+(o+i-f)*t]=l,a[o+i-f+(o+s-f)*t]=l,a[o-i+(o+s-f)*t]=l,a[o-s+(o+i-f)*t]=l,a[o-i+(o-s)*t]=l,a[o-s+(o-i)*t]=l,a[o+i-f+(o-s)*t]=l,a[o+s-f+(o-i)*t]=l,++i,n<=0?n+=2*i+1:(s--,n+=2*(i-s)+1);return u>0&&c.tools.bucket.fill(r,u,u,this.rgb,1),{center:u,stepSize:Math.ceil(t*this.step),brushSize:t,kernel:r.data}}}class cl extends as{constructor(){super(),this.id=3,this.name="airbrush",this.keybind="a",this.step=.1,this.size=32,this.alpha=1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.useFlowDynamics=!0,this.usePreserveAlpha=!0}easeFlow(t){return 1-Math.sqrt(1-t)}generateShape(t){var n,s,i,r,a,o,l,u,f,d,h,p;for(s=t,t=t*2,i=new ImageData(t,t).data,r=t*t*4,o=Math.sqrt(s*s),l=Math.round(s),u=f=-l,n=0;n<r;){if(u>=l){u=-l,++f;continue}d=u,h=f,d<0&&(d=-d),h<0&&(h=-h),a=Math.sqrt(d*d+h*h),a>=o?p=0:a===0?p=255:(p=a/o+.1,p>1&&(p=1),p=(1-Math.exp(1-1/p)/p)*255),i[n+3]=p,n+=4,++u}return{center:s,stepSize:Math.ceil(t*this.step),brushSize:t,kernel:i}}}class ul extends as{constructor(){super(),this.id=2,this.name="pen",this.keybind="p",this.step=.05,this.size=8,this.alpha=1,this.flow=1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.useFlowDynamics=!0,this.usePreserveAlpha=!0}easeFlow(t){return 1-Math.sqrt(1-Math.pow(t,3))}generateShape(t){var n,s,i,r,a,o,l,u,f,d,h,p,v,b,L,S,C,x,w;for(x=Math.floor(t/2)+1,w=t+2,d=4,h=d*d,p=w*d,u=Math.floor(p/2),f=Math.floor((p+1)%2),r=new ImageData(p,p),v=new Uint32Array(r.data.buffer),l=1426063360,s=u,i=0,n=1-u,o=u;s>=i;)v[o+s-f+(o+i-f)*p]=l,v[o+i-f+(o+s-f)*p]=l,v[o-i+(o+s-f)*p]=l,v[o-s+(o+i-f)*p]=l,v[o-i+(o-s)*p]=l,v[o-s+(o-i)*p]=l,v[o+i-f+(o-s)*p]=l,v[o+s-f+(o-i)*p]=l,++i,n<=0?n+=2*i+1:(s--,n+=2*(i-s)+1);for(l=4278190080,s=u-3,i=0,n=1-u,o=u;s>=i;)v[o+s-f+(o+i-f)*p]=l,v[o+i-f+(o+s-f)*p]=l,v[o-i+(o+s-f)*p]=l,v[o-s+(o+i-f)*p]=l,v[o-i+(o-s)*p]=l,v[o-s+(o-i)*p]=l,v[o+i-f+(o-s)*p]=l,v[o+s-f+(o-i)*p]=l,++i,n<=0?n+=2*i+1:(s--,n+=2*(i-s)+1);for(u>0&&c.tools.bucket.fill(r,u,u,this.rgb,1),v=r.data,a=new ImageData(w,w).data,s=0;s<w;++s)for(i=0;i<w;++i){for(b=(i*w+s)*4+3,l=0,S=0;S<d;++S)for(C=0;C<d;++C)L=((C+i*d)*p+(S+s*d))*4+3,l+=v[L];a[b]=l/h}return{center:x,stepSize:Math.ceil(t*this.step),brushSize:w,kernel:a}}}class np extends fr{constructor(){super(),this.id=4,this.name="bucket",this.keybind="g",this.step=100,this.useSize=!1,this.useFlow=!1,this.noCursor=!0}fill(t,n,s,i,r){var a,o,l,u,f,d,h,p,v,b,L,S,C,x,w,N,W,F,R,$,K;for($=t.width,K=t.height,a=i[0],o=i[1],l=i[2],u=(s*$+n)*4,R=t.data,f=R[u],d=R[u+1],h=R[u+2],p=R[u+3],b=new Uint8Array($*K*4),v=[],v[0]=n,v[1]=s;v.length;){for(L=v.pop(),S=v.pop(),C=L-1,x=L+1,w=L*$,N=C*$,W=x*$,F=S;F>=0&&(u=(w+F)*4,!!this.testPixel(R,u,b,f,d,h,p));)this.blendPixel(R,u,a,o,l,r),b[u]=1,C>=0&&(u=(N+F)*4,this.testPixel(R,u,b,f,d,h,p)&&(v.push(F),v.push(C))),x<K&&(u=(W+F)*4,this.testPixel(R,u,b,f,d,h,p)&&(v.push(F),v.push(x))),F--;for(F=S+1;F<$&&(u=(w+F)*4,!!this.testPixel(R,u,b,f,d,h,p));)this.blendPixel(R,u,a,o,l,r),b[u]=1,C>=0&&(u=(N+F)*4,this.testPixel(R,u,b,f,d,h,p)&&(v.push(F),v.push(C))),x<K&&(u=(W+F)*4,this.testPixel(R,u,b,f,d,h,p)&&(v.push(F),v.push(x))),++F}}brushFn(t,n){t<0||n<0||t>=c.baseWidth||n>=c.baseHeight||(this.fill(c.activeLayer.imageData,t,n,this.rgb,this.alpha),c.activeLayer.ctx.putImageData(c.activeLayer.imageData,0,0))}blendPixel(t,n,s,i,r,a){var o,l,u,f,d,h,p,v;o=t[n],l=t[n+1],u=t[n+2],f=t[n+3]/255,v=f+a-f*a,d=(s*a+o*f*(1-a))/v,h=(i*a+l*f*(1-a))/v,p=(r*a+u*f*(1-a))/v,t[n]=s>o?Math.ceil(d):Math.floor(d),t[n+1]=i>l?Math.ceil(h):Math.floor(h),t[n+2]=r>u?Math.ceil(p):Math.floor(p),t[n+3]=Math.ceil(v*255)}testPixel(t,n,s,i,r,a,o){return!s[n]&&t[n]==i&&t[++n]==r&&t[++n]==a&&t[++n]==o}start(t,n){this.brushFn(t,n)}draw(t,n){this.brushFn(t,n)}setSize(t){}}class sp extends Gs{constructor(){super(),this.id=5,this.name="tone",this.keybind="t",this.step=.01,this.useFlow=!1,this.size=8,this.alpha=.5,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.usePreserveAlpha=!0,this.matrix=[[0,8,2,10],[12,4,14,6],[3,11,1,9],[15,7,13,5]],this.mapCache=null,this.mapWidth=0,this.mapHeight=0}start(t,n){(this.mapWidth!==c.baseWidth||this.mapHeight!==c.baseHeight)&&this.generateMapCache(!0),super.start(t,n)}brushFn(t,n,s,i){var r,a,o,l,u,f,d,h,p,v,b,L,S,C;if(r=c.activeLayer.imageData.data,S=c.baseWidth,C=c.baseHeight,a=this.kernel,o=this.brushSize,this.mapWidth,f=this.preserveAlphaEnabled,u=Math.round(this.brushAlpha*16)-1,!(u<0)){for(l=this.mapCache[u],v=0;v<o;++v)if(L=n+v+i,!(L<0||L>=C))for(p=0;p<o;++p)b=t+p+s,!(b<0||b>=S)&&a[(v*o+p)*4+3]!==0&&(h=L*S+b,d=h*4,l[h]===0&&(r[d]=this.rgb[0],r[d+1]=this.rgb[1],r[d+2]=this.rgb[2],f||(r[d+3]=255)))}}generateMap(t,n,s){var i,r,a;for(i=new Uint8Array(t*n),a=0;a<n;++a)for(r=0;r<t;++r)s<this.matrix[a%4][r%4]&&(i[t*a+r]=1);return i}generateMapCache(t){var n,s;if(s=this.matrix.length*this.matrix[0].length,this.mapCache||(this.mapCache=new Array(s)),!(!t&&this.mapCache[0]&&this.mapWidth===c.baseWidth&&this.mapHeight===c.baseHeight))for(this.mapWidth=c.baseWidth,this.mapHeight=c.baseHeight,n=0;n<s;++n)this.mapCache[n]=this.generateMap(this.mapWidth,this.mapHeight,n)}setAlpha(t){super.setAlpha(t),this.generateMapCache()}}class ip extends fr{constructor(){super(),this.id=6,this.name="pipette",this.keybind="i",this.step=100,this.useSize=!1,this.useAlpha=!1,this.useFlow=!1,this.noCursor=!0}start(t,n){this.draw(t,n)}draw(t,n){var s,i;i=c.flatten().getContext("2d"),s=g.getColorAt(i,t,n),c.setToolColor(s)}set(){c.onToolChanged(this)}commit(){}setSize(){}setAlpha(){}}class fl extends as{constructor(){super(),this.id=7,this.name="blur",this.step=.25,this.useFlow=!1,this.size=32,this.alpha=.5,this.useAlphaDynamics=!0,this.usePreserveAlpha=!1}writeImageData(t,n,s,i){var r,a,o,l,u,f,d,h;for(d=c.activeLayer.imageData.data,h=c.blendBuffer.data,f=c.baseWidth,r=0;r<s;++r)for(o=t+r,a=0;a<i;++a)l=n+a,u=(l*f+o)*4,d[u]=h[u],d[u+1]=h[u+1],d[u+2]=h[u+2],d[u+3]=h[u+3];super.writeImageData(t,n,s,i)}readImageData(t,n,s,i){var r,a,o,l,u,f,d,h;for(d=c.activeLayer.imageData.data,h=c.blendBuffer.data,f=c.baseWidth,r=0;r<s;++r)for(o=t+r,a=0;a<i;++a)l=n+a,u=(l*f+o)*4,h[u]=d[u],h[u+1]=d[u+1],h[u+2]=d[u+2],h[u+3]=d[u+3]}brushFn(t,n,s,i){var r,a,o,l,u,f,d,h,p,v,b,L,S,C,x,w,N,W,F,R,$,K,re,Q,le,fe;if(v=this.brushAlpha,p=v*v*v,!(p<=0)){for(o=this.brushSize,h=this.kernel,l=c.activeLayer.imageData.data,u=c.blendBuffer.data,S=c.baseWidth,C=c.baseHeight,f=S-1,d=C-1,x=0;x<o;++x)if(b=t+x+s,!(b<0||b>=S)){for(w=0;w<o;++w)if(L=n+w+i,!(L<0||L>=C)&&(r=(w*o+x)*4,re=(L*S+b)*4,!(h[r+3]===0||b<=0||L<=0||b>=f||L>=d))){for(N=W=F=R=le=0,$=-1;$<2;++$)for(K=-1;K<2;++K)a=((L-K)*S+(b-$))*4,Q=l[a+3],$===0&&K===0?(fe=Q*v,le+=v):(fe=Q*p,le+=p),N=N+l[a]*fe,++a,W=W+l[a]*fe,++a,F=F+l[a]*fe,R=R+fe;R=R/le,!(R<=0)&&(u[re]=Math.round(N/le/R),u[re+1]=Math.round(W/le/R),u[re+2]=Math.round(F/le/R),u[re+3]=Math.round(R))}}}}}fl.prototype.generateShape=Gs.prototype.generateShape;class Js extends as{constructor(){super(),this.id=8,this.name="eraser",this.keybind="e",this.step=.1,this.size=8,this.alpha=1,this.useFlow=!1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.usePreserveAlpha=!1,this.tipId=0,this.tipList=["pencil","pen","airbrush"]}brushFn(t,n,s,i){var r,a,o,l,u,f,d,h,p,v,b,L,S,C,x;for(x=this.brushAlpha,C=this.brushSize,l=this.kernel,r=c.activeLayer.imageData.data,o=c.ghostBuffer.data,a=c.blendBuffer.data,u=c.baseWidth,f=c.baseHeight,b=0;b<C;++b)if(S=n+b+i,!(S<0||S>=f))for(v=0;v<C;++v)L=t+v+s,!(L<0||L>=u)&&(d=l[(b*C+v)*4+3]/255,p=(S*u+L)*4+3,o[p]===0&&(o[p]=r[p]),h=a[p]/255,h=h+d*(x-h),a[p]=Math.floor(h*255),r[p]=Math.floor(o[p]*(1-h)))}generateShape(t){return this.tipId===0?this.generateShapePencil(t):this.tipId===1?this.generateShapePen(t):this.generateShapeAirbrush(t)}}Js.prototype.generateShapePencil=Gs.prototype.generateShape;Js.prototype.generateShapePen=ul.prototype.generateShape;Js.prototype.generateShapeAirbrush=cl.prototype.generateShape;var g={docEl:document.documentElement,id:function(e){return document.getElementById(e)},cls:function(e,t){return(t||document).getElementsByClassName(e)},on:function(e,t,n){e.addEventListener(t,n,!1)},off:function(e,t,n){e.removeEventListener(t,n,!1)},el:function(e){return document.createElement(e)},frag:function(){return document.createDocumentFragment()},copyImageData(e){return new ImageData(new Uint8ClampedArray(e.data),e.width)},copyCanvas:function(e,t){var n;return t?n=e.cloneNode(!1):(n=g.el("canvas"),n.width=e.width,n.height=e.height),n.getContext("2d").drawImage(e,0,0),n},clearCtx:function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},hexToRgb:function(e){var t=e.match(/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},RgbToHex:function(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},getColorAt:function(e,t,n){var s=e.getImageData(t,n,1,1).data;return"#"+("0"+s[0].toString(16)).slice(-2)+("0"+s[1].toString(16)).slice(-2)+("0"+s[2].toString(16)).slice(-2)},generateFilename:function(){return"tegaki_"+new Date().toISOString().split(".")[0].replace(/[^0-9]/g,"_")},sortAscCb:function(e,t){return e>t?1:e<t?-1:0},sortDescCb:function(e,t){return e>t?-1:e<t?1:0},msToHms:function(e){var t,n,s,i;return s=0|e/1e3,t=0|s/3600,n=0|(s-t*3600)/60,s=s-t*3600-n*60,i=[],t&&i.push(t<10?"0"+t:t),n?i.push(n<10?"0"+n:n):i.push("00"),s?i.push(s<10?"0"+s:s):i.push("00"),i.join(":")},calcThumbSize(e,t,n){var s;return e>n&&(s=n/e,e=n,t=t*s),t>n&&(s=n/t,t=n,e=e*s),[Math.ceil(e),Math.ceil(t)]}};class Ca{constructor(t){this.pos=0,this.view=new DataView(t),this.buf=t}readInt8(){var t=this.view.getInt8(this.pos);return this.pos+=1,t}readUint8(){var t=this.view.getUint8(this.pos);return this.pos+=1,t}readInt16(){var t=this.view.getInt16(this.pos);return this.pos+=2,t}readUint16(){var t=this.view.getUint16(this.pos);return this.pos+=2,t}readUint32(){var t=this.view.getUint32(this.pos);return this.pos+=4,t}readFloat32(){var t=this.view.getFloat32(this.pos);return this.pos+=4,t}}class La{constructor(t){this.pos=0,this.view=new DataView(t),this.buf=t}writeInt8(t){this.view.setInt8(this.pos,t),this.pos+=1}writeUint8(t){this.view.setUint8(this.pos,t),this.pos+=1}writeInt16(t){this.view.setInt16(this.pos,t),this.pos+=2}writeUint16(t){this.view.setUint16(this.pos,t),this.pos+=2}writeUint32(t){this.view.setUint32(this.pos,t),this.pos+=4}writeFloat32(t){this.view.setFloat32(this.pos,t),this.pos+=4}}var qe={size:0,radius:0,points:null,cursorCtx:null,offsetX:0,offsetY:0,lastX:0,lastY:0,lastSize:0,init:function(e,t){var n;n=g.el("canvas"),n.id="tegaki-cursor-layer",[n.width,n.height]=qe.getMaxCanvasSize(),c.canvasCnt.appendChild(n),this.offsetX=n.offsetLeft,this.offsetY=n.offsetTop,this.cursorCtx=n.getContext("2d")},getCanvas:function(){return this.cursorCtx?this.cursorCtx.canvas:null},getMaxCanvasSize:function(){let e=c.canvasCnt.offsetWidth,t=c.canvasCnt.offsetHeight,[n,s]=c.getScrollbarSizes();return[e-n,t-s]},updateCanvasSize:function(){let e=this.cursorCtx.canvas,[t,n]=this.getMaxCanvasSize();(t!==e.width||n!==e.height)&&(e.width=t,e.height=n,this.offsetX=e.offsetLeft,this.offsetY=e.offsetTop)},render:function(e,t){var n,s,i,r,a;for(n=e-this.offsetX-this.radius,s=t-this.offsetY-this.radius,this.clear(),this.lastX=n,this.lastY=s,this.lastSize=this.size,r=this.cursorCtx.createImageData(this.size,this.size),a=new Uint32Array(r.data.buffer),i=0;i<this.points.length;++i)a[this.points[i]]=4294967167;this.cursorCtx.putImageData(r,n,s)},clear:function(){this.cursorCtx.clearRect(this.lastX-5,this.lastY-5,this.lastSize+10,this.lastSize+10)},clearAll:function(){var e=this.cursorCtx.canvas;this.cursorCtx.clearRect(0,0,e.width,e.height)},destroy(){this.size=0,this.radius=0,this.offsetX=0,this.offsetY=0,this.lastX=0,this.lastY=0,this.lastSize=0,this.points=null,this.cursorCtx=null},generate:function(e){var t,n,s,i,r,a,o;if(e=0|e*c.zoomFactor,e<2)return!1;for(r=0|e/2,a=0|(e+1)%2,o=[],n=r,s=0,t=1-r,i=r;n>=s;)o.push(i+n-a+(i+s-a)*e),o.push(i+s-a+(i+n-a)*e),o.push(i-s+(i+n-a)*e),o.push(i-n+(i+s-a)*e),o.push(i-s+(i-n)*e),o.push(i-n+(i-s)*e),o.push(i+s-a+(i-n)*e),o.push(i+n-a+(i-s)*e),++s,t<=0?t+=2*s+1:(n--,t+=2*(s-n)+1);return this.size=e,this.radius=r,this.points=o,!0}},we={maxSize:50,undoStack:[],redoStack:[],pendingAction:null,clear:function(){this.undoStack=[],this.redoStack=[],this.pendingAction=null,this.onChange(0)},push:function(e){e&&(e.coalesce&&this.undoStack[this.undoStack.length-1]instanceof e.constructor&&this.undoStack[this.undoStack.length-1].coalesce(e)||(this.undoStack.push(e),this.undoStack.length>this.maxSize&&this.undoStack.shift(),this.redoStack.length>0&&(this.redoStack=[]),this.onChange(0)))},undo:function(){var e;this.undoStack.length&&(e=this.undoStack.pop(),e.undo(),this.redoStack.push(e),this.onChange(-1))},redo:function(){var e;this.redoStack.length&&(e=this.redoStack.pop(),e.redo(),this.undoStack.push(e),this.onChange(1))},onChange:function(e){c.onHistoryChange(this.undoStack.length,this.redoStack.length,e)},sortPosLayerCallback:function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0}},Te={Dummy:function(){this.undo=function(){},this.redo=function(){}},Draw:function(e){this.coalesce=!1,this.imageDataBefore=null,this.imageDataAfter=null,this.layerId=e},DeleteLayers:function(e,t){var n;this.coalesce=!1,this.layerPosMap=[];for(n of e.sort(we.sortPosLayerCallback))n[1]=B.cloneLayer(n[1]),this.layerPosMap.push(n);if(this.tgtLayerId=null,this.aLayerIdBefore=null,this.aLayerIdAfter=null,this.imageDataBefore=null,this.imageDataAfter=null,this.mergeDown=!1,t)for(let s in t)this[s]=t[s]},AddLayer:function(e,t,n){this.coalesce=!1,this.layer=e,this.layerId=e.id,this.aLayerIdBefore=t,this.aLayerIdAfter=n},MoveLayers:function(e,t,n){this.coalesce=!1,this.layers=e,this.belowPos=t,this.aLayerId=n},SetLayersAlpha:function(e,t){this.layerAlphas=e,this.newAlpha=t},SetLayerName:function(e,t,n){this.layerId=e,this.oldName=t,this.newName=n}};Te.Draw.prototype.addCanvasState=function(e,t){t?this.imageDataAfter=g.copyImageData(e):this.imageDataBefore=g.copyImageData(e)};Te.Draw.prototype.exec=function(e){var t=B.getLayerById(this.layerId);e?(t.ctx.putImageData(this.imageDataAfter,0,0),B.syncLayerImageData(t,this.imageDataAfter)):(t.ctx.putImageData(this.imageDataBefore,0,0),B.syncLayerImageData(t,this.imageDataBefore)),_.updateLayerPreview(t),B.setActiveLayer(this.layerId)};Te.Draw.prototype.undo=function(){this.exec(0)};Te.Draw.prototype.redo=function(){this.exec(1)};Te.DeleteLayers.prototype.undo=function(){var e,t,n,s,i,r;for(e=0,t=this.layerPosMap.length;e<t;++e)[i,s]=this.layerPosMap[e],s=B.cloneLayer(s),n=c.layers[i],n?((r=B.getLayerBelowId(n.id))&&(r=r.id),_.updateLayersGridAdd(s,r),_.updateLayerPreview(s),c.layersCnt.insertBefore(s.canvas,n.canvas),c.layers.splice(i,0,s)):(c.layers[0]?n=c.layers[c.layers.length-1].canvas:n=c.layersCnt.children[0],_.updateLayersGridAdd(s,B.getTopLayerId()),_.updateLayerPreview(s),c.layersCnt.insertBefore(s.canvas,n.nextElementSibling),c.layers.push(s));this.tgtLayerId&&(s=B.getLayerById(this.tgtLayerId),s.ctx.putImageData(this.imageDataBefore,0,0),B.syncLayerImageData(s,this.imageDataBefore),B.setLayerAlpha(s,this.tgtLayerAlpha),_.updateLayerPreview(s)),B.setActiveLayer(this.aLayerIdBefore)};Te.DeleteLayers.prototype.redo=function(){var e,t=[];for(e of this.layerPosMap)t.unshift(e[1].id);this.tgtLayerId?(this.mergeDown||t.unshift(this.tgtLayerId),B.mergeLayers(new Set(t))):B.deleteLayers(t),B.setActiveLayer(this.aLayerIdAfter)};Te.MoveLayers.prototype.undo=function(){var e,t,n,s,i;new Array(c.layers.length),s={};for(t of this.layers)s[t[1].id]=t[0];for(e=0,i=c.layers.length;e<i;++e)t=c.layers[e],s[t.id]!==void 0&&(c.layers.splice(e,1),c.layers.splice(s[t.id],0,t));for(_.updayeLayersGridOrder(),n=c.layersCnt.children[0],e=c.layers.length-1;e>=0;e--)t=c.layers[e],c.layersCnt.insertBefore(t.canvas,n.nextElementSibling);B.setActiveLayer(this.aLayerId)};Te.MoveLayers.prototype.redo=function(){var e,t=new Set;for(e of this.layers.slice().reverse())t.add(e[1].id);B.setActiveLayer(this.aLayerId),B.moveLayers(t,this.belowPos)};Te.AddLayer.prototype.undo=function(){B.deleteLayers([this.layer.id]),B.setActiveLayer(this.aLayerIdBefore),c.layerCounter--};Te.AddLayer.prototype.redo=function(){B.setActiveLayer(this.aLayerIdBefore),B.addLayer(this.layer),B.setActiveLayer(this.aLayerIdAfter)};Te.SetLayersAlpha.prototype.undo=function(){var e,t,n;for(t of this.layerAlphas)[e,t]=t,(n=B.getLayerById(e))&&B.setLayerAlpha(n,t);_.updateLayerAlphaOpt()};Te.SetLayersAlpha.prototype.redo=function(){var e,t,n;for(t of this.layerAlphas)[e,t]=t,(n=B.getLayerById(e))&&B.setLayerAlpha(n,this.newAlpha);_.updateLayerAlphaOpt()};Te.SetLayersAlpha.prototype.coalesce=function(e){var t;if(this.layerAlphas.length!==e.layerAlphas.length)return!1;for(t=0;t<this.layerAlphas.length;++t)if(this.layerAlphas[t][0]!==e.layerAlphas[t][0])return!1;return this.newAlpha=e.newAlpha,!0};Te.SetLayerName.prototype.exec=function(e){var t=B.getLayerById(this.layerId);t&&(t.name=e?this.newName:this.oldName,_.updateLayerName(t))};Te.SetLayerName.prototype.undo=function(){this.exec(0)};Te.SetLayerName.prototype.redo=function(){this.exec(1)};var at={keyMap:{},captionMap:{},clear:function(){this.keyMap={},this.captionMap={}},bind:function(e,t,n,s,i){this.keyMap[e]=[t,n],s&&(this.captionMap[s]=i)},getCaption(e){return this.captionMap[e]},resolve:function(e){var t,n,s,i;i=e.target,!(i.nodeName=="INPUT"&&(i.type==="text"||i.type==="number"))&&(n=[],e.ctrlKey&&n.push("ctrl"),e.shiftKey&&n.push("shift"),s=e.key.toLowerCase(),n[0]&&(s=n.join("+")+"+"+s),t=at.keyMap[s],t&&!e.altKey&&!e.metaKey&&(e.preventDefault(),e.stopPropagation(),t[0][t[1]]()))}},B={cloneLayer:function(e){var t=Object.assign({},e);return t.canvas=g.copyCanvas(e.canvas,!0),t.ctx=t.canvas.getContext("2d"),t.imageData=g.copyImageData(e.imageData),t},getCanvasById:function(e){return g.id("tegaki-canvas-"+e)},getActiveLayer:function(){return c.activeLayer},getLayerPosById:function(e){var t,n=c.layers;for(t=0;t<n.length;++t)if(n[t].id===e)return t;return-1},getTopFencedLayerId:function(){var e,t,n,s=c.layers;for(e=s.length-1;e>=0&&!B.selectedLayersHas(s[e].id);e--);for(e=e-1;e>=0&&B.selectedLayersHas(s[e].id);e--);return(n=s[e])?t=n.id:t=0,t},getSelectedEdgeLayerPos:function(e){var t,n=c.layers;if(e)for(t=c.layers.length-1;t>=0&&!B.selectedLayersHas(n[t].id);t--);else{for(t=0;t<n.length&&!B.selectedLayersHas(n[t].id);++t);t>=n.length&&(t=-1)}return t},getTopLayer:function(){return c.layers[c.layers.length-1]},getTopLayerId:function(){var e=B.getTopLayer();return e?e.id:0},getLayerBelowId:function(e){var t;return t=B.getLayerPosById(e),t<1?null:c.layers[t-1]},getLayerById:function(e){return c.layers[B.getLayerPosById(e)]},isSameLayerOrder:function(e,t){var n,s;if(e.length!==t.length)return!1;for(n=0;s=e[n];++n)if(s.id!==t[n].id)return!1;return!0},addLayer:function(e={}){var t,n,s,i,r,a,o,l,u;c.activeLayer?(l=c.activeLayer.id,o=B.getLayerPosById(c.activeLayer.id),a=g.cls("tegaki-layer",c.layersCnt)[o]):(o=-1,a=null),a||(a=c.layersCnt.firstElementChild),n=g.el("canvas"),n.className="tegaki-layer",n.width=c.baseWidth,n.height=c.baseHeight,t=++c.layerCounter,n.id="tegaki-canvas-"+t,n.setAttribute("data-id",t),i={name:te().layer+" "+t,visible:!0,alpha:1},u=n.getContext("2d"),r={id:t,canvas:n,ctx:u,imageData:u.getImageData(0,0,n.width,n.height)};for(s in i)e[s]!==void 0&&(i[s]=e[s]),r[s]=i[s];return c.layers.splice(o+1,0,r),_.updateLayersGridAdd(r,l),c.layersCnt.insertBefore(n,a.nextElementSibling),c.onLayerStackChanged(),new Te.AddLayer(r,l,t)},deleteLayers:function(e,t){var n,s,i,r,a,o;o={aLayerIdBefore:c.activeLayer?c.activeLayer.id:-1,aLayerIdAfter:B.getTopFencedLayerId()},r=[],a=[];for(n of e)s=B.getLayerPosById(n),i=c.layers[s],r.push([s,i]),c.layersCnt.removeChild(i.canvas),a.push(s),_.updateLayersGridRemove(n),_.deleteLayerPreviewCtx(i);a=a.sort(g.sortDescCb);for(s of a)c.layers.splice(s,1);return t&&Object.assign(o,t),c.onLayerStackChanged(),new Te.DeleteLayers(r,o)},mergeLayers:function(e){var t,n,s,i,r,a,o,l,u,f;l=[];for(o of c.layers)e.has(o.id)&&l.push(o);if(!(l.length<1)){if(l.length===1){if(r=B.getLayerBelowId(l[0].id),!r)return;l.unshift(r),f=!0}else r=l[l.length-1],f=!1;t=g.el("canvas"),t.width=c.baseWidth,t.height=c.baseHeight,n=t.getContext("2d"),i=g.copyImageData(r.imageData),u=[];for(o of l)o.id!==r.id&&u.push(o.id),n.globalAlpha=o.alpha,n.drawImage(o.canvas,0,0);return g.clearCtx(r.ctx),r.ctx.drawImage(t,0,0),B.syncLayerImageData(r),s=g.copyImageData(r.imageData),a=B.deleteLayers(u,{tgtLayerId:r.id,tgtLayerAlpha:r.alpha,aLayerIdAfter:r.id,imageDataBefore:i,imageDataAfter:s,mergeDown:f}),B.setLayerAlpha(r,1),_.updateLayerAlphaOpt(),_.updateLayerPreview(r),c.onLayerStackChanged(),a}},moveLayers:function(e,t){var n,s,i,r,a,o,l;if(!(!e.size||!c.layers.length)){t>=c.layers.length?o=B.getTopLayer().canvas.nextElementSibling:(s=c.layers[t],o=s.canvas),i=[],r=[],a=[],l=t,n=0;for(s of c.layers)e.has(s.id)?(t>0&&n<=t&&l--,i.push([n,s]),a.push(s)):r.push(s),++n;if(r.splice(l,0,...a),!B.isSameLayerOrder(r,c.layers)){c.layers=r;for(s of i)c.layersCnt.insertBefore(s[1].canvas,o);return _.updayeLayersGridOrder(),c.onLayerStackChanged(),new Te.MoveLayers(i,t,c.activeLayer?c.activeLayer.id:-1)}}},setLayerVisibility:function(e,t){e.visible=t,t?e.canvas.classList.remove("tegaki-hidden"):e.canvas.classList.add("tegaki-hidden"),c.onLayerStackChanged(),_.updateLayersGridVisibility(e.id,t)},setLayerAlpha:function(e,t){e.alpha=t,e.canvas.style.opacity=t},setActiveLayer:function(e){var t,n;if(!e&&(e=B.getTopLayerId(),!e)){c.activeLayer=null;return}t=B.getLayerPosById(e),!(t<0)&&(n=c.layers[t],c.activeLayer&&c.copyContextState(c.activeLayer.ctx,n.ctx),c.activeLayer=n,B.selectedLayersClear(),B.selectedLayersAdd(e),_.updateLayersGridActive(e),_.updateLayerAlphaOpt(),c.onLayerStackChanged())},syncLayerImageData(e,t=null){t?e.imageData=g.copyImageData(t):e.imageData=e.ctx.getImageData(0,0,c.baseWidth,c.baseHeight)},selectedLayersHas:function(e){return c.selectedLayers.has(+e)},selectedLayersClear:function(){c.selectedLayers.clear(),_.updateLayerAlphaOpt(),_.updateLayersGridSelectedClear()},selectedLayersAdd:function(e){c.selectedLayers.add(+e),_.updateLayerAlphaOpt(),_.updateLayersGridSelectedSet(e,!0)},selectedLayersRemove:function(e){c.selectedLayers.delete(+e),_.updateLayerAlphaOpt(),_.updateLayersGridSelectedSet(e,!1)},selectedLayersToggle:function(e){B.selectedLayersHas(e)?B.selectedLayersRemove(e):B.selectedLayersAdd(e)}},c={VERSION:"0.9.3",startTimeStamp:0,bg:null,canvas:null,ctx:null,layers:[],layersCnt:null,canvasCnt:null,ghostBuffer:null,blendBuffer:null,ghostBuffer32:null,blendBuffer32:null,activeLayer:null,layerCounter:0,selectedLayers:new Set,activePointerId:0,activePointerIsPen:!1,isPainting:!1,offsetX:0,offsetY:0,zoomLevel:0,zoomFactor:1,zoomFactorList:[.5,1,2,4,8,16],zoomBaseLevel:1,hasCustomCanvas:!1,TWOPI:2*Math.PI,toolList:[Gs,ul,cl,np,sp,ip,fl,Js],tools:{},tool:null,colorPaletteId:0,toolColor:"#000000",defaultTool:"pencil",bgColor:"#ffffff",maxSize:64,maxLayers:25,baseWidth:0,baseHeight:0,replayRecorder:null,replayViewer:null,onDoneCb:null,onCancelCb:null,replayMode:!1,saveReplay:!1,open:function(e={}){var t=c;if(t.bg)if(t.replayMode!==!!e.replayMode)t.destroy();else{t.resume();return}t.startTimeStamp=Date.now(),e.bgColor&&(t.bgColor=e.bgColor),t.hasCustomCanvas=!1,t.saveReplay=!!e.saveReplay,t.replayMode=!!e.replayMode,t.onDoneCb=e.onDone,t.onCancelCb=e.onCancel;const n=800,s=800,i=e.width>n?n:e.width,r=e.maxHeight>s?s:e.height;(e.width>n||e.height>800)&&alert("The max canvas size is 800x800, your canvas has been rescaled to fit it."),t.baseWidth=i,t.baseHeight=r,t.createTools(),t.initKeybinds(),[t.bg,t.canvasCnt,t.layersCnt]=_.buildUI(),document.body.appendChild(t.bg),document.body.classList.add("tegaki-backdrop"),t.replayMode?(_.setReplayMode(!0),t.replayViewer=new rp,e.replayURL&&t.loadReplayFromURL(e.replayURL)):(t.init(),t.setTool(t.defaultTool),t.saveReplay&&(t.replayRecorder=new xa,t.replayRecorder.start()))},init:function(){var e=c;e.createCanvas(),e.updateLayersCntSize(),e.createBuffers(),e.updatePosOffset(),e.resetLayers(),qe.init(e.baseWidth,e.baseHeight),e.bindGlobalEvents(),_.updateUndoRedo(0,0),_.updateZoomLevel()},initFromReplay:function(){var e,t;e=c,t=e.replayViewer,e.initToolsFromReplay(),e.baseWidth=t.canvasWidth,e.baseHeight=t.canvasHeight,e.bgColor=g.RgbToHex(...t.bgColor),e.toolColor=g.RgbToHex(...t.toolColor)},initToolsFromReplay:function(){var e,t,n,s,i,r,a;e=c,t=e.replayViewer;for(n in e.tools){s=e.tools[n],s.id===t.toolId&&(e.defaultTool=n),i=t.toolMap[s.id],a=["step","size","alpha","flow","tipId"];for(r of a)i[r]!==void 0&&(s[r]=i[r]);a=["sizeDynamicsEnabled","alphaDynamicsEnabled","flowDynamicsEnabled","usePreserveAlpha"];for(r of a)i[r]!==void 0&&(s[r]=!!i[r])}},resetLayers:function(){var e,t;if(c.layers.length){for(e=0,t=c.layers.length;e<t;++e)c.layersCnt.removeChild(c.layers[e].canvas);c.layers=[],c.layerCounter=0,_.updateLayersGridClear()}B.addLayer(),B.setActiveLayer(0)},createCanvas:function(){var e,t=c;e=g.el("canvas"),e.id="tegaki-canvas",e.width=t.baseWidth,e.height=t.baseHeight,t.canvas=e,t.ctx=e.getContext("2d"),t.ctx.fillStyle=t.bgColor,t.ctx.fillRect(0,0,t.baseWidth,t.baseHeight),t.layersCnt.appendChild(e)},createTools:function(){var e,t;for(e of c.toolList)t=new e,c.tools[t.name]=t},bindGlobalEvents:function(){var e=c;if(e.replayMode)g.on(document,"visibilitychange",c.onVisibilityChange);else{let t=qe.getCanvas();g.on(t,"pointermove",e.onPointerMove),g.on(t,"pointerdown",e.onPointerDown),g.on(t,"pointerout",e.onPointerOut),g.on(document,"pointerup",e.onPointerUp),g.on(document,"pointercancel",e.onPointerUp),g.on(document,"keydown",at.resolve),g.on(window,"beforeunload",c.onTabClose)}g.on(e.bg,"contextmenu",e.onDummy),g.on(window,"resize",e.onWindowResized),g.on(window,"scroll",e.updatePosOffset)},unBindGlobalEvents:function(){var e=c;if(e.replayMode)g.off(document,"visibilitychange",c.onVisibilityChange);else{let t=qe.getCanvas();g.off(t,"pointermove",e.onPointerMove),g.off(t,"pointerdown",e.onPointerDown),g.off(t,"pointerout",e.onPointerOut),g.off(document,"pointerup",e.onPointerUp),g.off(document,"pointercancel",e.onPointerUp),g.off(document,"keydown",at.resolve),g.off(window,"beforeunload",c.onTabClose)}g.off(e.bg,"contextmenu",e.onDummy),g.off(window,"resize",e.onWindowResized),g.off(window,"scroll",e.updatePosOffset)},createBuffers(){c.ghostBuffer=new ImageData(c.baseWidth,c.baseHeight),c.blendBuffer=new ImageData(c.baseWidth,c.baseHeight),c.ghostBuffer32=new Uint32Array(c.ghostBuffer.data.buffer),c.blendBuffer32=new Uint32Array(c.blendBuffer.data.buffer)},clearBuffers(){c.ghostBuffer32.fill(0),c.blendBuffer32.fill(0)},destroyBuffers(){c.ghostBuffer=null,c.blendBuffer=null,c.ghostBuffer32=null,c.blendBuffer32=null},disableSmoothing:function(e){e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1},updateLayersCntSize:function(){var e=c.layersCnt.style;e.width=c.baseWidth+"px",e.height=c.baseHeight+"px"},onTabClose:function(e){e.preventDefault(),e.returnValue=""},onVisibilityChange:function(e){c.replayMode&&(document.visibilityState==="visible"?c.replayViewer.autoPaused&&c.replayViewer.play():c.replayViewer.playing&&c.replayViewer.autoPause())},onWindowResized:function(){c.updatePosOffset(),qe.updateCanvasSize()},initKeybinds:function(){var e,t;if(!c.replayMode){at.bind("ctrl+z",we,"undo","undo","Ctrl+Z"),at.bind("ctrl+y",we,"redo","redo","Ctrl+Y"),at.bind("+",c,"setToolSizeUp","toolSize","Numpad +/-"),at.bind("-",c,"setToolSizeDown");for(t in c.tools)e=c.tools[t],e.keybind&&at.bind(e.keybind,e,"set")}},getPointerPos:function(e,t){return t===0?0|(e.clientX+window.pageXOffset+c.canvasCnt.scrollLeft-c.offsetX)/c.zoomFactor:0|(e.clientY+window.pageYOffset+c.canvasCnt.scrollTop-c.offsetY)/c.zoomFactor},resume:function(){c.saveReplay&&c.replayRecorder.start(),c.bg.classList.remove("tegaki-hidden"),document.body.classList.add("tegaki-backdrop"),c.setZoom(0),c.updateLayersCntSize(),c.updatePosOffset(),qe.updateCanvasSize(),c.bindGlobalEvents()},hide:function(){c.saveReplay&&c.replayRecorder.stop(),c.bg.classList.add("tegaki-hidden"),document.body.classList.remove("tegaki-backdrop"),c.unBindGlobalEvents()},destroy:function(){c.unBindGlobalEvents(),at.clear(),we.clear(),c.bg.parentNode.removeChild(c.bg),document.body.classList.remove("tegaki-backdrop"),c.startTimeStamp=0,c.bg=null,c.canvasCnt=null,c.layersCnt=null,c.canvas=null,c.ctx=null,c.layers=[],c.layerCounter=0,c.zoomLevel=0,c.zoomFactor=1,c.activeLayer=null,c.tool=null,qe.destroy(),c.replayRecorder=null,c.replayViewer=null,c.destroyBuffers()},flatten:function(e){var t,n,s,i;for(e?s=e.canvas:(s=g.el("canvas"),e=s.getContext("2d")),s.width=c.canvas.width,s.height=c.canvas.height,e.drawImage(c.canvas,0,0),t=0,i=c.layers.length;t<i;++t)n=c.layers[t],n.visible&&(e.globalAlpha=n.alpha,e.drawImage(n.canvas,0,0));return s},onReplayLoaded:function(){_.clearMsg(),c.initFromReplay(),c.init(),c.setTool(c.defaultTool),_.updateReplayControls(),_.updateReplayTime(!0),_.enableReplayControls(!0),c.replayViewer.play()},onReplayGaplessClick:function(){c.replayViewer.toggleGapless(),_.updateReplayGapless()},onReplayPlayPauseClick:function(){c.replayViewer.togglePlayPause()},onReplayRewindClick:function(){c.replayViewer.rewind()},onReplaySlowDownClick:function(){c.replayViewer.slowDown(),_.updateReplaySpeed()},onReplaySpeedUpClick:function(){c.replayViewer.speedUp(),_.updateReplaySpeed()},onReplayTimeChanged:function(){_.updateReplayTime()},onReplayPlayPauseChanged:function(){_.updateReplayPlayPause()},onReplayReset:function(){c.initFromReplay(),c.setTool(c.defaultTool),c.resizeCanvas(c.baseWidth,c.baseHeight),_.updateReplayControls(),_.updateReplayTime()},onMainColorClick:function(e){var t;e.preventDefault(),t=g.id("tegaki-colorpicker"),t.click()},onPaletteColorClick:function(e){e.button===2?(this.style.backgroundColor=c.toolColor,this.setAttribute("data-color",c.toolColor)):e.button===0&&c.setToolColor(this.getAttribute("data-color"))},onColorPicked:function(e){g.id("tegaki-color").style.backgroundColor=this.value,c.setToolColor(this.value)},onSwitchPaletteClick:function(e){var t;e.target.hasAttribute("data-prev")?t=c.colorPaletteId-1:t=c.colorPaletteId+1,c.setColorPalette(t)},setColorPalette:function(e){e<0||e>=vs.length||(c.colorPaletteId=e,_.updateColorPalette())},setToolSizeUp:function(){c.setToolSize(c.tool.size+1)},setToolSizeDown:function(){c.setToolSize(c.tool.size-1)},setToolSize:function(e){e>0&&e<=c.maxSize&&(c.tool.setSize(e),c.updateCursorStatus(),c.recordEvent(bl,performance.now(),e),_.updateToolSize())},setToolAlpha:function(e){e=Math.fround(e),e>=0&&e<=1&&(c.tool.setAlpha(e),c.recordEvent(kl,performance.now(),e),_.updateToolAlpha())},setToolFlow:function(e){e=Math.fround(e),e>=0&&e<=1&&(c.tool.setFlow(e),c.recordEvent(wl,performance.now(),e),_.updateToolFlow())},setToolColor:function(e){c.toolColor=e,g.id("tegaki-color").style.backgroundColor=e,g.id("tegaki-colorpicker").value=e,c.tool.setColor(e),c.recordEvent(Xs,performance.now(),c.tool.rgb)},setToolColorRGB:function(e,t,n){c.setToolColor(g.RgbToHex(e,t,n))},setTool:function(e){c.tools[e].set()},setToolById:function(e){var t;for(t in c.tools)if(c.tools[t].id===e){c.setTool(t);return}},setZoom:function(e){var t;t=e+c.zoomBaseLevel,!(t>=c.zoomFactorList.length||t<0||!c.canvas)&&(c.zoomLevel=e,c.zoomFactor=c.zoomFactorList[t],_.updateZoomLevel(),c.layersCnt.style.width=Math.ceil(c.baseWidth*c.zoomFactor)+"px",c.layersCnt.style.height=Math.ceil(c.baseHeight*c.zoomFactor)+"px",c.updateCursorStatus(),c.updatePosOffset())},onZoomChange:function(){this.hasAttribute("data-in")?c.setZoom(c.zoomLevel+1):c.setZoom(c.zoomLevel-1),qe.updateCanvasSize()},onNewClick:function(){var e,t,n,s=c;if(e=prompt(te().promptWidth,s.canvas.width),!!e&&(t=prompt(te().promptHeight,s.canvas.height),!!t)){if(e=+e,t=+t,e<1||t<1){_.printMsg(te().badDimensions);return}n={},s.copyContextState(s.activeLayer.ctx,n),s.resizeCanvas(e,t),s.copyContextState(n,s.activeLayer.ctx),s.setZoom(0),we.clear(),_.updateLayerPreviewSize(),s.startTimeStamp=Date.now(),s.saveReplay&&(s.createTools(),s.setTool(s.defaultTool),s.replayRecorder=new xa,s.replayRecorder.start())}},loadReplayFromFile:function(){c.replayViewer.debugLoadLocal()},loadReplayFromURL:function(e){_.printMsg(te().loadingReplay,0),c.replayViewer.loadFromURL(e)},onExportClick:function(){c.flatten().toBlob(function(e){var t=g.el("a");t.className="tegaki-hidden",t.download=g.generateFilename()+".png",t.href=URL.createObjectURL(e),c.bg.appendChild(t),t.click(),c.bg.removeChild(t)},"image/png")},onUndoClick:function(){we.undo()},onRedoClick:function(){we.redo()},onHistoryChange:function(e,t,n=0){_.updateUndoRedo(e,t),n===-1?c.recordEvent(ml,performance.now()):n===1&&c.recordEvent(yl,performance.now())},onDoneClick:function(){c.hide(),c.onDoneCb()},onCancelClick:function(){confirm(te().confirmCancel)&&(c.destroy(),c.onCancelCb())},onCloseViewerClick:function(){c.replayViewer.destroy(),c.destroy()},onToolSizeChange:function(){var e=+this.value;e<1?e=1:e>c.maxSize&&(e=c.maxSize),c.setToolSize(e)},onToolAlphaChange:function(e){var t=+this.value;t=t/100,t<0?t=0:t>1&&(t=1),c.setToolAlpha(t)},onToolFlowChange:function(e){var t=+this.value;t=t/100,t<0?t=0:t>1&&(t=1),c.setToolFlow(t)},onToolPressureSizeClick:function(e){c.tool.useSizeDynamics&&c.setToolSizeDynamics(!c.tool.sizeDynamicsEnabled)},setToolSizeDynamics:function(e){c.tool.setSizeDynamics(e),_.updateToolDynamics(),c.recordEvent(Sl,performance.now(),+e)},onToolPressureAlphaClick:function(e){c.tool.useAlphaDynamics&&c.setToolAlphaDynamics(!c.tool.alphaDynamicsEnabled)},setToolAlphaDynamics:function(e){c.tool.setAlphaDynamics(e),_.updateToolDynamics(),c.recordEvent(Cl,performance.now(),+e)},onToolPressureFlowClick:function(e){c.tool.useFlowDynamics&&c.setToolFlowDynamics(!c.tool.flowDynamicsEnabled)},setToolFlowDynamics:function(e){c.tool.setFlowDynamics(e),_.updateToolDynamics(),c.recordEvent(Ll,performance.now(),+e)},onToolPreserveAlphaClick:function(e){c.tool.usePreserveAlpha&&c.setToolPreserveAlpha(!c.tool.preserveAlphaEnabled)},setToolPreserveAlpha:function(e){c.tool.setPreserveAlpha(e),_.updateToolPreserveAlpha(),c.recordEvent(_l,performance.now(),+e)},onToolTipClick:function(e){var t=+e.target.getAttribute("data-id");t!==c.tool.tipId&&c.setToolTip(t)},setToolTip:function(e){c.tool.setTip(e),_.updateToolShape(),c.recordEvent(xl,performance.now(),e)},onLayerSelectorClick:function(e){var t=+this.getAttribute("data-id");!t||e.target.classList.contains("tegaki-ui-cb")||(e.ctrlKey?c.toggleSelectedLayer(t):c.setActiveLayer(t))},toggleSelectedLayer:function(e){B.selectedLayersToggle(e),c.recordEvent(Il,performance.now(),e)},setActiveLayer:function(e){B.setActiveLayer(e),c.recordEvent(Dl,performance.now(),e)},onLayerAlphaDragStart:function(e){_.setupDragLabel(e,c.onLayerAlphaDragMove)},onLayerAlphaDragMove:function(e){var t;e&&(t=c.activeLayer.alpha+e/100,t<0?t=0:t>1&&(t=1),c.setSelectedLayersAlpha(t))},onLayerAlphaChange:function(){var e=+this.value;e=e/100,e<0?e=0:e>1&&(e=1),c.setSelectedLayersAlpha(e)},setSelectedLayersAlpha:function(e){var t,n,s;if(e=Math.fround(e),e>=0&&e<=1&&c.selectedLayers.size>0){s=[];for(n of c.selectedLayers)(t=B.getLayerById(n))&&(s.push([t.id,t.alpha]),B.setLayerAlpha(t,e));_.updateLayerAlphaOpt(),we.push(new Te.SetLayersAlpha(s,e)),c.recordEvent(Fl,performance.now(),e)}},onLayerNameChangeClick:function(e){var t,n,s;t=+this.getAttribute("data-id"),s=B.getLayerById(t),s&&(n=prompt(void 0,s.name))&&c.setLayerName(t,n)},setLayerName:function(e,t){var n,s;t=t.trim().slice(0,25),s=B.getLayerById(e),!(!s||!t||t===s.name)&&(n=s.name,s.name=t,_.updateLayerName(s),we.push(new Te.SetLayerName(e,n,t)),c.recordEvent(pl,performance.now()))},onLayerAddClick:function(){c.addLayer()},addLayer:function(){var e;if(c.layers.length>=c.maxLayers){_.printMsg(te().tooManyLayers);return}we.push(e=B.addLayer()),B.setActiveLayer(e.aLayerIdAfter),c.recordEvent(Pl,performance.now())},onLayerDeleteClick:function(){c.deleteSelectedLayers()},deleteSelectedLayers:function(){var e,t;t=c.selectedLayers,t.size!==c.layers.length&&(!t.size||c.layers.length<2||(we.push(e=B.deleteLayers(t)),B.selectedLayersClear(),B.setActiveLayer(e.aLayerIdAfter),c.recordEvent(Tl,performance.now())))},onLayerToggleVisibilityClick:function(){c.toggleLayerVisibility(+this.getAttribute("data-id"))},toggleLayerVisibility:function(e){var t=B.getLayerById(e);B.setLayerVisibility(t,!t.visible),c.recordEvent(Rl,performance.now(),e)},onMergeLayersClick:function(){c.mergeSelectedLayers()},mergeSelectedLayers:function(){var e;c.selectedLayers.size&&(e=B.mergeLayers(c.selectedLayers))&&(we.push(e),B.setActiveLayer(e.aLayerIdAfter),c.recordEvent(El,performance.now()))},onMoveLayerClick:function(e){var t,n;c.selectedLayers.size&&(n=e.target.hasAttribute("data-up"),t=B.getSelectedEdgeLayerPos(n),!(t<0)&&(n?t+=2:t>=1&&t--,c.moveSelectedLayers(t)))},moveSelectedLayers:function(e){we.push(B.moveLayers(c.selectedLayers,e)),c.recordEvent(Al,performance.now(),e)},onToolClick:function(){c.setTool(this.getAttribute("data-tool"))},onToolChanged:function(e){var t;c.tool=e,(t=g.cls("tegaki-tool-active")[0])&&t.classList.remove("tegaki-tool-active"),g.id("tegaki-tool-btn-"+e.name).classList.add("tegaki-tool-active"),c.recordEvent(vl,performance.now(),c.tool.id),_.onToolChanged(),c.updateCursorStatus()},onLayerStackChanged:function(){},resizeCanvas:function(e,t){const i=e>800?800:e,r=t>800?800:t;(e>800||t>800)&&alert("The max canvas size is 800x800, your canvas has been rescaled to fit it."),c.baseWidth=i,c.baseHeight=r,c.createBuffers(),c.canvas.width=i,c.canvas.height=r,c.ctx.fillStyle=c.bgColor,c.ctx.fillRect(0,0,i,r),c.activeLayer=null,c.resetLayers(),c.updateLayersCntSize(),c.updatePosOffset(),qe.updateCanvasSize()},copyContextState:function(e,t){var n,s,i=["lineCap","lineJoin","strokeStyle","fillStyle","globalAlpha","lineWidth","globalCompositeOperation"];for(n=0;s=i[n];++n)t[s]=e[s]},updateCursorStatus:function(){!c.tool.noCursor&&c.tool.size>1?c.cursor=qe.generate(c.tool.size):(c.cursor=!1,qe.clear())},updatePosOffset:function(){var e=c.canvas.getBoundingClientRect();c.offsetX=e.left+window.pageXOffset+c.canvasCnt.scrollLeft+c.layersCnt.scrollLeft,c.offsetY=e.top+window.pageYOffset+c.canvasCnt.scrollTop+c.layersCnt.scrollTop},getScrollbarSizes:function(){return[c.canvasCnt.offsetWidth-c.canvasCnt.clientWidth,c.canvasCnt.offsetHeight-c.canvasCnt.clientHeight]},isScrollbarClick:function(e){var[t,n]=c.getScrollbarSizes();return t>0&&e.clientX>=c.canvasCnt.offsetLeft+c.canvasCnt.clientWidth&&e.clientX<=c.canvasCnt.offsetLeft+c.canvasCnt.clientWidth+t||n>0&&e.clientY>=c.canvasCnt.offsetTop+c.canvasCnt.clientHeight&&e.clientY<=c.canvasCnt.offsetTop+c.canvasCnt.clientHeight+t},onPointerMove:function(e){var t,n,s,i,r,a;if(c.cursor&&qe.render(e.clientX+window.pageXOffset,e.clientY+window.pageYOffset),e.mozInputSource!==void 0){if(c.activePointerIsPen&&e.pointerType==="mouse")return}else if(c.activePointerId!==e.pointerId){c.activePointerId=e.pointerId;return}if(c.isPainting)if(i=c.tool,c.activePointerIsPen&&e.getCoalescedEvents){t=e.getCoalescedEvents(),r=e.timeStamp;for(e of t)n=c.getPointerPos(e,0),s=c.getPointerPos(e,1),i.enabledDynamics()?(a=dt.toShort(e.pressure),dt.push(a),c.recordEvent(Yn,r,n,s,a)):c.recordEvent(Zs,r,n,s),i.draw(n,s)}else n=c.getPointerPos(e,0),s=c.getPointerPos(e,1),a=dt.toShort(e.pressure),c.recordEvent(Yn,e.timeStamp,n,s,a),dt.push(a),i.draw(n,s);else n=c.getPointerPos(e,0),s=c.getPointerPos(e,1)},onPointerDown:function(e){var t,n,s,i;if(c.cursor&&qe.render(e.clientX,e.clientY),!c.isScrollbarClick(e)){if(c.activePointerId=e.pointerId,c.activePointerIsPen=e.pointerType==="pen",c.activeLayer===null){e.target.parentNode===c.layersCnt&&_.printMsg(te().noActiveLayer);return}if(!B.getActiveLayer().visible){e.target.parentNode===c.layersCnt&&_.printMsg(te().hiddenActiveLayer);return}t=c.getPointerPos(e,0),n=c.getPointerPos(e,1),e.button===2||e.altKey?(e.preventDefault(),c.isPainting=!1,c.tools.pipette.draw(t,n)):e.button===0&&(e.preventDefault(),s=c.tool,s.enabledDynamics()?(i=dt.toShort(e.pressure),dt.push(i),c.recordEvent(qs,e.timeStamp,t,n,i)):c.recordEvent(Ys,e.timeStamp,t,n),c.isPainting=!0,we.pendingAction=new Te.Draw(c.activeLayer.id),we.pendingAction.addCanvasState(c.activeLayer.imageData,0),s.start(t,n))}},onPointerUp:function(e){c.activePointerId=e.pointerId,c.activePointerIsPen=!1,c.isPainting&&(c.recordEvent(gl,e.timeStamp),c.tool.commit(),_.updateLayerPreview(c.activeLayer),we.pendingAction.addCanvasState(c.activeLayer.imageData,1),we.push(we.pendingAction),c.isPainting=!1)},onPointerOut:function(e){qe.clearAll()},onDummy:function(e){e.preventDefault(),e.stopPropagation()},recordEvent(e,...t){c.replayRecorder&&c.replayRecorder.push(new e(...t))}},vs=[["#ffffff","#000000","#888888","#b47575","#c096c0","#fa9696","#8080ff","#ffb6ff","#e7e58d","#25c7c9","#99cb7b","#e7962d","#f9ddcf","#fcece2"],["#000000","#ffffff","#7f7f7f","#c3c3c3","#880015","#b97a57","#ed1c24","#ffaec9","#ff7f27","#ffc90e","#fff200","#efe4b0","#22b14c","#b5e61d","#00a2e8","#99d9ea","#3f48cc","#7092be","#a349a4","#c8bfe7"],["#000000","#ffffff","#8a8a8a","#cacaca","#fcece2","#f9ddcf","#e0a899","#a05b53","#7a444a","#960018","#c41e3a","#de4537","#ff3300","#ff9800","#ffc107","#ffd700","#ffeb3b","#ffffcc","#f3e5ab","#cddc39","#8bc34a","#4caf50","#3e8948","#355e3b","#3eb489","#f0f8ff","#87ceeb","#6699cc","#007fff","#2d68c4","#364478","#352c4a","#9c27b0","#da70d6","#ff0090","#fa8072","#f19cbb","#c78b95"]],dt={pressureNow:0,pressureThen:0,toShort:function(e){return 0|e*65535},get:function(){return this.pressureNow},lerp:function(e){return this.pressureThen*(1-e)+this.pressureNow*e},push:function(e){this.pressureThen=this.pressureNow,this.pressureNow=e/65535},set:function(e){this.pressureThen=this.pressureNow=e/65535}};class Ot{constructor(){this.size=5}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp)}static unpack(t){return new this(t.readUint32())}}class yt{constructor(){this.size=6}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeUint8(this.value)}static unpack(t){return new this(t.readUint32(),t.readUint8())}}class dl extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){}}class hl extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){}}class pl extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){we.push(new Te.Dummy)}}class qs{constructor(t,n,s,i){this.timeStamp=t,this.x=n,this.y=s,this.pressure=i,this.type=pe[this.constructor.name][0],this.size=11}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeInt16(this.x),t.writeInt16(this.y),t.writeUint16(this.pressure)}static unpack(t){var n,s,i,r;return n=t.readUint32(),s=t.readInt16(),i=t.readInt16(),r=t.readUint16(),new qs(n,s,i,r)}dispatch(){dt.set(this.pressure),we.pendingAction=new Te.Draw(c.activeLayer.id),we.pendingAction.addCanvasState(c.activeLayer.imageData,0),c.tool.start(this.x,this.y)}}class Ys{constructor(t,n,s){this.timeStamp=t,this.x=n,this.y=s,this.type=pe[this.constructor.name][0],this.size=9}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeInt16(this.x),t.writeInt16(this.y)}static unpack(t){var n,s,i;return n=t.readUint32(),s=t.readInt16(),i=t.readInt16(),new Ys(n,s,i)}dispatch(){dt.set(.5),we.pendingAction=new Te.Draw(c.activeLayer.id),we.pendingAction.addCanvasState(c.activeLayer.imageData,0),c.tool.start(this.x,this.y)}}class Yn{constructor(t,n,s,i){this.timeStamp=t,this.x=n,this.y=s,this.pressure=i,this.type=pe[this.constructor.name][0],this.size=11}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeInt16(this.x),t.writeInt16(this.y),t.writeUint16(this.pressure)}static unpack(t){var n,s,i,r;return n=t.readUint32(),s=t.readInt16(),i=t.readInt16(),r=t.readUint16(),new Yn(n,s,i,r)}dispatch(){dt.push(this.pressure),c.tool.draw(this.x,this.y)}}class Zs{constructor(t,n,s){this.timeStamp=t,this.x=n,this.y=s,this.type=pe[this.constructor.name][0],this.size=9}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeInt16(this.x),t.writeInt16(this.y)}static unpack(t){var n,s,i;return n=t.readUint32(),s=t.readInt16(),i=t.readInt16(),new Zs(n,s,i)}dispatch(){dt.push(.5),c.tool.draw(this.x,this.y)}}class gl extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){c.tool.commit(),_.updateLayerPreview(c.activeLayer),we.pendingAction.addCanvasState(c.activeLayer.imageData,1),we.push(we.pendingAction),c.isPainting=!1}}class ml extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){we.undo()}}class yl extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){we.redo()}}class Xs{constructor(t,n){this.timeStamp=t,[this.r,this.g,this.b]=n,this.type=pe[this.constructor.name][0],this.size=8,this.coalesce=!0}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeUint8(this.r),t.writeUint8(this.g),t.writeUint8(this.b)}static unpack(t){var n,s;return n=t.readUint32(),s=[t.readUint8(),t.readUint8(),t.readUint8()],new Xs(n,s)}dispatch(){c.setToolColorRGB(this.r,this.g,this.b)}}class vl extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0}dispatch(){c.setToolById(this.value)}}class bl extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0}dispatch(){c.setToolSize(this.value)}}class kl{constructor(t,n){this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0,this.size=9}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeFloat32(this.value)}static unpack(t){return new this(t.readUint32(),t.readFloat32())}dispatch(){c.setToolAlpha(this.value)}}class wl{constructor(t,n){this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0,this.size=9}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeFloat32(this.value)}static unpack(t){return new this(t.readUint32(),t.readFloat32())}dispatch(){c.setToolFlow(this.value)}}class _l extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0}dispatch(){c.setToolPreserveAlpha(!!this.value)}}class Sl extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0}dispatch(){c.setToolSizeDynamics(!!this.value)}}class Cl extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0}dispatch(){c.setToolAlphaDynamics(!!this.value)}}class Ll extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0}dispatch(){c.setToolFlowDynamics(!!this.value)}}class xl extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0}dispatch(){c.setToolTip(this.value)}}class Pl extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){c.addLayer()}}class Tl extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){c.deleteSelectedLayers()}}class Al extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0]}dispatch(){c.moveSelectedLayers(this.value)}}class El extends Ot{constructor(t){super(),this.timeStamp=t,this.type=pe[this.constructor.name][0]}static unpack(t){return super.unpack(t)}dispatch(){c.mergeSelectedLayers()}}class Rl extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0]}dispatch(){c.toggleLayerVisibility(this.value)}}class Dl extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0]}dispatch(){c.setActiveLayer(this.value)}}class Il extends yt{constructor(t,n){super(),this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0]}dispatch(){c.toggleSelectedLayer(this.value)}}class Fl{constructor(t,n){this.timeStamp=t,this.value=n,this.type=pe[this.constructor.name][0],this.coalesce=!0,this.size=9}pack(t){t.writeUint8(this.type),t.writeUint32(this.timeStamp),t.writeFloat32(this.value)}static unpack(t){return new this(t.readUint32(),t.readFloat32())}dispatch(){c.setSelectedLayersAlpha(this.value)}}const pe=Object.freeze({TegakiEventPrelude:[0,dl],TegakiEventDrawStart:[1,qs],TegakiEventDraw:[2,Yn],TegakiEventDrawCommit:[3,gl],TegakiEventUndo:[4,ml],TegakiEventRedo:[5,yl],TegakiEventSetColor:[6,Xs],TegakiEventDrawStartNoP:[7,Ys],TegakiEventDrawNoP:[8,Zs],TegakiEventSetTool:[10,vl],TegakiEventSetToolSize:[11,bl],TegakiEventSetToolAlpha:[12,kl],TegakiEventSetToolSizeDynamics:[13,Sl],TegakiEventSetToolAlphaDynamics:[14,Cl],TegakiEventSetToolTip:[15,xl],TegakiEventPreserveAlpha:[16,_l],TegakiEventSetToolFlowDynamics:[17,Ll],TegakiEventSetToolFlow:[18,wl],TegakiEventAddLayer:[20,Pl],TegakiEventDeleteLayers:[21,Tl],TegakiEventMoveLayers:[22,Al],TegakiEventMergeLayers:[23,El],TegakiEventToggleLayerVisibility:[24,Rl],TegakiEventSetActiveLayer:[25,Dl],TegakiEventToggleLayerSelection:[26,Il],TegakiEventSetSelectedLayersAlpha:[27,Fl],TegakiEventHistoryDummy:[254,pl],TegakiEventConclusion:[255,hl]});class xa{constructor(){this.formatVersion=1,this.compressed=!0,this.tegakiVersion=c.VERSION.split(".").map(t=>+t),this.canvasWidth=c.baseWidth,this.canvasHeight=c.baseHeight,this.bgColor=g.hexToRgb(c.bgColor),this.toolColor=g.hexToRgb(c.toolColor),this.toolId=c.tools[c.defaultTool].id,this.toolList=this.buildToolList(c.tools),this.startTimeStamp=0,this.endTimeStamp=0,this.recording=!1,this.events=[],this.mimeType="application/octet-stream"}buildToolList(t){var n,s,i;i=[];for(n in t)s=t[n],i.push({id:s.id,size:s.size,alpha:s.alpha,flow:s.flow,step:s.step,sizeDynamicsEnabled:+s.sizeDynamicsEnabled,alphaDynamicsEnabled:+s.alphaDynamicsEnabled,flowDynamicsEnabled:+s.flowDynamicsEnabled,usePreserveAlpha:+s.usePreserveAlpha,tipId:s.tipId});return i}start(){this.recording||(this.endTimeStamp>0&&(this.events.pop(),this.endTimeStamp=0),this.startTimeStamp===0&&(this.events.push(new dl(performance.now())),this.startTimeStamp=Date.now()),this.recording=!0)}stop(){this.startTimeStamp===0||!this.recording||(this.events.push(new hl(performance.now())),this.endTimeStamp=Date.now(),this.recording=!1)}push(t){this.recording&&(t.coalesce&&this.events[this.events.length-1].type===t.type?this.events[this.events.length-1]=t:this.events.push(t))}getEventStackSize(){var t,n;n=4;for(t of this.events)n+=t.size;return n}getHeaderSize(){return 12}getMetaSize(){return 21}getToolSize(){return 19}getToolListSize(){return 2+this.toolList.length*this.getToolSize()}writeToolList(t){var n,s,i;i=[["id","Uint8"],["size","Uint8"],["alpha","Float32"],["step","Float32"],["sizeDynamicsEnabled","Uint8"],["alphaDynamicsEnabled","Uint8"],["usePreserveAlpha","Uint8"],["tipId","Int8"],["flow","Float32"],["flowDynamicsEnabled","Uint8"]],t.writeUint8(this.toolList.length),t.writeUint8(this.getToolSize());for(n of this.toolList)for(s of i)t["write"+s[1]](n[s[0]])}writeMeta(t){t.writeUint16(this.getMetaSize()),t.writeUint32(Math.ceil(this.startTimeStamp/1e3)),t.writeUint32(Math.ceil(this.endTimeStamp/1e3)),t.writeUint16(this.canvasWidth),t.writeUint16(this.canvasHeight),t.writeUint8(this.bgColor[0]),t.writeUint8(this.bgColor[1]),t.writeUint8(this.bgColor[2]),t.writeUint8(this.toolColor[0]),t.writeUint8(this.toolColor[1]),t.writeUint8(this.toolColor[2]),t.writeUint8(this.toolId)}writeEventStack(t){var n;t.writeUint32(this.events.length);for(n of this.events)n.pack(t)}writeHeader(t,n){t.writeUint8(84),t.writeUint8(71),t.writeUint8(75),t.writeUint8(+this.compressed),t.writeUint32(n),t.writeUint8(this.tegakiVersion[0]),t.writeUint8(this.tegakiVersion[1]),t.writeUint8(this.tegakiVersion[2]),t.writeUint8(this.formatVersion)}compressData(t){return A.deflateRaw(new Uint8Array(t.buf),{level:9})}toUint8Array(){var t,n,s,i,r,a;return!this.startTimeStamp||!this.endTimeStamp?null:(t=this.getHeaderSize(),n=this.getMetaSize()+this.getToolListSize()+this.getEventStackSize(),s=new ArrayBuffer(n),i=new La(s),this.writeMeta(i),this.writeToolList(i),this.writeEventStack(i),r=this.compressData(i),i=new La(new ArrayBuffer(t+r.length)),this.writeHeader(i,n),a=new Uint8Array(i.buf),a.set(r,t),a)}toBlob(){var t=this.toUint8Array();return t?new Blob([t.buffer],{type:this.mimeType}):null}}class rp{constructor(){this.formatVersion=1,this.compressed=!0,this.tegakiVersion=[0,0,0],this.dataSize=0,this.canvasWidth=0,this.canvasHeight=0,this.bgColor=[0,0,0],this.toolColor=[0,0,0],this.toolId=1,this.toolMap={},this.startTimeStamp=0,this.endTimeStamp=0,this.loaded=!1,this.playing=!1,this.gapless=!0,this.autoPaused=!1,this.destroyed=!1,this.speedIndex=1,this.speedList=[.5,1,2,5,10,25],this.speed=this.speedList[this.speedIndex],this.maxEventsPerFrame=50,this.maxEventCount=864e4,this.events=[],this.preludePos=0,this.currentPos=0,this.conclusionPos=0,this.duration=0,this.playTimeStart=0,this.playTimeCurrent=0,this.eventIndex=0,this.maxCanvasWH=8192,this.maxGapTime=3e3,this.uiAccTime=0,this.onFrameThis=this.onFrame.bind(this)}destroy(){this.destroyed=!0,this.pause(),this.events=null}speedUp(){this.speedIndex+1<this.speedList.length&&(this.speed=this.speedList[++this.speedIndex])}slowDown(){this.speedIndex-1>=0&&(this.speed=this.speedList[--this.speedIndex])}toggleGapless(){this.gapless=!this.gapless}getCurrentPos(){return this.currentPos}getDuration(){return this.duration}loadFromURL(t){fetch(t).then(n=>this.onResponseReady(n)).catch(n=>this.onLoadError(n))}onResponseReady(t){t.ok?t.arrayBuffer().then(n=>this.onResponseBodyReady(n)).catch(n=>this.onLoadError(n)):this.onLoadError(t.statusText)}onResponseBodyReady(t){this.loadFromBuffer(t),c.onReplayLoaded()}onLoadError(t){_.printMsg(te().errorLoadReplay+t,0)}autoPause(){this.autoPaused=!0,this.pause()}pause(t){window.cancelAnimationFrame(this.onFrameThis),this.playing=!1,t&&(this.currentPos=0,this.eventIndex=0),c.onReplayTimeChanged(),c.onReplayPlayPauseChanged()}rewind(){this.autoPaused=!1,this.pause(!0),c.onReplayReset()}play(){this.playTimeStart=performance.now(),this.playTimeCurrent=this.playTimeStart,this.playing=!0,this.autoPaused=!1,this.uiAccTime=0,c.onReplayPlayPauseChanged(),window.requestAnimationFrame(this.onFrameThis)}togglePlayPause(){this.playing?this.pause():this.play()}onFrame(t){var n=t-this.playTimeCurrent;this.playing&&(this.playTimeCurrent=t,this.step(n),this.uiAccTime+=n,this.uiAccTime>1e3&&(c.onReplayTimeChanged(),this.uiAccTime=0),this.currentPos<this.duration?window.requestAnimationFrame(this.onFrameThis):this.pause())}step(t){var n,s,i;for(this.currentPos+=t*this.speed,s=this.currentPos+this.preludePos,this.gapless&&this.eventIndex<this.events.length&&(n=this.events[this.eventIndex],n.timeStamp-s>this.maxGapTime&&(this.currentPos=n.timeStamp-this.preludePos,s=n.timeStamp)),i=0;this.eventIndex<this.events.length&&(n=this.events[this.eventIndex],n.timeStamp<=s);){if(i>=this.maxEventsPerFrame){this.currentPos=n.timeStamp-this.preludePos;break}n.dispatch(),++this.eventIndex,++i}}getEventIdMap(){var t,n,s;t={};for(n in pe)s=pe[n],t[s[0]]=s[1];return t}readToolMap(t){var n,s,i,r,a,o,l;for(this.toolMap={},o=[["id","Uint8"],["size","Uint8"],["alpha","Float32"],["step","Float32"],["sizeDynamicsEnabled","Uint8"],["alphaDynamicsEnabled","Uint8"],["usePreserveAlpha","Uint8"],["tipId","Int8"],["flow","Float32"],["flowDynamicsEnabled","Uint8"]],s=t.readUint8(),i=t.readUint8(),n=0;n<s;++n){l=t.pos+i,r={};for(a of o){if(t.pos>=l)break;r[a[0]]=t["read"+a[1]]()}this.toolMap[r.id]=r,t.pos=l}}readHeader(t){var n;if(n=String.fromCharCode(t.readUint8(),t.readUint8(),t.readUint8()),n!=="TGK")throw"invalid header";this.compressed=t.readUint8()===1,this.dataSize=t.readUint32(),this.tegakiVersion[0]=t.readUint8(),this.tegakiVersion[1]=t.readUint8(),this.tegakiVersion[2]=t.readUint8(),this.formatVersion=t.readUint8()}decompressData(t){return A.inflateRaw(new Uint8Array(t.buf,t.pos),new Uint8Array(this.dataSize))}readMeta(t){var n,s;if(s=t.readUint16(),n=t.pos+s-2,this.startTimeStamp=t.readUint32()*1e3,this.endTimeStamp=t.readUint32()*1e3,this.canvasWidth=t.readUint16(),this.canvasHeight=t.readUint16(),this.canvasWidth>this.maxCanvasWH||this.canvasHeight>this.maxCanvasWH)throw"canvas too large";this.bgColor[0]=t.readUint8(),this.bgColor[1]=t.readUint8(),this.bgColor[2]=t.readUint8(),this.toolColor[0]=t.readUint8(),this.toolColor[1]=t.readUint8(),this.toolColor[2]=t.readUint8(),this.toolId=t.readUint8(),t.pos=n}readEventStack(t){var n,s,i,r,a,o;if(o=this.getEventIdMap(),s=t.readUint32(),s<1||s>this.maxEventCount)throw"invalid event count";for(n=0;n<s;++n){if(i=t.readUint8(),r=o[i],!r)throw"invalid event id";a=r.unpack(t),this.events.push(a)}if(this.events[0].type!==pe.TegakiEventPrelude[0])throw"invalid prelude";if(this.events[s-1].type!==pe.TegakiEventConclusion[0])throw"invalid conclusion";if(this.preludePos=this.events[0].timeStamp,this.conclusionPos=this.events[s-1].timeStamp,this.duration=this.conclusionPos-this.preludePos,this.duration<=0)throw"invalid duration"}loadFromBuffer(t){var n,s;return this.destroyed||this.loaded?!1:(n=new Ca(t),this.readHeader(n),s=this.decompressData(n),n=new Ca(s.buffer),this.readMeta(n),this.readToolMap(n),this.readEventStack(n),this.loaded=!0,!0)}}var _={draggedNode:null,draggedLabelLastX:0,draggedLabelFn:null,statusTimeout:0,layerPreviewCtxCache:new WeakMap,getLayerPreviewSize:function(){return g.calcThumbSize(c.baseWidth,c.baseHeight,24)},setupDragLabel:function(e,t){_.draggedLabelFn=t,_.draggedLabelLastX=e.clientX,g.on(document,"pointermove",_.processDragLabel),g.on(document,"pointerup",_.clearDragLabel)},processDragLabel:function(e){_.draggedLabelFn.call(c,e.clientX-_.draggedLabelLastX),_.draggedLabelLastX=e.clientX},clearDragLabel:function(e){g.off(document,"pointermove",_.processDragLabel),g.off(document,"pointerup",_.clearDragLabel)},printMsg:function(e,t=5e3){_.clearMsg(),g.id("tegaki-status-output").textContent=e,t>0&&(_.statusTimeout=setTimeout(_.clearMsg,5e3))},clearMsg:function(){_.statusTimeout&&(clearTimeout(_.statusTimeout),_.statusTimeout=0),g.id("tegaki-status-output").textContent=""},buildUI:function(){var e,t,n,s,i,r;return e=g.el("div"),e.id="tegaki",n=g.el("div"),n.id="tegaki-menu-cnt",c.replayMode?(n.appendChild(_.buildViewerMenuBar()),n.appendChild(_.buildReplayControls())):n.appendChild(_.buildMenuBar()),n.appendChild(_.buildToolModeBar()),e.appendChild(n),t=g.el("div"),t.id="tegaki-tools-cnt",t.appendChild(_.buildToolsMenu()),e.appendChild(t),[r,i]=_.buildCanvasCnt(),e.appendChild(r),s=g.el("div"),s.id="tegaki-ctrl-cnt",s.appendChild(_.buildZoomCtrlGroup()),s.appendChild(_.buildColorCtrlGroup(c.toolColor)),s.appendChild(_.buildSizeCtrlGroup()),s.appendChild(_.buildAlphaCtrlGroup()),s.appendChild(_.buildFlowCtrlGroup()),s.appendChild(_.buildLayersCtrlGroup()),e.appendChild(s),e.appendChild(_.buildStatusCnt()),[e,r,i]},buildMenuBar:function(){var e,t;e=g.el("div"),e.id="tegaki-menu-bar",t=g.el("span"),t.className="tegaki-mb-btn",t.textContent=te().newCanvas,g.on(t,"click",c.onNewClick),e.appendChild(t),t=g.el("span"),t.className="tegaki-mb-btn",t.textContent=te().export,g.on(t,"click",c.onExportClick),e.appendChild(t),t=g.el("span"),t.id="tegaki-undo-btn",t.className="tegaki-mb-btn",t.textContent=te().undo,t.title=at.getCaption("undo"),g.on(t,"click",c.onUndoClick),e.appendChild(t),t=g.el("span"),t.id="tegaki-redo-btn",t.className="tegaki-mb-btn",t.textContent=te().redo,t.title=at.getCaption("redo"),g.on(t,"click",c.onRedoClick),e.appendChild(t);var n=g.el("span");n.className="tegaki-mb-btn",n.textContent=te().close,g.on(n,"click",c.onCancelClick),e.appendChild(n);var s=g.el("span");return s.id="tegaki-finish-btn",s.className="tegaki-mb-btn",s.textContent=te().finish,g.on(s,"click",c.onDoneClick),e.appendChild(s),e},buildViewerMenuBar:function(){var e,t;return e=g.el("div"),e.id="tegaki-menu-bar",t=g.el("span"),t.id="tegaki-finish-btn",t.className="tegaki-mb-btn",t.textContent=te().close,g.on(t,"click",c.onCloseViewerClick),e.appendChild(t),e},buildToolModeBar:function(){var e,t,n,s;return e=g.el("div"),e.id="tegaki-toolmode-bar",c.tool||e.classList.add("tegaki-hidden"),t=g.el("span"),t.id="tegaki-tool-mode-dynamics",t.className="tegaki-toolmode-grp",n=g.el("span"),n.className="tegaki-toolmode-lbl",n.textContent=te().pressure,t.appendChild(n),n=g.el("span"),n.id="tegaki-tool-mode-dynamics-ctrl",n.className="tegaki-toolmode-ctrl",s=g.el("span"),s.id="tegaki-tool-mode-dynamics-size",s.className="tegaki-sw-btn",s.textContent=te().size,g.on(s,"mousedown",c.onToolPressureSizeClick),n.appendChild(s),s=g.el("span"),s.id="tegaki-tool-mode-dynamics-alpha",s.className="tegaki-sw-btn",s.textContent=te().alpha,g.on(s,"mousedown",c.onToolPressureAlphaClick),n.appendChild(s),s=g.el("span"),s.id="tegaki-tool-mode-dynamics-flow",s.className="tegaki-sw-btn",s.textContent=te().flow,g.on(s,"mousedown",c.onToolPressureFlowClick),n.appendChild(s),t.appendChild(n),e.appendChild(t),t=g.el("span"),t.id="tegaki-tool-mode-mask",t.className="tegaki-toolmode-grp",n=g.el("span"),n.id="tegaki-toolmode-ctrl-tip",n.className="tegaki-toolmode-ctrl",s=g.el("span"),s.id="tegaki-tool-mode-mask-alpha",s.className="tegaki-sw-btn",s.textContent=te().preserveAlpha,g.on(s,"mousedown",c.onToolPreserveAlphaClick),n.appendChild(s),t.appendChild(n),e.appendChild(t),t=g.el("span"),t.id="tegaki-tool-mode-tip",t.className="tegaki-toolmode-grp",n=g.el("span"),n.className="tegaki-toolmode-lbl",n.textContent=te().tip,t.appendChild(n),n=g.el("span"),n.id="tegaki-tool-mode-tip-ctrl",n.className="tegaki-toolmode-ctrl",t.appendChild(n),e.appendChild(t),e},buildToolsMenu:function(){var e,t,n,s;e=g.el("div"),e.id="tegaki-tools-grid";for(s in c.tools)t=g.el("span"),t.setAttribute("data-tool",s),n=te[s],c.tools[s].keybind&&(n+=" ("+c.tools[s].keybind.toUpperCase()+")"),t.setAttribute("title",n),t.id="tegaki-tool-btn-"+s,t.className="tegaki-tool-btn tegaki-icon tegaki-"+s,g.on(t,"click",c.onToolClick),e.appendChild(t);return e},buildCanvasCnt:function(){var e,t,n;return e=g.el("div"),e.id="tegaki-canvas-cnt",t=g.el("div"),t.id="tegaki-layers-wrap",n=g.el("div"),n.id="tegaki-layers",t.appendChild(n),e.appendChild(t),[e,n]},buildCtrlGroup:function(e,t){var n,s;return n=g.el("div"),n.className="tegaki-ctrlgrp",e&&(n.id="tegaki-ctrlgrp-"+e),t!==void 0&&(s=g.el("div"),s.className="tegaki-ctrlgrp-title",s.textContent=t,n.appendChild(s)),n},buildLayersCtrlGroup:function(){var e,t,n,s;return t=this.buildCtrlGroup("layers",te().layers),n=g.el("div"),n.id="tegaki-layers-opts",s=g.el("div"),s.id="tegaki-layer-alpha-cell",e=g.el("span"),e.className="tegaki-label-xs tegaki-lbl-c tegaki-drag-lbl",e.textContent=te().alpha,g.on(e,"pointerdown",c.onLayerAlphaDragStart),s.appendChild(e),e=g.el("input"),e.id="tegaki-layer-alpha-opt",e.className="tegaki-stealth-input tegaki-range-lbl-xs",e.setAttribute("maxlength",3),g.on(e,"input",c.onLayerAlphaChange),s.appendChild(e),n.appendChild(s),t.appendChild(n),e=g.el("div"),e.id="tegaki-layers-grid",t.appendChild(e),n=g.el("div"),n.id="tegaki-layers-ctrl",e=g.el("span"),e.title=te().addLayer,e.className="tegaki-ui-btn tegaki-icon tegaki-plus",g.on(e,"click",c.onLayerAddClick),n.appendChild(e),e=g.el("span"),e.title=te().delLayers,e.className="tegaki-ui-btn tegaki-icon tegaki-minus",g.on(e,"click",c.onLayerDeleteClick),n.appendChild(e),e=g.el("span"),e.id="tegaki-layer-merge",e.title=te().mergeLayers,e.className="tegaki-ui-btn tegaki-icon tegaki-level-down",g.on(e,"click",c.onMergeLayersClick),n.appendChild(e),e=g.el("span"),e.id="tegaki-layer-up",e.title=te().moveLayerUp,e.setAttribute("data-up","1"),e.className="tegaki-ui-btn tegaki-icon tegaki-up-open",g.on(e,"click",c.onMoveLayerClick),n.appendChild(e),e=g.el("span"),e.id="tegaki-layer-down",e.title=te().moveLayerDown,e.className="tegaki-ui-btn tegaki-icon tegaki-down-open",g.on(e,"click",c.onMoveLayerClick),n.appendChild(e),t.appendChild(n),t},buildSizeCtrlGroup:function(){var e,t,n;return t=this.buildCtrlGroup("size",te().size),n=g.el("div"),n.className="tegaki-ctrlrow",e=g.el("input"),e.id="tegaki-size",e.className="tegaki-ctrl-range",e.min=1,e.max=c.maxSize,e.type="range",e.title=at.getCaption("toolSize"),g.on(e,"input",c.onToolSizeChange),n.appendChild(e),e=g.el("input"),e.id="tegaki-size-lbl",e.setAttribute("maxlength",3),e.className="tegaki-stealth-input tegaki-range-lbl",g.on(e,"input",c.onToolSizeChange),n.appendChild(e),t.appendChild(n),t},buildAlphaCtrlGroup:function(){var e,t,n;return t=this.buildCtrlGroup("alpha",te().alpha),n=g.el("div"),n.className="tegaki-ctrlrow",e=g.el("input"),e.id="tegaki-alpha",e.className="tegaki-ctrl-range",e.min=0,e.max=100,e.step=1,e.type="range",g.on(e,"input",c.onToolAlphaChange),n.appendChild(e),e=g.el("input"),e.id="tegaki-alpha-lbl",e.setAttribute("maxlength",3),e.className="tegaki-stealth-input tegaki-range-lbl",g.on(e,"input",c.onToolAlphaChange),n.appendChild(e),t.appendChild(n),t},buildFlowCtrlGroup:function(){var e,t,n;return t=this.buildCtrlGroup("flow",te().flow),n=g.el("div"),n.className="tegaki-ctrlrow",e=g.el("input"),e.id="tegaki-flow",e.className="tegaki-ctrl-range",e.min=0,e.max=100,e.step=1,e.type="range",g.on(e,"input",c.onToolFlowChange),n.appendChild(e),e=g.el("input"),e.id="tegaki-flow-lbl",e.setAttribute("maxlength",3),e.className="tegaki-stealth-input tegaki-range-lbl",g.on(e,"input",c.onToolFlowChange),n.appendChild(e),t.appendChild(n),t},buildZoomCtrlGroup:function(){var e,t,n;return n=this.buildCtrlGroup("zoom",te().zoom),t=g.el("div"),t.className="tegaki-ui-btn tegaki-icon tegaki-plus",t.id="tegaki-zoomin-btn",t.setAttribute("data-in",1),g.on(t,"click",c.onZoomChange),n.appendChild(t),t=g.el("div"),t.className="tegaki-ui-btn tegaki-icon tegaki-minus",t.id="tegaki-zoomout-btn",t.setAttribute("data-out",1),g.on(t,"click",c.onZoomChange),n.appendChild(t),e=g.el("div"),e.id="tegaki-zoom-lbl",n.appendChild(e),n},buildColorCtrlGroup:function(e){var t,n,s,i,r,a,o,l,u;for(a=/ Edge\//i.test(window.navigator.userAgent),i=this.buildCtrlGroup("color",te().color),n=g.el("div"),n.id="tegaki-color-ctrl",t=g.el("div"),t.id="tegaki-color",a&&t.classList.add("tegaki-hidden"),t.style.backgroundColor=e,g.on(t,"mousedown",c.onMainColorClick),n.appendChild(t),t=g.el("div"),t.id="tegaki-palette-switcher",s=g.el("span"),s.id="tegaki-palette-prev-btn",s.title=te().switchPalette,s.setAttribute("data-prev","1"),s.className="tegaki-ui-btn tegaki-icon tegaki-left-open tegaki-disabled",g.on(s,"click",c.onSwitchPaletteClick),t.appendChild(s),s=g.el("span"),s.id="tegaki-palette-next-btn",s.title=te().switchPalette,s.className="tegaki-ui-btn tegaki-icon tegaki-right-open",g.on(s,"click",c.onSwitchPaletteClick),t.appendChild(s),n.appendChild(t),i.appendChild(n),n=g.el("div"),n.id="tegaki-color-grids",o=0;o<vs.length;++o){t=g.el("div"),t.setAttribute("data-id",o),u="tegaki-color-grid",l=vs[o],l.length<=18?u+=" tegaki-color-grid-20":u+=" tegaki-color-grid-15",o>0&&(u+=" tegaki-hidden"),t.className=u;for(r of l)s=g.el("div"),s.title=te().paletteSlotReplace,s.className="tegaki-color-btn",s.setAttribute("data-color",r),s.style.backgroundColor=r,g.on(s,"mousedown",c.onPaletteColorClick),t.appendChild(s);n.appendChild(t)}return i.appendChild(n),t=g.el("input"),t.id="tegaki-colorpicker",!a&&t.classList.add("tegaki-invis"),t.value=r,t.type="color",g.on(t,"change",c.onColorPicked),i.appendChild(t),i},buildStatusCnt:function(){var e,t;return e=g.el("div"),e.id="tegaki-status-cnt",c.saveReplay&&(t=g.el("div"),t.id="tegaki-status-replay",t.textContent="",t.setAttribute("title",te().recordingEnabled),e.appendChild(t)),t=g.el("div"),t.id="tegaki-status-output",e.appendChild(t),t=g.el("div"),t.id="tegaki-status-version",t.textContent="tegaki.js v"+c.VERSION,e.appendChild(t),e},buildReplayControls:function(){var e,t,n;return e=g.el("div"),e.id="tegaki-replay-controls",e.className="tegaki-hidden",t=g.el("span"),t.id="tegaki-replay-gapless-btn",t.className="tegaki-ui-cb-w",g.on(t,"click",c.onReplayGaplessClick),n=g.el("span"),n.id="tegaki-replay-gapless-cb",n.className="tegaki-ui-cb",t.appendChild(n),n=g.el("span"),n.className="tegaki-menu-lbl",n.textContent=te().gapless,t.appendChild(n),e.appendChild(t),t=g.el("span"),t.id="tegaki-replay-play-btn",t.className="tegaki-ui-btn tegaki-icon tegaki-play",t.setAttribute("title",te().play),g.on(t,"click",c.onReplayPlayPauseClick),e.appendChild(t),t=g.el("span"),t.className="tegaki-ui-btn tegaki-icon tegaki-to-start",t.setAttribute("title",te().rewind),g.on(t,"click",c.onReplayRewindClick),e.appendChild(t),t=g.el("span"),t.id="tegaki-replay-slower-btn",t.className="tegaki-ui-btn tegaki-icon tegaki-fast-bw",t.setAttribute("title",te().slower),g.on(t,"click",c.onReplaySlowDownClick),e.appendChild(t),n=g.el("span"),n.id="tegaki-replay-speed-lbl",n.className="tegaki-menu-lbl",n.textContent="1.0",e.appendChild(n),t=g.el("span"),t.id="tegaki-replay-faster-btn",t.className="tegaki-ui-btn tegaki-icon tegaki-fast-fw",t.setAttribute("title",te().faster),g.on(t,"click",c.onReplaySpeedUpClick),e.appendChild(t),n=g.el("span"),n.id="tegaki-replay-now-lbl",n.className="tegaki-menu-lbl",n.textContent="00:00",e.appendChild(n),n=g.el("span"),n.id="tegaki-replay-end-lbl",n.className="tegaki-menu-lbl",n.textContent="00:00",e.appendChild(n),e},buildLayerGridCell:function(e){var t,n,s;return t=g.el("div"),t.id="tegaki-layers-cell-"+e.id,t.className="tegaki-layers-cell",t.setAttribute("data-id",e.id),t.draggable=!0,t.setAttribute("data-id",e.id),g.on(t,"pointerdown",_.onLayerSelectorPtrDown),g.on(t,"pointerup",c.onLayerSelectorClick),g.on(t,"dragstart",_.onLayerDragStart),g.on(t,"dragover",_.onLayerDragOver),g.on(t,"drop",_.onLayerDragDrop),g.on(t,"dragend",_.onLayerDragEnd),g.on(t,"dragleave",_.onLayerDragLeave),g.on(t,"dragexit",_.onLayerDragLeave),s=g.el("div"),s.className="tegaki-layers-cell-v",n=g.el("span"),n.id="tegaki-layers-cb-v-"+e.id,n.className="tegaki-ui-cb",n.setAttribute("data-id",e.id),n.title=te().toggleVisibility,g.on(n,"click",c.onLayerToggleVisibilityClick),e.visible&&(n.className+=" tegaki-ui-cb-a"),s.appendChild(n),t.appendChild(s),s=g.el("div"),s.className="tegaki-layers-cell-p",n=g.el("canvas"),n.id="tegaki-layers-p-canvas-"+e.id,n.className="tegaki-alpha-bg-xs",[n.width,n.height]=_.getLayerPreviewSize(),s.appendChild(n),t.appendChild(s),s=g.el("div"),s.className="tegaki-layers-cell-n",n=g.el("div"),n.id="tegaki-layer-name-"+e.id,n.className="tegaki-ellipsis",n.setAttribute("data-id",e.id),n.textContent=e.name,g.on(n,"dblclick",c.onLayerNameChangeClick),s.appendChild(n),t.appendChild(s),t},onLayerSelectorPtrDown:function(e){e.pointerType==="mouse"?this.hasAttribute("data-nodrag")&&(this.removeAttribute("data-nodrag"),g.on(this,"dragstart",_.onLayerDragStart)):this.hasAttribute("data-nodrag")||(this.setAttribute("data-nodrag",1),g.off(this,"dragstart",_.onLayerDragStart))},onLayerDragStart:function(e){var t,n;if(!e.ctrlKey){if(_.draggedNode=null,!g.id("tegaki-layers-grid").children[1]){e.preventDefault();return}n=+e.target.getAttribute("data-id"),t=g.el("div"),t.className="tegaki-invis",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.setData("text/plain",n),e.dataTransfer.effectAllowed="move",_.draggedNode=e.target,_.updateLayersGridDragExt(!0)}},onLayerDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move",_.updateLayersGridDragEffect(e.target,+_.draggedNode.getAttribute("data-id"))},onLayerDragLeave:function(e){_.updateLayersGridDragEffect()},onLayerDragEnd:function(e){_.draggedNode=null,_.updateLayersGridDragExt(!1),_.updateLayersGridDragEffect()},onLayerDragDrop:function(e){var t,n,s;e.preventDefault(),_.draggedNode=null,[t]=_.layersGridFindDropTgt(e.target),n=+e.dataTransfer.getData("text/plain"),_.updateLayersGridDragEffect(e.target.parentNode),_.updateLayersGridDragExt(!1),_.layersGridCanDrop(t,n)&&(t?s=B.getLayerPosById(t):s=c.layers.length,B.selectedLayersHas(n)||c.setActiveLayer(n),c.moveSelectedLayers(s))},updateLayersGridDragExt:function(e){var t,n;t=g.id("tegaki-layers-grid"),t.children[1]&&(e?(n=g.el("div"),n.id="tegaki-layers-cell-dx",n.draggable=!0,g.on(n,"dragover",_.onLayerDragOver),g.on(n,"drop",_.onLayerDragDrop),t.parentNode.insertBefore(n,t)):(n=g.id("tegaki-layers-cell-dx"))&&n.parentNode.removeChild(n))},updateLayersGridDragEffect:function(e,t){var n,s,i;s=g.cls("tegaki-layers-cell-d",g.id("tegaki-ctrlgrp-layers"));for(n of s)n.classList.remove("tegaki-layers-cell-d");!e||!t||([i,e]=_.layersGridFindDropTgt(e),_.layersGridCanDrop(i,t)&&(e||(e=g.id("tegaki-layers-grid")),e.classList.add("tegaki-layers-cell-d")))},layersGridFindDropTgt:function(e){var t,n;for(t=+e.getAttribute("data-id"),n=g.id("tegaki-ctrlgrp-layers");!e.draggable&&e!==n;)e=e.parentNode,t=+e.getAttribute("data-id");return e===n||!e.draggable?[0,null]:[t,e]},layersGridCanDrop:function(e,t){var n;if(e===t)return!1;if(n=g.id("tegaki-layers-cell-"+t),n.previousElementSibling){if(+n.previousElementSibling.getAttribute("data-id")===e)return!1}else if(!e)return!1;return!0},setReplayMode:function(e){c.bg.classList[e?"add":"remove"]("tegaki-replay-mode")},onToolChanged:function(){g.id("tegaki-toolmode-bar").classList.remove("tegaki-hidden"),_.updateToolSize(),_.updateToolAlpha(),_.updateToolFlow(),_.updateToolModes()},updateLayerAlphaOpt:function(){var e=g.id("tegaki-layer-alpha-opt");e.value=Math.round(c.activeLayer.alpha*100)},updateLayerName:function(e){var t;(t=g.id("tegaki-layer-name-"+e.id))&&(t.textContent=e.name)},updateLayerPreview:function(e){var t,n;t=g.id("tegaki-layers-p-canvas-"+e.id),t&&(n=_.getLayerPreviewCtx(e),n||(n=t.getContext("2d"),n.imageSmoothingEnabled=!1,_.setLayerPreviewCtx(e,n)),g.clearCtx(n),n.drawImage(e.canvas,0,0,t.width,t.height))},updateLayerPreviewSize:function(e){var t,n,s;s=_.getLayerPreviewSize();for(n of c.layers)(t=g.id("tegaki-layers-p-canvas-"+n.id))&&([t.width,t.height]=s,e&&_.updateLayerPreview(n))},getLayerPreviewCtx:function(e){_.layerPreviewCtxCache.get(e)},setLayerPreviewCtx:function(e,t){_.layerPreviewCtxCache.set(e,t)},deleteLayerPreviewCtx:function(e){_.layerPreviewCtxCache.delete(e)},updateLayersGridClear:function(){g.id("tegaki-layers-grid").innerHTML=""},updateLayersGrid:function(){var e,t,n,s;n=g.frag();for(e of c.layers)t=_.buildLayerGridCell(e),n.insertBefore(t,n.firstElementChild);_.updateLayersGridClear(),s.appendChild(n)},updateLayersGridActive:function(e){var t;t=g.cls("tegaki-layers-cell-a",g.id("tegaki-layers-grid"))[0],t&&t.classList.remove("tegaki-layers-cell-a"),t=g.id("tegaki-layers-cell-"+e),t&&t.classList.add("tegaki-layers-cell-a"),_.updateLayerAlphaOpt()},updateLayersGridAdd:function(e,t){var n,s,i;n=_.buildLayerGridCell(e),s=g.id("tegaki-layers-grid"),t?i=g.id("tegaki-layers-cell-"+t):i=null,s.insertBefore(n,i)},updateLayersGridRemove:function(e){var t;(t=g.id("tegaki-layers-cell-"+e))&&t.parentNode.removeChild(t)},updayeLayersGridOrder:function(){var e,t,n;t=g.id("tegaki-layers-grid");for(e of c.layers)n=g.id("tegaki-layers-cell-"+e.id),t.insertBefore(n,t.firstElementChild)},updateLayersGridVisibility:function(e,t){var n;n=g.id("tegaki-layers-cb-v-"+e),n&&(t?n.classList.add("tegaki-ui-cb-a"):n.classList.remove("tegaki-ui-cb-a"))},updateLayersGridSelectedClear:function(){var e,t;for(e of c.layers)(t=g.id("tegaki-layers-cell-"+e.id))&&t.classList.remove("tegaki-layers-cell-s")},updateLayersGridSelectedSet:function(e,t){var n;(n=g.id("tegaki-layers-cell-"+e))&&(t?n.classList.add("tegaki-layers-cell-s"):n.classList.remove("tegaki-layers-cell-s"))},updateToolSize:function(){var e=g.id("tegaki-ctrlgrp-size");c.tool.useSize?(e.classList.remove("tegaki-hidden"),g.id("tegaki-size-lbl").value=c.tool.size,g.id("tegaki-size").value=c.tool.size):e.classList.add("tegaki-hidden")},updateToolAlpha:function(){var e,t=g.id("tegaki-ctrlgrp-alpha");c.tool.useAlpha?(t.classList.remove("tegaki-hidden"),e=Math.round(c.tool.alpha*100),g.id("tegaki-alpha-lbl").value=e,g.id("tegaki-alpha").value=e):t.classList.add("tegaki-hidden")},updateToolFlow:function(){var e,t=g.id("tegaki-ctrlgrp-flow");c.tool.useFlow?(t.classList.remove("tegaki-hidden"),e=Math.round(c.tool.flow*100),g.id("tegaki-flow-lbl").value=e,g.id("tegaki-flow").value=e):t.classList.add("tegaki-hidden")},updateToolDynamics:function(){var e,t;e=g.id("tegaki-tool-mode-dynamics"),c.tool.usesDynamics()?(t=g.id("tegaki-tool-mode-dynamics-size"),c.tool.useSizeDynamics?(c.tool.sizeDynamicsEnabled?t.classList.add("tegaki-sw-btn-a"):t.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden"),t=g.id("tegaki-tool-mode-dynamics-alpha"),c.tool.useAlphaDynamics?(c.tool.alphaDynamicsEnabled?t.classList.add("tegaki-sw-btn-a"):t.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden"),t=g.id("tegaki-tool-mode-dynamics-flow"),c.tool.useFlowDynamics?(c.tool.flowDynamicsEnabled?t.classList.add("tegaki-sw-btn-a"):t.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden"),e.classList.remove("tegaki-hidden")):e.classList.add("tegaki-hidden")},updateToolShape:function(){var e,t,n,s,i;if(t=g.id("tegaki-tool-mode-tip"),!c.tool.tipList)t.classList.add("tegaki-hidden");else{for(i=c.tool.tipList,n=g.id("tegaki-tool-mode-tip-ctrl"),n.innerHTML="",e=0;e<i.length;++e)s=g.el("span"),s.id="tegaki-tool-mode-tip-"+e,s.className="tegaki-sw-btn",s.setAttribute("data-id",e),s.textContent=te[i[e]],g.on(s,"mousedown",c.onToolTipClick),n.appendChild(s),c.tool.tipId===e&&s.classList.add("tegaki-sw-btn-a");t.classList.remove("tegaki-hidden")}},updateToolPreserveAlpha:function(){var e,t;t=g.id("tegaki-tool-mode-mask"),c.tool.usePreserveAlpha?(e=g.id("tegaki-tool-mode-mask-alpha"),c.tool.preserveAlphaEnabled?e.classList.add("tegaki-sw-btn-a"):e.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden")},updateToolModes:function(){var e,t;_.updateToolShape(),_.updateToolDynamics(),_.updateToolPreserveAlpha(),t=!1;for(e of g.id("tegaki-toolmode-bar").children)!t&&!e.classList.contains("tegaki-hidden")?(e.classList.add("tegaki-ui-borderless"),t=!0):e.classList.remove("tegaki-ui-borderless")},updateUndoRedo:function(e,t){var n,s;c.replayMode||(n=g.id("tegaki-undo-btn").classList,s=g.id("tegaki-redo-btn").classList,e?n.contains("tegaki-disabled")&&n.remove("tegaki-disabled"):n.contains("tegaki-disabled")||n.add("tegaki-disabled"),t?s.contains("tegaki-disabled")&&s.remove("tegaki-disabled"):s.contains("tegaki-disabled")||s.add("tegaki-disabled"))},updateZoomLevel:function(){g.id("tegaki-zoom-lbl").textContent=c.zoomFactor*100+"%",c.zoomLevel+c.zoomBaseLevel>=c.zoomFactorList.length?g.id("tegaki-zoomin-btn").classList.add("tegaki-disabled"):g.id("tegaki-zoomin-btn").classList.remove("tegaki-disabled"),c.zoomLevel+c.zoomBaseLevel<=0?g.id("tegaki-zoomout-btn").classList.add("tegaki-disabled"):g.id("tegaki-zoomout-btn").classList.remove("tegaki-disabled")},updateColorPalette:function(){var e,t,n;n=c.colorPaletteId,t=g.cls("tegaki-color-grid",g.id("tegaki-color-grids"));for(e of t)+e.getAttribute("data-id")===n?e.classList.remove("tegaki-hidden"):e.classList.add("tegaki-hidden");e=g.id("tegaki-palette-prev-btn"),n===0?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled"),e=g.id("tegaki-palette-next-btn"),n===vs.length-1?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled")},updateReplayTime:function(e){var t,n,s=c.replayViewer;t=s.getCurrentPos(),n=s.getDuration(),t>n&&(t=n),g.id("tegaki-replay-now-lbl").textContent=g.msToHms(t),e&&(g.id("tegaki-replay-end-lbl").textContent=g.msToHms(n))},updateReplayControls:function(){_.updateReplayGapless(),_.updateReplayPlayPause(),_.updateReplaySpeed()},updateReplayGapless:function(){var e,t=c.replayViewer;e=g.id("tegaki-replay-gapless-cb"),t.gapless?e.classList.add("tegaki-ui-cb-a"):e.classList.remove("tegaki-ui-cb-a")},updateReplayPlayPause:function(){var e,t=c.replayViewer;e=g.id("tegaki-replay-play-btn"),t.playing?(e.classList.remove("tegaki-play"),e.classList.add("tegaki-pause"),e.setAttribute("title",te().pause)):(e.classList.add("tegaki-play"),e.classList.remove("tegaki-pause"),e.setAttribute("title",te().play),t.getCurrentPos()<t.getDuration()?e.classList.remove("tegaki-disabled"):e.classList.add("tegaki-disabled"))},updateReplaySpeed:function(){var e,t=c.replayViewer;g.id("tegaki-replay-speed-lbl").textContent=t.speed.toFixed(1),e=g.id("tegaki-replay-slower-btn"),t.speedIndex===0?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled"),e=g.id("tegaki-replay-faster-btn"),t.speedIndex===t.speedList.length-1?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled")},enableReplayControls:function(e){e?g.id("tegaki-replay-controls").classList.remove("tegaki-hidden"):g.id("tegaki-replay-controls").classList.add("tegaki-hidden")},setRecordingStatus:function(e){var t=g.id("tegaki-status-replay");e?t.classList.remove("tegaki-hidden"):t.classList.add("tegaki-hidden")}};/*! UZIP.js,  2018 Photopea, MIT License */var A={};typeof module=="object"&&(module.exports=A);A.inflateRaw=function(e,t){return A.F.inflate(e,t)};A.deflateRaw=function(e,t){t==null&&(t={level:6});var n=new Uint8Array(50+Math.floor(e.length*1.1)),s=A.F.deflateRaw(e,n,s,t.level);return new Uint8Array(n.buffer,0,s)};A.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=n&255,e[t+1]=n>>8&255},readUint:function(e,t){return e[t+3]*(256*256*256)+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=n&255,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var s="",i=0;i<n;i++)s+=String.fromCharCode(e[t+i]);return s},writeASCII:function(e,t,n){for(var s=0;s<n.length;s++)e[t+s]=n.charCodeAt(s)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,n){for(var s="",i,r=0;r<n;r++)s+="%"+A.bin.pad(e[t+r].toString(16));try{i=decodeURIComponent(s)}catch{return A.bin.readASCII(e,t,n)}return i},writeUTF8:function(e,t,n){for(var s=n.length,i=0,r=0;r<s;r++){var a=n.charCodeAt(r);if(!(a&4294967168))e[t+i]=a,i++;else if(!(a&4294965248))e[t+i]=192|a>>6,e[t+i+1]=128|a>>0&63,i+=2;else if(!(a&4294901760))e[t+i]=224|a>>12,e[t+i+1]=128|a>>6&63,e[t+i+2]=128|a>>0&63,i+=3;else if(!(a&4294967295-(1<<21)+1))e[t+i]=240|a>>18,e[t+i+1]=128|a>>12&63,e[t+i+2]=128|a>>6&63,e[t+i+3]=128|a>>0&63,i+=4;else throw"e"}return i},sizeUTF8:function(e){for(var t=e.length,n=0,s=0;s<t;s++){var i=e.charCodeAt(s);if(!(i&4294967168))n++;else if(!(i&4294965248))n+=2;else if(!(i&4294901760))n+=3;else if(!(i&4294967295-(1<<21)+1))n+=4;else throw"e"}return n}};A.F={};A.F.deflateRaw=function(e,t,n,s){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]],r=i[s],a=A.F.U,o=A.F._goodIndex;A.F._hash;var l=A.F._putsE,u=0,f=n<<3,d=0,h=e.length;if(s==0){for(;u<h;){var p=Math.min(65535,h-u);l(t,f,u+p==h?1:0),f=A.F._copyExact(e,u,p,t,f+8),u+=p}return f>>>3}var v=a.lits,b=a.strt,L=a.prev,S=0,C=0,x=0,w=0,N=0,W=0;for(h>2&&(W=A.F._hash(e,0),b[W]=0),u=0;u<h;u++){if(N=W,u+1<h-2){W=A.F._hash(e,u+1);var F=u+1&32767;L[F]=b[W],b[W]=F}if(d<=u){(S>14e3||C>26697)&&h-u>100&&(d<u&&(v[S]=u-d,S+=2,d=u),f=A.F._writeBlock(u==h-1||d==h?1:0,v,S,w,e,x,u-x,t,f),S=C=w=0,x=u);var R=0;u<h-2&&(R=A.F._bestMatch(e,u,L,N,Math.min(r[2],h-u),r[3]));var p=R>>>16,$=R&65535;if(R!=0){var p=R>>>16,$=R&65535,K=o(p,a.of0);a.lhst[257+K]++;var re=o($,a.df0);a.dhst[re]++,w+=a.exb[K]+a.dxb[re],v[S]=p<<23|u-d,v[S+1]=$<<16|K<<8|re,S+=2,d=u+p}else a.lhst[e[u]]++;C++}}for((x!=u||e.length==0)&&(d<u&&(v[S]=u-d,S+=2,d=u),f=A.F._writeBlock(1,v,S,w,e,x,u-x,t,f),S=0,C=0,S=C=w=0,x=u);f&7;)f++;return f>>>3};A.F._bestMatch=function(e,t,n,s,i,r){var a=t&32767,o=n[a],l=a-o+32768&32767;if(o==a||s!=A.F._hash(e,t-l))return 0;for(var u=0,f=0,d=Math.min(32767,t);l<=d&&--r!=0&&o!=a;){if(u==0||e[t+u]==e[t+u-l]){var h=A.F._howLong(e,t,l);if(h>u){if(u=h,f=l,u>=i)break;l+2<h&&(h=l+2);for(var p=0,v=0;v<h-2;v++){var b=t-l+v+32768&32767,L=n[b],S=b-L+32768&32767;S>p&&(p=S,o=b)}}}a=o,o=n[a],l+=a-o+32768&32767}return u<<16|f};A.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var s=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-s};A.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535};A.saved=0;A.F._writeBlock=function(e,t,n,s,i,r,a,o,l){var u=A.F.U,f=A.F._putsF,d=A.F._putsE,h,p,v,b,L,S,C,x,w;u.lhst[256]++,h=A.F.getTrees(),p=h[0],v=h[1],b=h[2],L=h[3],S=h[4],C=h[5],x=h[6],w=h[7];var N=(l+3&7?8-(l+3&7):0)+32+(a<<3),W=s+A.F.contSize(u.fltree,u.lhst)+A.F.contSize(u.fdtree,u.dhst),F=s+A.F.contSize(u.ltree,u.lhst)+A.F.contSize(u.dtree,u.dhst);F+=14+3*C+A.F.contSize(u.itree,u.ihst)+(u.ihst[16]*2+u.ihst[17]*3+u.ihst[18]*7);for(var R=0;R<286;R++)u.lhst[R]=0;for(var R=0;R<30;R++)u.dhst[R]=0;for(var R=0;R<19;R++)u.ihst[R]=0;var $=N<W&&N<F?0:W<F?1:2;if(f(o,l,e),f(o,l+1,$),l+=3,$==0){for(;l&7;)l++;l=A.F._copyExact(i,r,a,o,l)}else{var K,re;if($==1&&(K=u.fltree,re=u.fdtree),$==2){A.F.makeCodes(u.ltree,p),A.F.revCodes(u.ltree,p),A.F.makeCodes(u.dtree,v),A.F.revCodes(u.dtree,v),A.F.makeCodes(u.itree,b),A.F.revCodes(u.itree,b),K=u.ltree,re=u.dtree,d(o,l,L-257),l+=5,d(o,l,S-1),l+=5,d(o,l,C-4),l+=4;for(var Q=0;Q<C;Q++)d(o,l+Q*3,u.itree[(u.ordr[Q]<<1)+1]);l+=3*C,l=A.F._codeTiny(x,u.itree,o,l),l=A.F._codeTiny(w,u.itree,o,l)}for(var le=r,fe=0;fe<n;fe+=2){for(var Se=t[fe],oe=Se>>>23,q=le+(Se&(1<<23)-1);le<q;)l=A.F._writeLit(i[le++],K,o,l);if(oe!=0){var Y=t[fe+1],Ie=Y>>16,Ee=Y>>8&255,Re=Y&255;l=A.F._writeLit(257+Ee,K,o,l),d(o,l,oe-u.of0[Ee]),l+=u.exb[Ee],l=A.F._writeLit(Re,re,o,l),f(o,l,Ie-u.df0[Re]),l+=u.dxb[Re],le+=oe}}l=A.F._writeLit(256,K,o,l)}return l};A.F._copyExact=function(e,t,n,s,i){var r=i>>>3;return s[r]=n,s[r+1]=n>>>8,s[r+2]=255-s[r],s[r+3]=255-s[r+1],r+=4,s.set(new Uint8Array(e.buffer,t,n),r),i+(n+4<<3)};A.F.getTrees=function(){for(var e=A.F.U,t=A.F._hufTree(e.lhst,e.ltree,15),n=A.F._hufTree(e.dhst,e.dtree,15),s=[],i=A.F._lenCodes(e.ltree,s),r=[],a=A.F._lenCodes(e.dtree,r),o=0;o<s.length;o+=2)e.ihst[s[o]]++;for(var o=0;o<r.length;o+=2)e.ihst[r[o]]++;for(var l=A.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&e.itree[(e.ordr[u-1]<<1)+1]==0;)u--;return[t,n,l,i,a,u,s,r]};A.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t};A.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)e[n+1]!=0&&(t+=(n>>1)+",");return t};A.F.contSize=function(e,t){for(var n=0,s=0;s<t.length;s++)n+=t[s]*e[(s<<1)+1];return n};A.F._codeTiny=function(e,t,n,s){for(var i=0;i<e.length;i+=2){var r=e[i],a=e[i+1];s=A.F._writeLit(r,t,n,s);var o=r==16?2:r==17?3:7;r>15&&(A.F._putsE(n,s,a,o),s+=o)}return s};A.F._lenCodes=function(e,t){for(var n=e.length;n!=2&&e[n-1]==0;)n-=2;for(var s=0;s<n;s+=2){var i=e[s+1],r=s+3<n?e[s+3]:-1,a=s+5<n?e[s+5]:-1,o=s==0?-1:e[s-1];if(i==0&&r==i&&a==i){for(var l=s+5;l+2<n&&e[l+2]==i;)l+=2;var u=Math.min(l+1-s>>>1,138);u<11?t.push(17,u-3):t.push(18,u-11),s+=u*2-2}else if(i==o&&r==i&&a==i){for(var l=s+5;l+2<n&&e[l+2]==i;)l+=2;var u=Math.min(l+1-s>>>1,6);t.push(16,u-3),s+=u*2-2}else t.push(i,0)}return n>>>1};A.F._hufTree=function(e,t,n){var s=[],i=e.length,r=t.length,a=0;for(a=0;a<r;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<i;a++)e[a]!=0&&s.push({lit:a,f:e[a]});var o=s.length,l=s.slice(0);if(o==0)return 0;if(o==1){var u=s[0].lit,l=u==0?1:0;return t[(u<<1)+1]=1,t[(l<<1)+1]=1,1}s.sort(function(L,S){return L.f-S.f});var f=s[0],d=s[1],h=0,p=1,v=2;for(s[0]={lit:-1,f:f.f+d.f,l:f,r:d,d:0};p!=o-1;)h!=p&&(v==o||s[h].f<s[v].f)?f=s[h++]:f=s[v++],h!=p&&(v==o||s[h].f<s[v].f)?d=s[h++]:d=s[v++],s[p++]={lit:-1,f:f.f+d.f,l:f,r:d};var b=A.F.setDepth(s[p-1],0);for(b>n&&(A.F.restrictDepth(l,n,b),b=n),a=0;a<o;a++)t[(l[a].lit<<1)+1]=l[a].d;return b};A.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(A.F.setDepth(e.l,t+1),A.F.setDepth(e.r,t+1))};A.F.restrictDepth=function(e,t,n){var s=0,i=1<<n-t,r=0;for(e.sort(function(o,l){return l.d==o.d?o.f-l.f:l.d-o.d}),s=0;s<e.length&&e[s].d>t;s++){var a=e[s].d;e[s].d=t,r+=i-(1<<n-a)}for(r=r>>>n-t;r>0;){var a=e[s].d;a<t?(e[s].d++,r-=1<<t-a-1):s++}for(;s>=0;s--)e[s].d==t&&r<0&&(e[s].d--,r++);r!=0&&console.log("debt left")};A.F._goodIndex=function(e,t){var n=0;return t[n|16]<=e&&(n|=16),t[n|8]<=e&&(n|=8),t[n|4]<=e&&(n|=4),t[n|2]<=e&&(n|=2),t[n|1]<=e&&(n|=1),n};A.F._writeLit=function(e,t,n,s){return A.F._putsF(n,s,t[e<<1]),s+t[(e<<1)+1]};A.F.inflate=function(e,t){var n=Uint8Array;if(e[0]==3&&e[1]==0)return t||new n(0);var s=A.F,i=s._bitsF,r=s._bitsE,a=s._decodeTiny,o=s.makeCodes,l=s.codes2map,u=s._get17,f=s.U,d=t==null;d&&(t=new n(e.length>>>2<<3));for(var h=0,p=0,v=0,b=0,L=0,S=0,C=0,x=0,w=0,N,W;h==0;){if(h=i(e,w,1),p=i(e,w+1,2),w+=3,p==0){w&7&&(w+=8-(w&7));var F=(w>>>3)+4,R=e[F-4]|e[F-3]<<8;d&&(t=A.F._check(t,x+R)),t.set(new n(e.buffer,e.byteOffset+F,R),x),w=F+R<<3,x+=R;continue}if(d&&(t=A.F._check(t,x+(1<<17))),p==1&&(N=f.flmap,W=f.fdmap,S=511,C=31),p==2){v=r(e,w,5)+257,b=r(e,w+5,5)+1,L=r(e,w+10,4)+4,w+=14;for(var $=0;$<38;$+=2)f.itree[$]=0,f.itree[$+1]=0;for(var K=1,$=0;$<L;$++){var re=r(e,w+$*3,3);f.itree[(f.ordr[$]<<1)+1]=re,re>K&&(K=re)}w+=3*L,o(f.itree,K),l(f.itree,K,f.imap),N=f.lmap,W=f.dmap,w=a(f.imap,(1<<K)-1,v+b,e,w,f.ttree);var Q=s._copyOut(f.ttree,0,v,f.ltree);S=(1<<Q)-1;var le=s._copyOut(f.ttree,v,b,f.dtree);C=(1<<le)-1,o(f.ltree,Q),l(f.ltree,Q,N),o(f.dtree,le),l(f.dtree,le,W)}for(;;){var fe=N[u(e,w)&S];w+=fe&15;var Se=fe>>>4;if(!(Se>>>8))t[x++]=Se;else{if(Se==256)break;var oe=x+Se-254;if(Se>264){var q=f.ldef[Se-257];oe=x+(q>>>3)+r(e,w,q&7),w+=q&7}var Y=W[u(e,w)&C];w+=Y&15;var Ie=Y>>>4,Ee=f.ddef[Ie],Re=(Ee>>>4)+i(e,w,Ee&15);for(w+=Ee&15,d&&(t=A.F._check(t,x+(1<<17)));x<oe;)t[x]=t[x++-Re],t[x]=t[x++-Re],t[x]=t[x++-Re],t[x]=t[x++-Re];x=oe}}}return t.length==x?t:t.slice(0,x)};A.F._check=function(e,t){var n=e.length;if(t<=n)return e;var s=new Uint8Array(Math.max(n<<1,t));return s.set(e,0),s};A.F._decodeTiny=function(e,t,n,s,i,r){for(var a=A.F._bitsE,o=A.F._get17,l=0;l<n;){var u=e[o(s,i)&t];i+=u&15;var f=u>>>4;if(f<=15)r[l]=f,l++;else{var d=0,h=0;f==16?(h=3+a(s,i,2),i+=2,d=r[l-1]):f==17?(h=3+a(s,i,3),i+=3):f==18&&(h=11+a(s,i,7),i+=7);for(var p=l+h;l<p;)r[l]=d,l++}}return i};A.F._copyOut=function(e,t,n,s){for(var i=0,r=0,a=s.length>>>1;r<n;){var o=e[r+t];s[r<<1]=0,s[(r<<1)+1]=o,o>i&&(i=o),r++}for(;r<a;)s[r<<1]=0,s[(r<<1)+1]=0,r++;return i};A.F.makeCodes=function(e,t){for(var n=A.F.U,s=e.length,i,r,a,o,l,u=n.bl_count,o=0;o<=t;o++)u[o]=0;for(o=1;o<s;o+=2)u[e[o]]++;var f=n.next_code;for(i=0,u[0]=0,r=1;r<=t;r++)i=i+u[r-1]<<1,f[r]=i;for(a=0;a<s;a+=2)l=e[a+1],l!=0&&(e[a]=f[l],f[l]++)};A.F.codes2map=function(e,t,n){for(var s=e.length,i=A.F.U,r=i.rev15,a=0;a<s;a+=2)if(e[a+1]!=0)for(var o=a>>1,l=e[a+1],u=o<<4|l,f=t-l,d=e[a]<<f,h=d+(1<<f);d!=h;){var p=r[d]>>>15-t;n[p]=u,d++}};A.F.revCodes=function(e,t){for(var n=A.F.U.rev15,s=15-t,i=0;i<e.length;i+=2){var r=e[i]<<t-e[i+1];e[i]=n[r]>>>s}};A.F._putsE=function(e,t,n){n=n<<(t&7);var s=t>>>3;e[s]|=n,e[s+1]|=n>>>8};A.F._putsF=function(e,t,n){n=n<<(t&7);var s=t>>>3;e[s]|=n,e[s+1]|=n>>>8,e[s+2]|=n>>>16};A.F._bitsE=function(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8)>>>(t&7)&(1<<n)-1};A.F._bitsF=function(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)&(1<<n)-1};A.F._get17=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)};A.F._get25=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16|e[(t>>>3)+3]<<24)>>>(t&7)};A.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}();(function(){for(var e=A.F.U,t=32768,n=0;n<t;n++){var s=n;s=(s&2863311530)>>>1|(s&1431655765)<<1,s=(s&3435973836)>>>2|(s&858993459)<<2,s=(s&4042322160)>>>4|(s&252645135)<<4,s=(s&4278255360)>>>8|(s&16711935)<<8,e.rev15[n]=(s>>>16|s<<16)>>>17}function i(r,a,o){for(;a--!=0;)r.push(0,o)}for(var n=0;n<32;n++)e.ldef[n]=e.of0[n]<<3|e.exb[n],e.ddef[n]=e.df0[n]<<4|e.dxb[n];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),A.F.makeCodes(e.fltree,9),A.F.codes2map(e.fltree,9,e.flmap),A.F.revCodes(e.fltree,9),i(e.fdtree,32,5),A.F.makeCodes(e.fdtree,5),A.F.codes2map(e.fdtree,5,e.fdmap),A.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)})();const ap={class:"image-container"},op=["src"],lp={class:"response-tools"},cp={class:"response-extra"},up=["placeholder"],fp={class:"tag-input"},dp=["placeholder"],hp={class:"response-extra"},pp=Oe({__name:"PainterView",setup(e){const t=Lt(),n=or(),s=lr(),i=De(s.lastDoneImage??""),r=rs(),a=De(!1),o=De(!1),l=De(""),u=De(""),f=De([]),d=wn("upload-button");Ms(()=>{i.value!==""&&!s.restartPainting||s.lastUploadErrored&&confirm(ge.t("painter.do_you_want_to_restore"))||h()}),Rt(s,()=>{if(s.restartPainting){if(s.lastUploadErrored&&confirm(ge.t("painter.do_you_want_to_restore")))return;h()}});const h=()=>{s.restartPainting=!1,s.lastUploadErrored=!1;try{c.destroy()}catch{}finally{c.open({onDone:()=>{i.value=c.flatten().toDataURL("image/png"),s.lastDoneImage=i.value},onCancel:()=>{r.push("/")},width:400,height:400})}},p=async()=>{try{d.value.disabled=!0,await it.call("com.shinolabs.pinksea.refreshSession",{data:{},headers:{Authorization:`Bearer ${t.token}`}});const{data:L}=await it.call("com.shinolabs.pinksea.putOekaki",{data:{data:i.value,tags:f.value,nsfw:o.value,alt:u.value,parent:void 0,bskyCrosspost:a.value},headers:{Authorization:`Bearer ${t.token}`}});s.lastDoneImage=null,s.lastUploadErrored=!1,await r.push(`/${n.did}/oekaki/${L.rkey}`)}catch{d.value.disabled=!1,s.lastUploadErrored=!0,alert(ge.t("painter.could_not_send_post"))}},v=()=>{l.value.trim().length<1||f.value.length>5||(f.value.push(l.value),l.value="")},b=()=>{l.value.length>0||f.value.length<1||f.value.pop()};return(L,S)=>(Z(),je(_n,null,{default:ut(()=>[O("div",ap,[O("img",{src:i.value},null,8,op)]),S[5]||(S[5]=O("br",null,null,-1)),O("div",lp,[O("div",cp,[ht(O("input",{type:"text","onUpdate:modelValue":S[0]||(S[0]=C=>u.value=C),placeholder:he(ge).t("painter.add_a_description")},null,8,up),[[jn,u.value]]),O("span",null,[ht(O("input",{type:"checkbox",value:"nsfw","onUpdate:modelValue":S[1]||(S[1]=C=>o.value=C)},null,512),[[Wn,o.value]]),S[4]||(S[4]=O("span",null,"NSFW",-1))])]),O("div",fp,[ye(ar,{tags:f.value,disableNavigation:!0},null,8,["tags"]),ht(O("input",{type:"text",placeholder:he(ge).t("painter.tag"),"onUpdate:modelValue":S[2]||(S[2]=C=>l.value=C),onKeyup:[ui(b,["delete"]),ui(v,["space"]),ui(v,["enter"])]},null,40,dp),[[jn,l.value]])]),O("div",hp,[O("button",{onClick:p,ref:"upload-button"},ie(L.$t("painter.upload")),513),O("span",null,[ht(O("input",{type:"checkbox",value:"bsky","onUpdate:modelValue":S[3]||(S[3]=C=>a.value=C)},null,512),[[Wn,a.value]]),O("span",null,ie(L.$t("painter.crosspost_to_bluesky")),1)])])])]),_:1}))}}),gp=Xe(pp,[["__scopeId","data-v-538c41fb"]]),mp={class:"user-card"},yp=["href"],vp=["href"],bp=Oe({__name:"UserView",setup(e){const t=De(""),n=el();Rt(()=>n.params.did,async()=>{const{data:r}=await it.get("com.shinolabs.pinksea.getHandleFromDid",{params:{did:n.params.did}});t.value=r.handle},{immediate:!0});const s=Pe(()=>`https://bsky.app/profile/${n.params.did}`),i=Pe(()=>`http://${t.value}`);return(r,a)=>(Z(),je(_n,null,{default:ut(()=>[O("div",mp,[O("h2",null,ie(r.$t("breadcrumb.user_profile",{handle:t.value})),1),O("div",null,[O("a",{class:"bluesky-link",href:s.value,target:"_blank"},ie(r.$t("profile.bluesky_profile")),9,yp)]),O("div",null,[O("a",{class:"domain-link",href:i.value,target:"_blank"},ie(r.$t("profile.domain")),9,vp)])]),ye(cr,{endpoint:"com.shinolabs.pinksea.getAuthorFeed","xrpc-params":{did:r.$route.params.did}},null,8,["xrpc-params"])]),_:1}))}}),kp=Xe(bp,[["__scopeId","data-v-080f2d3e"]]),wp={class:"oekaki-image-container"},_p={class:"oekaki-image"},Sp=["src","alt","title"],Cp=["title"],Lp=Oe({__name:"PostViewOekakiImageContainer",props:{oekaki:{}},setup(e){Uo(o=>({"3338078f":i.value}));const t=e,n=Lt(),s=wn("nsfw-cover"),i=Pe(()=>`url(${t.oekaki.imageLink})`),r=Pe(()=>t.oekaki.alt??""),a=()=>{s.value.style.display="none"};return(o,l)=>(Z(),ce("div",wp,[O("div",_p,[O("img",{src:t.oekaki.imageLink,alt:r.value,title:r.value},null,8,Sp),t.oekaki.nsfw&&he(n).blurNsfw?(Z(),ce("div",{key:0,class:"oekaki-nsfw-cover",ref:"nsfw-cover",title:r.value},[O("div",{class:"oekaki-nsfw-blur",onClick:Ye(a,["prevent"])}," NSFW ")],8,Cp)):Dt("",!0)])]))}}),Ol=Xe(Lp,[["__scopeId","data-v-57093ee8"]]),xp={key:0,class:"oekaki-card"},Pp={class:"oekaki-meta"},Tp={class:"oekaki-author"},Ap=Oe({__name:"PostViewOekakiParentCard",props:{oekaki:{}},setup(e){const t=e,n=Lt(),s={year:"numeric",month:"long",day:"numeric"},i=Pe(()=>`/${t.oekaki.authorDid}`),r=Pe(()=>new Date(t.oekaki.creationTime).toLocaleTimeString(n.lang,s));return(a,o)=>{const l=ns("RouterLink");return!t.oekaki.nsfw||t.oekaki.nsfw&&!he(n).hideNsfw?(Z(),ce("div",xp,[ye(Ol,{oekaki:t.oekaki},null,8,["oekaki"]),O("div",Pp,[O("span",null,[Ze(ie(a.$t("timeline.by_before_handle")),1),O("b",Tp,[ye(l,{to:i.value},{default:ut(()=>[Ze("@"+ie(t.oekaki.authorHandle),1)]),_:1},8,["to"])]),Ze(ie(a.$t("timeline.by_after_handle")),1)]),o[0]||(o[0]=O("br",null,null,-1)),O("span",null,ie(r.value),1),o[1]||(o[1]=O("br",null,null,-1)),t.oekaki.tags!==void 0?(Z(),je(ar,{key:0,tags:t.oekaki.tags},null,8,["tags"])):Dt("",!0)])])):Dt("",!0)}}}),Ep=Xe(Ap,[["__scopeId","data-v-96c41e59"]]),Rp={key:0,class:"oekaki-card"},Dp={class:"oekaki-child-info"},Ip={class:"oekaki-author"},Fp=Oe({__name:"PostViewOekakiChildCard",props:{oekaki:{}},setup(e){const t=e,n=Lt(),s={year:"numeric",month:"long",day:"numeric"},i=Pe(()=>`/${t.oekaki.authorDid}`),r=Pe(()=>new Date(t.oekaki.creationTime).toLocaleTimeString(n.lang,s));return(a,o)=>{const l=ns("RouterLink");return!t.oekaki.nsfw||t.oekaki.nsfw&&!he(n).hideNsfw?(Z(),ce("div",Rp,[O("div",Dp,[Ze(ie(a.$t("post.response_from_before_handle")),1),O("b",Ip,[ye(l,{to:i.value},{default:ut(()=>[Ze("@"+ie(t.oekaki.authorHandle),1)]),_:1},8,["to"])]),Ze(ie(a.$t("post.response_from_after_handle"))+ie(a.$t("post.response_from_at_date"))+ie(r.value),1)]),ye(Ol,{oekaki:t.oekaki,style:{"max-height":"400px"}},null,8,["oekaki"])])):Dt("",!0)}}}),Op=Xe(Fp,[["__scopeId","data-v-b40121b3"]]),Np={class:"respond-box"},zp={key:0},Mp={key:1},$p={key:0},Up={key:1},Bp=["src"],Vp={class:"respond-extra"},Hp=["placeholder"],jp={class:"two-buttons"},Wp=Oe({__name:"RespondBox",props:{parent:{}},setup(e){const t=or(),n=Lt(),s=De(null),i=De(""),r=De(!1),a=wn("upload-button"),o=lr(),l=e,u=()=>{try{c.destroy()}catch{}finally{c.open({onDone:()=>{s.value=c.flatten().toDataURL("image/png")},width:480,height:160})}},f=()=>{s.value=null,o.lastDoneReply=null,o.lastReplyErrored=!1,o.lastReplyId=""},d=async()=>{try{a.value.disabled=!0,await it.call("com.shinolabs.pinksea.refreshSession",{data:{},headers:{Authorization:`Bearer ${n.token}`}}),await it.call("com.shinolabs.pinksea.putOekaki",{data:{data:s.value,tags:[],alt:i.value,nsfw:r.value,parent:l.parent.atProtoLink,bskyCrosspost:!1},headers:{Authorization:`Bearer ${n.token}`}}),o.lastDoneReply=null,o.lastReplyErrored=!1,o.lastReplyId="",window.location.reload()}catch{a.value.disabled=!1,o.lastDoneReply=s.value,o.lastReplyErrored=!0,o.lastReplyId=l.parent.oekakiRecordKey,alert(ge.t("painter.could_not_send_post"))}};return tn(()=>{o.lastReplyId==l.parent.oekakiRecordKey&&o.lastDoneReply!==null&&o.lastReplyErrored&&(s.value=o.lastDoneReply)}),(h,p)=>(Z(),ce("div",Np,[he(t).did===null?(Z(),ce("div",zp,ie(h.$t("response_box.login_to_respond")),1)):(Z(),ce("div",Mp,[s.value===null?(Z(),ce("div",$p,[O("p",null,ie(h.$t("response_box.click_to_respond")),1),O("button",{onClick:Ye(u,["prevent"])},ie(h.$t("response_box.open_painter")),1)])):(Z(),ce("div",Up,[O("img",{src:s.value},null,8,Bp),p[3]||(p[3]=O("br",null,null,-1)),O("div",Vp,[ht(O("input",{type:"text",placeholder:he(ge).t("painter.add_a_description"),"onUpdate:modelValue":p[0]||(p[0]=v=>i.value=v)},null,8,Hp),[[jn,i.value]]),O("span",null,[ht(O("input",{type:"checkbox","onUpdate:modelValue":p[1]||(p[1]=v=>r.value=v)},null,512),[[Wn,r.value]]),p[2]||(p[2]=O("span",null,"NSFW",-1))])]),O("div",jp,[O("button",{onClick:Ye(f,["prevent"])},ie(h.$t("response_box.cancel")),1),O("button",{onClick:Ye(d,["prevent"]),ref:"upload-button"},ie(h.$t("response_box.reply")),513)])]))]))]))}}),Kp=Xe(Wp,[["__scopeId","data-v-e6e110c8"]]),Gp={key:1},Jp=Oe({__name:"PostView",setup(e){const t=el(),n=De(null),s=De(null);return tn(async()=>{const{data:i}=await it.get("com.shinolabs.pinksea.getOekaki",{params:{did:t.params.did,rkey:t.params.rkey}});n.value=i.parent,s.value=i.children}),(i,r)=>(Z(),je(_n,null,{default:ut(()=>[n.value===null?(Z(),je(al,{key:0})):(Z(),ce("div",Gp,[ye(Ep,{oekaki:n.value},null,8,["oekaki"]),r[0]||(r[0]=O("br",null,null,-1)),(Z(!0),ce(Me,null,ss(s.value,a=>(Z(),je(Op,{key:a.atProtoLink,oekaki:a},null,8,["oekaki"]))),128)),ye(Kp,{parent:n.value},null,8,["parent"])]))]),_:1}))}}),qp=Oe({__name:"TagView",setup(e){return(t,n)=>(Z(),je(_n,null,{default:ut(()=>[ye(cr,{endpoint:"com.shinolabs.pinksea.getTagFeed","xrpc-params":{tag:t.$route.params.tag}},null,8,["xrpc-params"])]),_:1}))}}),Yp={class:"settings-container"},Zp={style:{"margin-right":"10px"}},Xp=["value"],Qp=Oe({__name:"SettingsView",setup(e){const t=Lt();return Rt(t,()=>{ge.changeLanguage(t.lang)}),(n,s)=>(Z(),je(_n,null,{default:ut(()=>[O("div",Yp,[O("fieldset",null,[O("legend",null,ie(n.$t("settings.category_general")),1),O("span",Zp,ie(n.$t("settings.general_language")),1),ht(O("select",{"onUpdate:modelValue":s[0]||(s[0]=i=>he(t).lang=i)},[(Z(!0),ce(Me,null,ss(he(Zt),(i,r)=>(Z(),ce("option",{key:r,value:r},ie(i.name),9,Xp))),128))],512),[[ef,he(t).lang]])]),O("fieldset",null,[O("legend",null,ie(n.$t("settings.category_sensitive")),1),ht(O("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=i=>he(t).blurNsfw=i)},null,512),[[Wn,he(t).blurNsfw]]),s[3]||(s[3]=Ze()),O("span",null,ie(n.$t("settings.sensitive_blur_nsfw")),1),s[4]||(s[4]=O("br",null,null,-1)),ht(O("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=i=>he(t).hideNsfw=i)},null,512),[[Wn,he(t).hideNsfw]]),s[5]||(s[5]=Ze()),O("span",null,ie(n.$t("settings.sensitive_hide_nsfw")),1)])])]),_:1}))}}),eg=Xe(Qp,[["__scopeId","data-v-32250154"]]),Nl=hd({history:Hf("/"),routes:[{path:"/",name:"home",component:Hh,meta:{resolveBreadcrumb:async()=>({name:"breadcrumb.recent"})}},{path:"/callback",name:"callback",component:jh},{path:"/paint",name:"paint",component:gp,meta:{resolveBreadcrumb:async()=>({name:"breadcrumb.painter"})}},{path:"/:did",name:"user",component:kp,meta:{resolveBreadcrumb:async e=>{const{data:t}=await it.get("com.shinolabs.pinksea.getHandleFromDid",{params:{did:e.did}});return{name:"breadcrumb.user_profile",params:{handle:t.handle}}}}},{path:"/:did/oekaki/:rkey",name:"post",component:Jp,meta:{resolveBreadcrumb:async e=>{const{data:t}=await it.get("com.shinolabs.pinksea.getHandleFromDid",{params:{did:e.did}});return{name:"breadcrumb.user_post",params:{handle:t.handle}}}}},{path:"/tag/:tag",name:"tag",component:qp,meta:{resolveBreadcrumb:async e=>({name:"breadcrumb.tagged",params:{tag:e.tag}})}},{path:"/settings",name:"settings",component:eg,meta:{resolveBreadcrumb:async()=>({name:"breadcrumb.settings"})}}]});xh(Nl);const tg=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ng=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,sg=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ig(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){rg(e);return}return t}function rg(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function ag(e,t={}){if(typeof e!="string")return e;const n=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const s=n.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!sg.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(tg.test(e)||ng.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,ig)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}function og(e,t){if(e==null)return;let n=e;for(let s=0;s<t.length;s++){if(n==null||n[t[s]]==null)return;n=n[t[s]]}return n}function dr(e,t,n){if(n.length===0)return t;const s=n[0];return n.length>1&&(t=dr(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,s)?Number.isInteger(Number(n[1]))?[]:{}:e[s],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(s))&&Array.isArray(e)?e.slice()[s]:Object.assign({},e,{[s]:t})}function zl(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const s in e)n[s]=e[s];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const s in e)n[s]=e[s];return n}return dr(e,zl(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Ml(e,t){return t.map(n=>n.split(".")).map(n=>[n,og(e,n)]).filter(n=>n[1]!==void 0).reduce((n,s)=>dr(n,s[1],s[0]),{})}function $l(e,t){return t.map(n=>n.split(".")).reduce((n,s)=>zl(n,s),e)}function Pa(e,{storage:t,serializer:n,key:s,debug:i,pick:r,omit:a,beforeHydrate:o,afterHydrate:l},u,f=!0){try{f&&o?.(u);const d=t.getItem(s);if(d){const h=n.deserialize(d),p=r?Ml(h,r):h,v=a?$l(p,a):p;e.$patch(v)}f&&l?.(u)}catch(d){i&&console.error("[pinia-plugin-persistedstate]",d)}}function Ta(e,{storage:t,serializer:n,key:s,debug:i,pick:r,omit:a}){try{const o=r?Ml(e,r):e,l=a?$l(o,a):o,u=n.serialize(l);t.setItem(s,u)}catch(o){i&&console.error("[pinia-plugin-persistedstate]",o)}}function lg(e,t,n){const{pinia:s,store:i,options:{persist:r=n}}=e;if(!r)return;if(!(i.$id in s.state.value)){const l=s._s.get(i.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const o=(Array.isArray(r)?r:r===!0?[{}]:[r]).map(t);i.$hydrate=({runHooks:l=!0}={})=>{o.forEach(u=>{Pa(i,u,e,l)})},i.$persist=()=>{o.forEach(l=>{Ta(i.$state,l)})},o.forEach(l=>{Pa(i,l,e),i.$subscribe((u,f)=>Ta(f,l),{detached:!0})})}function cg(e={}){return function(t){lg(t,n=>({key:(e.key?e.key:s=>s)(n.key??t.store.$id),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>ag(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),e.auto??!1)}}function ug(e,{i18next:t,rerenderOn:n=["languageChanged","loaded","added","removed"],slotStart:s="{",slotEnd:i="}"}){const r=De(new Date),a=()=>ts(()=>{r.value=new Date}),o=()=>r.value;n.forEach(u=>{var f;switch(u){case"added":case"removed":(f=t.store)==null||f.on(u,a);break;default:t.on(u,a);break}}),e.component("i18next",hg);const l=()=>t.isInitialized;e.config.globalProperties.$t=Aa(t.t.bind(t),o,l),e.config.globalProperties.$i18next=new Proxy(t,{get(u,f){switch(f){case"__withAccessRecording":return(d,h)=>Aa(d,o,h);case"__slotPattern":return dg(s,i);default:return o(),Reflect.get(u,f)}}})}function Aa(e,t,n){return new Proxy(e,{apply:function(s,i,r){return t(),n()?Reflect.apply(s,i,r):""}})}function fg(){const e=sr();if(!e)throw new Error("i18next-vue: No Vue instance in context. This needs to be called inside setup().");const t=e.appContext.config.globalProperties;if(!t.$i18next)throw new Error("i18next-vue: Make sure to register the i18next-vue plugin using app.use(...).");return t.$i18next}function dg(e,t){const n=`${e}\\s*([a-z0-9\\-]+)\\s*${t}`;return new RegExp(n,"gi")}var hg=Oe({props:{translation:{type:String,required:!0}},setup(e,{slots:t}){const n=fg().__slotPattern;return()=>{const s=e.translation,i=[];let r,a=0;for(;(r=n.exec(s))!==null;){i.push(s.substring(a,r.index));const o=t[r[1]];o?i.push(...o()):i.push(r[0]),a=n.lastIndex}return i.push(s.substring(a)),i}}});await ge.init({resources:Zt,fallbackLng:"en"});const Qs=of(df),Ul=bd();Ul.use(cg());Qs.use(Ul);Qs.use(Nl);Qs.use(ug,{i18next:ge});Qs.mount("#app");
